<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><meta name="theme-color" content="#123456"><meta name="generator" content="Hexo 4.2.0"><title>Hello, NilEra :-)</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hello, NilEra :-)"><meta name="msapplication-TileImage" content="/img/StarLogo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hello, NilEra :-)"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="努力做自己喜欢的事"><meta property="og:type" content="blog"><meta property="og:title" content="Hello, NilEra :-)"><meta property="og:url" content="https://hello-nilera.com/"><meta property="og:site_name" content="Hello, NilEra :-)"><meta property="og:description" content="努力做自己喜欢的事"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hello-nilera.com/img/og_image.png"><meta property="article:author" content="NilEra"><meta property="article:tag" content="Hello NilEra"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hello-nilera.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hello-nilera.com"},"headline":"Hello, NilEra :-)","image":["https://hello-nilera.com/img/og_image.png"],"author":{"@type":"Person","name":"NilEra"},"publisher":{"@type":"Organization","name":"Hello, NilEra :-)","logo":{"@type":"ImageObject","url":"https://hello-nilera.com/img/StarLogo.svg"}},"description":"努力做自己喜欢的事"}</script><link rel="icon" href="/img/StarLogo.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?249654dcf9a3bf70708fdfc6e2b1ec2b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="F6BD78C6BD0096D2218CF88334111125"><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/StarLogo.svg" alt="Hello, NilEra :-)" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">目录</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" href="/me">我</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-08-06T02:54:59.000Z" title="2024/8/6 10:54:59">2024-08-06</time>发表</span><span class="level-item"><time dateTime="2024-08-06T04:02:29.167Z" title="2024/8/6 12:02:29">2024-08-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/CppDev/">CppDev</a><span> / </span><a class="link-muted" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/">语法点</a><span> / </span><a class="link-muted" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/enum-class/">enum class</a></span><span class="level-item">2 分钟读完 (大约372个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/08/06/CPP-11-Enum-Class/">CPP_11 Enum Class</a></p><div class="content"><h2 id="C-11-枚举类-enum-class"><a href="#C-11-枚举类-enum-class" class="headerlink" title="C++ 11 枚举类 enum class"></a>C++ 11 枚举类 <code>enum class</code></h2><p>我们在 <code>C++</code> 中常使用 <code>enum</code> 来给同一类别中的多个值命名，如：给颜色中的 <code>0, 1, 2, 3, ...</code> 值命名，可以用下面的写法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    Red,</span><br><span class="line">    Yellow,</span><br><span class="line">    Blue,</span><br><span class="line">    Gray,</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>C++</code> 的 <code>C98</code> 标准称 <code>enum</code> 为<strong>不限范围的枚举型别</strong>。因为 <code>C++</code> 中的枚举量会泄露到包含这个枚举类型的作用域内，在这个作用域内就不能有其他实体取相同的名字。我们可以通过一段代码来演示这一现象：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    RED,</span><br><span class="line">    YELLOW,</span><br><span class="line">    BLUE,</span><br><span class="line">    GRAY</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> GRAY = <span class="number">10</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; GRAY &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们编译时，会出现重定义错误：<code>error: &#39;auto GRAY&#39; redeclared as different kind of entity</code>。</p>
<p>为了解决这一问题，<code>C++ 11</code> 新标准提供了 <strong><code>enum Class</code> 枚举类</strong>。对于上面的代码，我们再一次做出演示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum class</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    RED,</span><br><span class="line">    YELLOW,</span><br><span class="line">    BLUE,</span><br><span class="line">    GRAY</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> GRAY = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(Color::GRAY) &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; GRAY &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时，输出 <code>3</code> 和 <code>10</code>。可以看到在全局作用域的 <code>GRAY</code> 被赋值成了 <code>10</code>，而枚举类中的 <code>GRAY</code> 还是 <code>3</code>，且必须使用作用域限定符进行访问。 这里可以看到我使用了一个 <code>static_cast&lt;int&gt; (Color::GRAY)</code> 进行了一个强制类型转换，这是因为 <code>enum</code> 不支持隐式类型转换。如果想要进行转换，则必须使用 <code>static_cast</code> 进行强制类型转换。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-08-05T02:37:16.000Z" title="2024/8/5 10:37:16">2024-08-05</time>发表</span><span class="level-item"><time dateTime="2024-08-14T10:13:32.001Z" title="2024/8/14 18:13:32">2024-08-14</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><span> / </span><a class="link-muted" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/">LLMs</a></span><span class="level-item">8 分钟读完 (大约1240个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/08/05/Deploy-LLMs-ON-PC/">Deploy_LLMs_ON_PC</a></p><div class="content"><h2 id="如何搭建运行在本地的-LLMs-🤔"><a href="#如何搭建运行在本地的-LLMs-🤔" class="headerlink" title="如何搭建运行在本地的 LLMs 🤔"></a>如何搭建运行在本地的 LLMs 🤔</h2><p>[TOC]</p>
<h3 id="🤗-1-基于-LM-Studio"><a href="#🤗-1-基于-LM-Studio" class="headerlink" title="🤗 1. 基于 LM-Studio"></a>🤗 1. 基于 <code>LM-Studio</code></h3><ol>
<li><p>访问 <code>LM-Studio</code>，网址：<a target="_blank" rel="noopener" href="https://lmstudio.ai/">LM Studio - Discover, download, and run local LLMs</a></p>
<p>下载对应系统的安装包，然后双击运行即可。</p>
</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/LM_Studio_Website.png">

<ol start="2">
<li>访问 <code>ModelScope</code><a target="_blank" rel="noopener" href="https://community.modelscope.cn/">魔搭社区</a> 或者 🤗<code>Hugging Face</code><a target="_blank" rel="noopener" href="https://huggingface.co/">Hugging Face</a>，这里以 <code>ModelScope</code> 为例，进入模型库，下载相应模型。</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/ModelScope.png">

<center>魔搭社区官网</center>

<img src="./Deploy_LLMs_ON_PC/ModelScopeDownloadModels.png">

<center>找到需要的模型并下载</center>

<ol start="3">
<li>下载好响应的模型后，将模型组织好，放到相应的文件夹中，这里按照 <code>models/Publisher/Repository/*.gguf</code> 的路径组织模型路径，然后选择 <code>Change</code> 更改模型的位置。如果不按照该路径组织，则会出现 <code>You have 1 uncategorized model files.</code> 错误，如下图所示：</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/Error_With_Wrong_Project_Structure.png">

<img src="./Deploy_LLMs_ON_PC/LM_Studio_Change_ModelFile.png">

<ol start="4">
<li>但是那种方式是不太推荐的，我们组织 <code>USER/MODEL_NAME/*.gguf</code> 的结构，这种结构会比较明了：</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/LM_Studio_Change_ModelFile0002.png">

<ol start="5">
<li>完成模型文件的下载和组织后，我们可以进入聊天页面，选择模型进行加载。这里为了节约空间，我删除了 <code>nilera/Qwen1.5-7B-Chat-Q4-GGUF</code> 目录下的文件。</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/SelectAModel2Load.png">

<ol start="6">
<li>选择模型加载，等待加载完成即可像平时使用其他大模型的时候一样使用这些模型。</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/LM_Studio_Change_Test_qwen1_5.png">

<ol start="7">
<li>但是如果我们想在代码中使用我们的大模型应该怎么做呢？我们可以选择 <code>LM-Studio</code> 的 <code>Local Server</code> 菜单项，选择 <code>Start Server</code> 即可部署到一个本地指定的端口（默认是 <code>1234</code>）。</li>
</ol>
<img src="./Deploy_LLMs_ON_PC/LM_Studio_Change_Start_Local_Server0001.png">

<img src="./Deploy_LLMs_ON_PC/LM_Studio_Change_Start_Local_Server_0002.png">

<ol start="8">
<li>右侧有许多样例，我们可以选择一段样例，如：<code>chat(python)</code>，这里对这段代码进行简单的解释。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Example: reuse your existing OpenAI setup</span></span><br><span class="line"><span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI</span><br><span class="line"></span><br><span class="line"><span class="comment"># Point to the local server</span></span><br><span class="line">client = OpenAI(base_url=<span class="string">&quot;http://localhost:1234/v1&quot;</span>, api_key=<span class="string">&quot;lm-studio&quot;</span>)</span><br><span class="line"></span><br><span class="line">completion = client.chat.completions.create(</span><br><span class="line">  model=<span class="string">&quot;Publisher/Repository&quot;</span>,									<span class="comment"># 可以理解为模型路径, 这里以启动在这个端口的模型为准</span></span><br><span class="line">  messages=[</span><br><span class="line">    &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;Always answer in Chinese.&quot;</span>&#125;,	<span class="comment"># 系统设置: 每次都用中文回答</span></span><br><span class="line">    &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;Introduce yourself.&quot;</span>&#125;			<span class="comment"># 对话设置: 这里希望 AI 介绍一下他自己</span></span><br><span class="line">  ],</span><br><span class="line">  temperature=<span class="number">0.7</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(completion.choices[<span class="number">0</span>].message)							<span class="comment"># 获取模型的回复</span></span><br></pre></td></tr></table></figure>

<ol start="9">
<li>然后我们就可以愉快的使用 <code>Python</code> 调用我们的本地大模型了。</li>
</ol>
<h3 id="⛵-2-使用-PowerInfer-框架"><a href="#⛵-2-使用-PowerInfer-框架" class="headerlink" title="⛵ 2. 使用 PowerInfer 框架"></a>⛵ 2. 使用 <code>PowerInfer</code> 框架</h3><p><code>PowerInfer</code> 框架 <em>GitHub</em> 链接：<a target="_blank" rel="noopener" href="https://github.com/SJTU-IPADS/PowerInfer">SJTU-IPADS&#x2F;PowerInfer: High-speed Large Language Model Serving on PCs with Consumer-grade GPUs (github.com)</a></p>
<p>$2024$ 年发布论文 <code>PowerInfer-2</code>：<font color=Blue>[</font><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2406.06282">2406.06282] PowerInfer-2: Fast Large Language Model Inference on a Smartphone (arxiv.org)</a></p>
<p><code>Anaconda</code> 命令使用：<a target="_blank" rel="noopener" href="https://blog.csdn.net/miracleoa/article/details/106115730">【anaconda】conda创建、查看、删除虚拟环境（anaconda命令集）_conda 创建环境-CSDN博客</a></p>
<p>参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42232045/article/details/135113112">大模型笔记之-3090显卡推理70B参数模型|基于PowerInfer 一个 CPU&#x2F;GPU LLM 推理引擎-CSDN博客</a></p>
<ol>
<li>使用 <code>Conda</code> 创建环境，这里 Python 版本需要大于 <code>3.8</code>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n powerinfer1 python=3.8</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>激活 <code>Conda</code> 环境：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate powerinfer1</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>克隆 <code>PowerInfer</code> 框架代码：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:SJTU-IPADS/PowerInfer.git</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>安装所需依赖：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>使用 <code>CMake</code> 进行编译（<code>CMake</code> 版本需要大于：<code>3.17+</code>）</p>
<p>这里很大概率可能会出现编译器版本与 CUDA 版本不一致的情况，解决方案：<a target="_blank" rel="noopener" href="https://blog.csdn.net/lishiyu93/article/details/114599859">fatal error C1189: #error: – unsupported Microsoft Visual Studio version! - CSDN博客</a></p>
<p>这里我有三个 <code>CUDA</code> 版本，貌似修改其中任意一个就可以，这里我修改的是 <code>CUDA v11.6</code> 版本。</p>
<p>① 如果是 <code>NVIDIA GPUs</code>，需要使用如下方式进行编译：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build -DLLAMA_CUBLAS=ON</span><br><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure>

<p>② 如果是 <code>AMD GPUs</code>，需要使用下面的方式进行编译：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Replace &#x27;1100&#x27; to your card architecture name, you can get it by rocminfo</span></span><br><span class="line">CC=/opt/rocm/llvm/bin/clang CXX=/opt/rocm/llvm/bin/clang++ cmake -S . -B build -</span><br><span class="line">DLLAMA_HIPBLAS=ON -DAMDGPU_TARGETS=gfx1100</span><br><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure>

<p>③ 如果是 <code>CPU ONLY</code>，需要使用下面的方式进行编译：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build</span><br><span class="line">cmake --build build --config Release</span><br></pre></td></tr></table></figure>

<p>这里我有一块 <code>Nvidia 1050ti</code> 所以我使用<strong>方式 ①</strong>进行编译。</p>
</li>
<li><p>对于我们下载的模型，可以使用提供的方式进行转化，转化为 PowerInfer 可以使用的类型：</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make sure that you have done `pip install -r requirements.txt`</span></span><br><span class="line">python convert.py --outfile /PATH/TO/POWERINFER/GGUF/REPO/MODELNAME.powerinfer.gguf /PATH/TO/ORIGINAL/MODEL /PATH/TO/PREDICTOR</span><br><span class="line"><span class="comment"># python convert.py --outfile ./ReluLLaMA-70B-PowerInfer-GGUF/llama-70b-relu.powerinfer.gguf ./SparseLLM/ReluLLaMA-70B ./PowerInfer/ReluLLaMA-70B-Predictor</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python convert.py --outfile D:/LMStudio/models/Publisher/Repository/qwen1_5-7b-chat-q4_0.gguf ./SparseLLM/ReluLLaMA-70B ./PowerInfer/ReluLLaMA-70B-Predictor</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>或者将要 原始模型转化为 GGUF 模型</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python convert-dense.py --outfile /PATH/TO/DENSE/GGUF/REPO/MODELNAME.gguf /PATH/TO/ORIGINAL/MODEL</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>运行模型</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./build/bin/Release/main.exe -m C:/Users/NilEra/Downloads/llama-7b-relu.powerinfer.gguf -n 128 -t 2 -p <span class="string">&quot;Once upon a time&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 其中/home/user/data/ReluLLaMA-70B-PowerInfer-GGUF/llama-70b-relu.q4.powerinfer.gguf为GPTQ量化过的模型文件</span></span><br></pre></td></tr></table></figure>

<ol start="9">
<li>一些问题：</li>
</ol>
<p><img src="/./Deploy_LLMs_ON_PC/Issues22.png" alt="Issus22"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-08-01T07:29:16.000Z" title="2024/8/1 15:29:16">2024-08-01</time>发表</span><span class="level-item"><time dateTime="2024-08-13T12:18:19.674Z" title="2024/8/13 20:18:19">2024-08-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><span> / </span><a class="link-muted" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/">LLMs</a></span><span class="level-item">2 分钟读完 (大约289个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/08/01/LLM-General-Education/">LLM_General_Education</a></p><div class="content"><h2 id="🤗-大语言模型通识"><a href="#🤗-大语言模型通识" class="headerlink" title="🤗 大语言模型通识"></a>🤗 大语言模型通识</h2><h3 id="大语言模型的配置需求"><a href="#大语言模型的配置需求" class="headerlink" title="大语言模型的配置需求"></a>大语言模型的配置需求</h3><p>首先要搞清楚，本地可以部署什么大模型，取决于个人电脑的硬件配置，尤其需要关注 <code>GPU</code> 的显存。一般来说，只要本地机器 <code>GPU</code> 的显存能够满足大模型的要求，那基本上都可以本地部署。</p>
<p>那么大模型类别这么多，有 $7B$、$13B$、$70B$ 等等，<code>GPU</code> 显存如何准备呢？</p>
<p>在没有考虑任何模型量化技术的前提下，有公式如下：<br>$$<br>GB &#x3D; B × 2<br>$$</p>
<p>其中为 $GB$ 模型显存占用，$B$ 为大模型参数量。</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv33371756/">AI大模型本地化部署Q&#x2F;A硬件篇</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35054222/article/details/139123564">如何找到最新的大模型、如何判断本地硬件是否满足大模型需求、如何快速部署大模型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.datalearner.com/ai-models/leaderboard/datalearner-llm-leaderboard">大模型综合评测对比 | 当前主流大模型在各评测数据集上的表现总榜单 | 数据学习 (DataLearner)</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-30T14:55:47.000Z" title="2024/7/30 22:55:47">2024-07-30</time>发表</span><span class="level-item"><time dateTime="2024-07-31T09:22:55.139Z" title="2024/7/31 17:22:55">2024-07-31</time>更新</span><span class="level-item">30 分钟读完 (大约4524个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/30/MyBatisPlus/">MyBatisPlus</a></p><div class="content"><h2 id="🐦MyBatis-Plus"><a href="#🐦MyBatis-Plus" class="headerlink" title="🐦MyBatis-Plus"></a>🐦MyBatis-Plus</h2><p>[TOC]</p>
<h3 id="🚪-1-快速入门"><a href="#🚪-1-快速入门" class="headerlink" title="🚪 1. 快速入门"></a>🚪 1. 快速入门</h3><h4 id="1-1-入门案例"><a href="#1-1-入门案例" class="headerlink" title="1.1 入门案例"></a>1.1 入门案例</h4><p>入门案例：基于课前资料提供的项目，实现下列功能:</p>
<ul>
<li>新增用户功能</li>
<li>根据 <code>id</code> 查询用户</li>
<li>根据 <code>id</code> 批量查询用户</li>
<li>根据 <code>id</code> 更新用户</li>
<li>根据 <code>id</code> 删除用户</li>
</ul>
<h5 id="1-1-1-引入-MyBatis-Plus-的依赖"><a href="#1-1-1-引入-MyBatis-Plus-的依赖" class="headerlink" title="1.1.1 引入 MyBatis-Plus 的依赖"></a>1.1.1 引入 <code>MyBatis-Plus</code> 的依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MyBatisPlus --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="1-1-2-定义-Mapper"><a href="#1-1-2-定义-Mapper" class="headerlink" title="1.1.2 定义 Mapper"></a>1.1.2 定义 <code>Mapper</code></h5><p>自定义的 <code>Mapper</code> 继承 <code>MybatisPlus</code>提供的 <code>BaseMapper</code> 接口。</p>
<p><code>BaseMapper&lt;T&gt;</code> 给我们提供了很多基础方法，如常用的增、删、改、查等操作。</p>
<p><img src="/./MyBatisPlus/BaseMapperInterface.png" alt="BaseMapperInterface"> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123; &#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-1-3-直接使用"><a href="#1-1-3-直接使用" class="headerlink" title="1.1.3 直接使用"></a>1.1.3 直接使用</h5><p>做完上面两步操作，此时我们不需要再编写复杂的 <code>SQL</code> 语句即可对数据库进行增、删、改、查操作。</p>
<p>当然对于原有 <code>MyBatis</code> 操作，我们也可以直接使用，因为 <code>MyBatis-Plus</code> 对 <code>MyBatis</code> 是非侵入的，体现了其<strong>润物无声</strong>的特点。</p>
<h4 id="1-2-常见注解"><a href="#1-2-常见注解" class="headerlink" title="1.2 常见注解"></a>1.2 常见注解</h4><p>在初次使用 <code>MyBatis-Plus</code> 时，我们并没有指定要执行操作的表信息和字段信息，那么 <code>Mybatis-Plus</code> 是如何知道我们要查询的是哪张表？表中有哪些字段呢？</p>
<p><code>MyBatisPlus</code> 通过扫描实体类，并基于<strong>反射</strong>获取实体类信息作为数据库表信息。</p>
<p>在入门案例中 <code>1.1.2</code> 定义 <code>Mapper</code> 时，我们需要特别指定泛型类即 <code>&lt;User&gt;</code>。泛型中的 <code>User</code> 就是与数据库对应的 PO。</p>
<p><code>MyBatis-Plus</code> 就是根据 PO 实体的信息来推断出表的信息，从而生成 <code>SQL</code> 的。默认情况下：</p>
<ul>
<li><code>MyBatis-Plus</code> 会把 PO 实体的类名驼峰转下划线作为表名，如类名为 <code>UserInfo</code>，反射的表名为 <code>user_info</code>；</li>
<li><code>MyBatis-Plus</code> 会把 PO 实体的所有变量名驼峰转下划线作为表的字段名，并根据变量类型推断字段类型；</li>
<li><code>MyBatis-Plus</code> 会把名为 <code>id</code> 的字段作为主键。</li>
</ul>
<p>但很多情况下，默认的实现与实际场景不符，因此 <code>MyBatis-Plus</code> 提供了一些注解便于我们声明表信息。</p>
<h5 id="1-2-1-TableName-注解"><a href="#1-2-1-TableName-注解" class="headerlink" title="1.2.1 @TableName 注解"></a>1.2.1 <code>@TableName</code> 注解</h5><ul>
<li>描述：表名注解，标识实体类对应的表</li>
<li>使用位置：实体类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 标注实体类对应的表名 */</span></span><br><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@TableName</code> 注解除了指定表名以外，还可以指定很多其它属性：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>类型</strong></th>
<th><strong>必须指定</strong></th>
<th><strong>默认值</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>String</td>
<td>否</td>
<td>“”</td>
<td>表名</td>
</tr>
<tr>
<td>schema</td>
<td>String</td>
<td>否</td>
<td>“”</td>
<td>schema</td>
</tr>
<tr>
<td>keepGlobalPrefix</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>是否保持使用全局的 tablePrefix 的值（当全局 tablePrefix 生效时）</td>
</tr>
<tr>
<td>resultMap</td>
<td>String</td>
<td>否</td>
<td>“”</td>
<td>xml 中 resultMap 的 id（用于满足特定类型的实体类对象绑定）</td>
</tr>
<tr>
<td>autoResultMap</td>
<td>boolean</td>
<td>否</td>
<td>false</td>
<td>是否自动构建 resultMap 并使用（如果设置 resultMap 则不会进行 resultMap 的自动构建与注入）</td>
</tr>
<tr>
<td>excludeProperty</td>
<td>String[]</td>
<td>否</td>
<td>{}</td>
<td>需要排除的属性名 @since 3.3.1</td>
</tr>
</tbody></table>
<h5 id="1-2-2-TableId-注解"><a href="#1-2-2-TableId-注解" class="headerlink" title="1.2.2 @TableId 注解"></a>1.2.2 <code>@TableId</code> 注解</h5><ul>
<li>描述：主键注解，标识实体类中的主键字段</li>
<li>使用位置：实体类的主键字段</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value=&quot;id&quot;, type=IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>TableId</code> 注解支持两个属性：</p>
<table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>类型</strong></th>
<th align="left"><strong>必须指定</strong></th>
<th align="left"><strong>默认值</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>value</code></td>
<td align="left"><code>String</code></td>
<td align="left">否</td>
<td align="left">“”</td>
<td align="left">表名</td>
</tr>
<tr>
<td align="left"><code>type</code></td>
<td align="left"><code>Enum</code></td>
<td align="left">否</td>
<td align="left"><code>IdType.NONE</code></td>
<td align="left">指定主键类型</td>
</tr>
</tbody></table>
<p><code>IdType</code>支持的类型有：</p>
<table>
<thead>
<tr>
<th align="left"><strong>值</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>AUTO</code></td>
<td align="left">数据库 <code>ID</code> 自增</td>
</tr>
<tr>
<td align="left"><code>NONE</code></td>
<td align="left">无状态，该类型为未设置主键类型（注解里等于跟随全局，全局里约等于 <code>INPUT</code>）</td>
</tr>
<tr>
<td align="left"><code>INPUT</code></td>
<td align="left"><code>insert</code> 前自行 <code>set</code> 主键值</td>
</tr>
<tr>
<td align="left"><code>ASSIGN_ID</code></td>
<td align="left">分配 <code>ID</code>（主键类型为 <code>Number</code>（<code>Long</code> 和 <code>Integer</code>）或（<code>String</code>）<em>（since 3.3.0）</em>，使用接口<code>IdentifierGenerator</code> 的方法 <code>nextId</code> （默认实现类为 <code>DefaultIdentifierGenerator</code> 雪花算法）</td>
</tr>
<tr>
<td align="left"><code>ASSIGN_UUID</code></td>
<td align="left">分配 <code>UUID</code>，主键类型为 <code>String</code>*(since 3.3.0)*，使用接口 <code>IdentifierGenerator</code> 的方法 <code>nextUUID</code>（默认 <code>default</code> 方法）</td>
</tr>
<tr>
<td align="left"><code>ID_WORKER</code></td>
<td align="left">分布式全局唯一 ID 长整型类型(please use ASSIGN_ID)</td>
</tr>
<tr>
<td align="left"><code>UUID</code></td>
<td align="left"><code>32</code> 位 <code>UUID</code> 字符串（please use ASSIGN_UUID）</td>
</tr>
<tr>
<td align="left"><code>ID_WORKER_STR</code></td>
<td align="left">分布式全局唯一 ID 字符串类型(please use ASSIGN_ID)</td>
</tr>
</tbody></table>
<p>这里比较常见的有三种：</p>
<ul>
<li><code>AUTO</code>：利用数据库的 <code>id</code> 自增长</li>
<li><code>INPUT</code>：手动生成 <code>id</code></li>
<li><code>ASSIGN_ID</code>：雪花算法生成 <code>Long</code> 类型的全局唯一 <code>id</code>，这是默认的ID策略</li>
</ul>
<h5 id="1-2-3-TableField-注解"><a href="#1-2-3-TableField-注解" class="headerlink" title="1.2.3 @TableField 注解"></a>1.2.3 <code>@TableField</code> 注解</h5><ul>
<li><p>描述：普通字段注解</p>
</li>
<li><p>示例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value=&quot;u_id&quot;, type=IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span>		<span class="comment">// 成员变量名与数据库字段名不一致</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TableField(&quot;isMarried&quot;)</span>	<span class="comment">// 成员变量是以 `isXXX` 命名</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isMarried;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TableField(&quot;`concat`&quot;)</span>		<span class="comment">// 成员变量名与数据库一致, 但是与数据库的关键字冲突</span></span><br><span class="line">    <span class="keyword">private</span> String concat;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span>	<span class="comment">// 成员变量不是数据库字段</span></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一般情况下我们并不需要给字段添加 <code>@TableField</code> 注解，一些特殊情况除外：</p>
<ul>
<li>成员变量名与数据库字段名不一致；</li>
<li>成员变量是以 <code>isXXX</code> 命名，按照<code>JavaBean</code>的规范，<code>MyBatis-Plus</code>识别字段时会把 <code>is</code> 去除，这就导致与数据库不符；</li>
<li>成员变量名与数据库一致，但是与数据库的关键字冲突。使用 <code>@TableField</code> 注解给字段名添加转义字符：<code>``</code>；</li>
<li>成员变量不是数据库字段，添加 <code>exist = false</code></li>
</ul>
<p>支持的其它属性如下：</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>类型</strong></th>
<th><strong>必填</strong></th>
<th><strong>默认值</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>value</code></td>
<td><code>String</code></td>
<td>否</td>
<td>“”</td>
<td>数据库字段名</td>
</tr>
<tr>
<td><code>exist</code></td>
<td><code>boolean</code></td>
<td>否</td>
<td><code>true</code></td>
<td>是否为数据库表字段</td>
</tr>
<tr>
<td><code>condition</code></td>
<td><code>String</code></td>
<td>否</td>
<td>“”</td>
<td>字段 where 实体查询比较条件，有值设置则按设置的值为准，没有则为默认全局的 <code>%s=#&#123;%s&#125;</code>，<a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java">参考(opens new window)</a></td>
</tr>
<tr>
<td><code>update</code></td>
<td><code>String</code></td>
<td>否</td>
<td>“”</td>
<td>字段 update set 部分注入，例如：当在version字段上注解<code>update=&quot;%s+1&quot;</code> 表示更新时会 set version&#x3D;version+1 （该属性优先级高于 el 属性）</td>
</tr>
<tr>
<td><code>insertStrategy</code></td>
<td><code>Enum</code></td>
<td>否</td>
<td><code>FieldStrategy.DEFAULT</code></td>
<td>举例：<code>NOT_NULL insert into table_a(&lt;if test=&quot;columnProperty != null&quot;&gt;column&lt;/if&gt;) values (&lt;if test=&quot;columnProperty != null&quot;&gt;#&#123;columnProperty&#125;&lt;/if&gt;)</code></td>
</tr>
<tr>
<td><code>updateStrategy</code></td>
<td><code>Enum</code></td>
<td>否</td>
<td><code>FieldStrategy.DEFAULT</code></td>
<td>举例：IGNORED update table_a set column&#x3D;#{columnProperty}</td>
</tr>
<tr>
<td><code>whereStrategy</code></td>
<td><code>Enum</code></td>
<td>否</td>
<td><code>FieldStrategy.DEFAULT</code></td>
<td>举例：<code>NOT_EMPTY where &lt;if test=&quot;columnProperty != null and columnProperty!=&#39;&#39;&quot;&gt;column=#&#123;columnProperty&#125;&lt;/if&gt;</code></td>
</tr>
<tr>
<td><code>fill</code></td>
<td><code>Enum</code></td>
<td>否</td>
<td><code>FieldFill.DEFAULT</code></td>
<td>字段自动填充策略</td>
</tr>
<tr>
<td><code>select</code></td>
<td><code>boolean</code></td>
<td>否</td>
<td><code>true</code></td>
<td>是否进行 <code>SELECT</code> 查询</td>
</tr>
<tr>
<td><code>keepGlobalFormat</code></td>
<td><code>boolean</code></td>
<td>否</td>
<td><code>false</code></td>
<td>是否保持使用全局的 format 进行处理</td>
</tr>
<tr>
<td><code>jdbcType</code></td>
<td><code>JdbcType</code></td>
<td>否</td>
<td><code>JdbcType.UNDEFINED</code></td>
<td>JDBC 类型 (该默认值不代表会按照该值生效)</td>
</tr>
<tr>
<td><code>typeHandler</code></td>
<td><code>TypeHander</code></td>
<td>否</td>
<td></td>
<td>类型处理器 (该默认值不代表会按照该值生效)</td>
</tr>
<tr>
<td><code>numericScale</code></td>
<td><code>String</code></td>
<td>否</td>
<td>“”</td>
<td>指定小数点后保留的位数</td>
</tr>
</tbody></table>
<h4 id="1-3-常见配置"><a href="#1-3-常见配置" class="headerlink" title="1.3 常见配置"></a>1.3 常见配置</h4><p><code>MyBatis-Plus</code> 也支持基于 <code>yaml</code> 文件的自定义配置，详见官方文档：</p>
<p><a target="_blank" rel="noopener" href="https://www.baomidou.com/pages/56bac0/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">MyBatis-Plus 官方文档</a></p>
<p>大多数的配置都有默认值，因此我们都无需配置。但还有一些是没有默认值的，例如:</p>
<ul>
<li>实体类的别名扫描包</li>
<li>全局id类型</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">	<span class="attr">type-aliases-package:</span> <span class="string">com.itheima.mp.domain.po</span>		<span class="comment"># 别名扫描包</span></span><br><span class="line">	<span class="attr">mapper-locations:</span> <span class="string">&quot;classpath*:/mapper/**/*.xml&quot;</span> 	<span class="comment"># Mapper.xml文件地址，当前这个是默认值。</span></span><br><span class="line">	<span class="attr">configuration:</span></span><br><span class="line">  		<span class="attr">mapper-underscore-to-camel-case:</span> <span class="literal">true</span>			<span class="comment"># 是否开启下划线驼峰映射</span></span><br><span class="line">		<span class="attr">cache-enabled:</span> <span class="literal">false</span>							<span class="comment"># 是否开启二级缓存</span></span><br><span class="line">	<span class="attr">global-config:</span></span><br><span class="line">		<span class="attr">db-config:</span></span><br><span class="line">		<span class="attr">id-type:</span> <span class="string">auto</span> 									<span class="comment"># 全局 id 类型为自增长, 可以更换为其他方法, 如 assign_id</span></span><br><span class="line">		<span class="attr">update-strategy:</span> <span class="string">not_null</span>						<span class="comment"># 更新策略: 只更新非空字段</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，<code>MyBatis-Plus</code>也支持手写 <code>SQL</code> 的，而 <code>mapper</code> 文件的读取地址可以通过 <code>mapper-locations</code> 配置：默认值是<code>classpath*:/mapper/**/*.xml</code>，也就是说我们只要把 <code>mapper.xml</code> 文件放置这个目录下就一定会被加载。</p>
<h3 id="🥑-2-核心功能"><a href="#🥑-2-核心功能" class="headerlink" title="🥑 2. 核心功能"></a>🥑 2. 核心功能</h3><p>入门案例中都是以 <code>id</code> 为条件的简单CRUD，一些复杂条件的 <code>SQL</code> 语句就要用到一些更高级的功能了。</p>
<h4 id="2-1-条件构造器"><a href="#2-1-条件构造器" class="headerlink" title="2.1 条件构造器"></a>2.1 条件构造器</h4><p>除了新增以外，修改、删除、查询的 <code>SQL</code> 语句都需要指定 <code>WHERE</code> 条件。因此 <code>BaseMapper</code> 中提供的相关方法除了以 <code>id</code> 作为 <code>WHERE</code> 条件以外，还支持更加复杂的 <code>WHERE</code>条件。</p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=YWQ1ZTMzMTg4ZTRiNzFkYzFiNzc2YmU0N2I4OGJiZWFfS1F3dFZqVDU1TzVNSnB1VmJWS0MxNjVCVU1qYklzVGdfVG9rZW46QXlTUGJCVVVTb25wa3p4Y0x6SGNLTlhwblVjXzE3MjIzOTQwODg6MTcyMjM5NzY4OF9WNA" alt="img"></p>
<p>参数中的 <code>Wrapper</code> 就是<strong>条件构造</strong>的抽象类，其下有很多默认实现，继承关系如图：</p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2EwYmQzMWFjZTEzMmNkOTI4MDIyYzM1ZjExOWZlYTRfMW5nN1UxV3NrMHQxWHhWOHlPYWRZNmtJdGFTbmpBeVJfVG9rZW46WjFUU2JGUk1ubzZWaWp4Q1BDbmN6MmdEbjNlXzE3MjIzOTQwODg6MTcyMjM5NzY4OF9WNA" alt="img"></p>
<p><code>Wrapper</code> 的子类 <code>AbstractWrapper</code> 提供了 <code>WHERE</code> 中包含的所有条件构造方法：</p>
<img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWRhOWZiYzNkODcyZjllYTk2Y2VmMmQyM2Q0ZmQzYTdfWkFMRXJSNmZyQ1dQQk1yY2h1Ujd3OHJpTHBNT2ZLUllfVG9rZW46RXlZeWJzZnBBb0FaVnF4V2p5YmNXSzNlbmFmXzE3MjIzOTQwODg6MTcyMjM5NzY4OF9WNA" alt="img" style="zoom: 67%;" />

<p>而 <code>QueryWrapper</code> 在 <code>AbstractWrapper</code> 的基础上拓展了一个 <code>SELETE</code> 方法，<strong>允许指定查询字段：</strong></p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=YjU1MzEzNDYyMjE2MjIwNGUyZDk0NGNlNzJjNDU1NzRfdGxxZHV1c3hXQkxvcExwWW82MUhNTzBtSm14NHRsWFdfVG9rZW46RVVzUmJwaERQbzJNNTN4WjBrSGNCMWhFbmpoXzE3MjIzOTQwODg6MTcyMjM5NzY4OF9WNA" alt="img"></p>
<p>而 <code>UpdateWrapper</code> 在 <code>AbstractWrapper</code> 的基础上拓展了一个 <code>SET</code> 方法，<strong>允许指定 <code>SQL</code> 中的 <code>SET</code> 部分：</strong></p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI5OGUyOWU5ZWE4M2M1MWIwYjQ5MWZkOWQ0MDBkMWNfVk5xamtvSmNmV0VEUnFhcU9jSUU4a0s0SDhITkNDZ0ZfVG9rZW46TDZVRWJEZ1V5b0R4blZ4UW92SWNpYmEzbmRiXzE3MjIzOTQwODg6MTcyMjM5NzY4OF9WNA" alt="img"></p>
<p>接下来，我们就来看看如何利用 <code>Wrapper</code> 实现复杂查询。</p>
<h5 id="2-1-1-QueryWrapper"><a href="#2-1-1-QueryWrapper" class="headerlink" title="2.1.1 QueryWrapper"></a>2.1.1 QueryWrapper</h5><p>无论是修改、删除、查询，都可以使用QueryWrapper来构建查询条件。</p>
<p>当前表的结构如下：</p>
<table>
<thead>
<tr>
<th>#</th>
<th>名称</th>
<th>数据类型</th>
<th>注释</th>
<th>长度&#x2F;集合</th>
<th>默认</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>id</code></td>
<td><code>BIGINT</code></td>
<td>用户ID</td>
<td>19</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>2</td>
<td><code>username</code></td>
<td><code>VARCHAR</code></td>
<td>用户名</td>
<td>50</td>
<td>无默认值</td>
</tr>
<tr>
<td>3</td>
<td><code>password</code></td>
<td><code>VARCHAR</code></td>
<td>密码</td>
<td>128</td>
<td>无默认值</td>
</tr>
<tr>
<td>4</td>
<td><code>phone</code></td>
<td><code>VARCHAR</code></td>
<td>注册手机号</td>
<td>20</td>
<td>NULL</td>
</tr>
<tr>
<td>5</td>
<td><code>info</code></td>
<td><code>JSON</code></td>
<td>详细信息</td>
<td></td>
<td>无默认值</td>
</tr>
<tr>
<td>6</td>
<td><code>status</code></td>
<td><code>INT</code></td>
<td>使用状态(1: 正常 2: 冻结)</td>
<td>10</td>
<td>“1”</td>
</tr>
<tr>
<td>7</td>
<td><code>balance</code></td>
<td><code>INT</code></td>
<td>账户余额</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td><code>create_time</code></td>
<td><code>DATETIME</code></td>
<td>创建时间</td>
<td></td>
<td>CURRENT_TIMESTAMP</td>
</tr>
<tr>
<td>9</td>
<td><code>update_time</code></td>
<td><code>DATETIME</code></td>
<td>更新时间</td>
<td></td>
<td>CURRENT_TIMESTAMP</td>
</tr>
</tbody></table>
<p>接下来看一些例子： </p>
<p><strong>查询</strong>：查询出名字中带<code>o</code>的，存款大于等于1000元的人。代码如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id,username,info,balance</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">LIKE</span> &quot;%o%&quot; <span class="keyword">AND</span> Balance <span class="operator">&gt;=</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 构建查询条件 WHERE name LIKE &quot;%o%&quot; AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;info&quot;</span>, <span class="string">&quot;balance&quot;</span>)</span><br><span class="line">            .like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;balance&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2. 查询数据</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>更新</strong>：更新用户名为 <code>Jack</code> 的用户的余额为 <code>2000</code>，代码如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span></span><br><span class="line">	<span class="keyword">SET</span> balance<span class="operator">=</span><span class="number">2000</span></span><br><span class="line">	<span class="keyword">WHERE</span> (username<span class="operator">=</span>&quot;Jack&quot;)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateByQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.构建查询条件 WHERE name=&quot;Jack&quot;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().eq(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.更新数据, user 中非 NULL 字段都会作为 SET 语句</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setBalance(<span class="number">2000</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-1-2-UpdateWrapper"><a href="#2-1-2-UpdateWrapper" class="headerlink" title="2.1.2 UpdateWrapper"></a>2.1.2 UpdateWrapper</h5><p>基于 <code>BaseMapper</code> 中的 <code>UPDATE</code> 方法更新时只能直接赋值，对于一些复杂的需求就难以实现。 </p>
<p>例如：更新 <code>id</code> 为 <code>1</code>、<code>2</code>、<code>4</code> 的用户的余额，扣 <code>200</code>，对应的SQL应该是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user <span class="type">SET</span> <span class="variable">balance</span> <span class="operator">=</span> balance - <span class="number">200</span> WHERE id <span class="title function_">in</span> <span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)</span></span><br></pre></td></tr></table></figure>

<p><code>SET</code> 的赋值结果是基于字段现有值的，这个时候就要利用 <code>UpdateWrapper</code> 中的 <code>setSql</code> 功能了：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    <span class="comment">// 1.生成SQL</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;User&gt;()</span><br><span class="line">            .setSql(<span class="string">&quot;balance = balance - 200&quot;</span>) 	<span class="comment">// SET balance = balance - 200</span></span><br><span class="line">            .in(<span class="string">&quot;id&quot;</span>, ids); 					<span class="comment">// WHERE id in (1, 2, 4)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.更新, 注意第一个参数可以给null, 也就是不填更新字段和数据，</span></span><br><span class="line">    <span class="comment">// 而是基于 UpdateWrapper 中的 setSQL 来更新</span></span><br><span class="line">    userMapper.update(<span class="literal">null</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-1-3-LambdaQueryWrapper"><a href="#2-1-3-LambdaQueryWrapper" class="headerlink" title="2.1.3 LambdaQueryWrapper"></a>2.1.3 LambdaQueryWrapper</h5><p>无论是 <code>QueryWrapper</code> 还是 <code>UpdateWrapper</code> 在构造条件的时候都需要写死字段名称，会出现字符串<code>魔法值</code>。这在编程规范中显然是不推荐的。 那怎么样才能不写字段名，又能知道字段名呢？</p>
<p>其中一种办法是基于变量的 <code>getter</code> 方法结合反射技术。因此我们只要将条件对应的字段的 <code>getter</code> 方法传递给 <code>MyBatis-Plus</code>，它就能计算出对应的变量名了。而传递方法可以使用 <code>JDK8</code> 中的 <code>方法引用</code> 和 <code>Lambda</code> 表达式。 因此 <code>MyBatis-Plus</code> 又提供了一套基于<code>Lambda</code> 的 <code>Wrapper</code>，包含两个：</p>
<ul>
<li><code>LambdaQueryWrapper</code></li>
<li><code>LambdaUpdateWrapper</code></li>
</ul>
<p>分别对应 <code>QueryWrapper</code> 和 <code>UpdateWrapper</code></p>
<p>其使用方式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testLambdaQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.构建条件 WHERE username LIKE &quot;%o%&quot; AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.lambda()</span><br><span class="line">            .select(User::getId, User::getUsername, User::getInfo, User::getBalance)</span><br><span class="line">            .like(User::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(User::getBalance, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.查询</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-自定义-SQL"><a href="#2-2-自定义-SQL" class="headerlink" title="2.2 自定义 SQL"></a>2.2 自定义 SQL</h4><p>一般企业的开发规范中，是不允许开发人员将 <code>SQL</code> 脱离出 <code>Mapper</code> 层或者 <code>mapper.xml</code> 文件的，但是我们想要使用 <code>MyBatis-Plus</code> 又想要遵守企业的开发规范，应该如何做呢？</p>
<p>我们可以利用 <code>MyBatis-Plus</code> 的 <code>Wrapper</code> 来构建复杂的 <code>WHERE</code> 条件，然后自己定义 <code>SQL</code> 语句中剩下的部分。</p>
<p>① 基于 <code>Wrapper</code> 构造 <code>WHERE</code> 条件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">amount</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 构造条件</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;().in(User::getId, ids);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 自定义SQL方法调用</span></span><br><span class="line">userMapper.updateBalanceByIds(wrapper, amount);</span><br></pre></td></tr></table></figure>

<p>② 在 <code>mapper</code> 方法参数中用 <code>@Param</code> 注解声明 <code>Wrapper</code> 变量名称，这个名称必须是 <code>ew</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">updateBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> LambdaQueryWrapper&lt;User&gt; wrapper, <span class="meta">@Param(&quot;amount&quot;)</span> <span class="type">int</span> amount)</span>;</span><br></pre></td></tr></table></figure>

<p>③ 自定义 <code>SQL</code>，并使用 <code>Wrapper</code> 条件，这里 <code>ew.customSqlSegment</code> 是 <code>Wrapper</code> 的一个方法，用于获取用户自定义SQL片段。如果使用出现问题，参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/xxNGchi/article/details/120681606">MyBatis-Plus ${ew.customSqlSegment} 使用的史诗级大坑-CSDN博客</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBalanceByIds&quot;</span>&gt;</span></span><br><span class="line">    UPDATE t_user SET balance = balance - #&#123;amount&#125; $&#123;ew.customSqlSegment&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-Service-接口"><a href="#2-3-Service-接口" class="headerlink" title="2.3 Service 接口"></a>2.3 <code>Service</code> 接口</h4><p><code>MyBatis-Plus</code> 不仅提供了 <code>BaseMapper</code>，还提供了通用的 <code>Service</code> 接口及默认实现，封装了一些常用的 <code>service</code> 模板方法。 通用接口为 <code>IService</code>，默认实现为 <code>ServiceImpl</code>，其中封装的方法可以分为以下几类：</p>
<ul>
<li><code>save</code>：新增</li>
<li><code>remove</code>：删除</li>
<li><code>update</code>：更新</li>
<li><code>get</code>：查询单个结果</li>
<li><code>list</code>：查询集合结果</li>
<li><code>count</code>：计数</li>
<li><code>page</code>：分页查询</li>
</ul>
<p><img src="/./MyBatisPlus/IServiceInterface.png" alt="IServiceInterface"></p>
<h5 id="2-3-1-CRUD"><a href="#2-3-1-CRUD" class="headerlink" title="2.3.1 CRUD"></a>2.3.1 CRUD</h5><p>首先了解基本的CRUD接口。</p>
<p><strong>新增</strong>：</p>
<img src="./MyBatisPlus/IServiceSave.png" alt="" style="zoom: 50%;" />

<ul>
<li><code>save</code> 是新增单个元素</li>
<li><code>saveBatch</code> 是批量新增</li>
<li><code>saveOrUpdate</code> 是根据id判断，如果数据存在就更新，不存在则新增</li>
<li><code>saveOrUpdateBatch</code> 是批量的新增或修改</li>
</ul>
<p><strong>删除：</strong></p>
<img src="./MyBatisPlus/IServiceRemove.png" alt="IServiceRemove" style="zoom: 80%;" />

<ul>
<li><code>removeById</code>：根据id删除</li>
<li><code>removeByIds</code>：根据id批量删除</li>
<li><code>removeByMap</code>：根据Map中的键值对为条件删除</li>
<li><code>remove(Wrapper&lt;T&gt;)</code>：根据Wrapper条件删除</li>
<li><code>~~removeBatchByIds~~</code>：暂不支持</li>
</ul>
<p><strong>修改：</strong></p>
<p><img src="/./MyBatisPlus/IServiceUpdate.png" alt="IServiceUpdate"></p>
<ul>
<li><code>updateById</code>：根据id修改</li>
<li><code>update(Wrapper&lt;T&gt;)</code>：根据<code>UpdateWrapper</code>修改，<code>Wrapper</code>中包含<code>set</code>和<code>where</code>部分</li>
<li><code>update(T，Wrapper&lt;T&gt;)</code>：按照<code>T</code>内的数据修改与<code>Wrapper</code>匹配到的数据</li>
<li><code>updateBatchById</code>：根据id批量修改</li>
</ul>
<p><strong>Get：</strong></p>
<p><img src="/./MyBatisPlus/IServiceGet.png" alt="IServiceGet"></p>
<ul>
<li><code>getById</code>：根据 <code>id</code> 查询 <code>1</code> 条数据</li>
<li><code>getOne(Wrapper&lt;T&gt;)</code>：根据<code>Wrapper</code> 查询 <code>1</code> 条数据</li>
<li><code>getBaseMapper</code>：获取<code>Service</code> 内的 <code>BaseMapper</code> 实现，某些时候需要直接调用 <code>Mapper</code> 内的自定义 <code>SQL</code> 时可以用这个方法获取到 <code>Mapper</code></li>
</ul>
<p><strong>List：</strong></p>
<p><img src="/./MyBatisPlus/IServiceList.png" alt="IServiceList"></p>
<ul>
<li><code>listByIds</code>：根据id批量查询</li>
<li><code>list(Wrapper&lt;T&gt;)</code>：根据Wrapper条件查询多条数据</li>
<li><code>list()</code>：查询所有</li>
</ul>
<p><strong>Count</strong>：</p>
<p><img src="/./MyBatisPlus/IServiceCount.png" alt="IServiceCount"></p>
<ul>
<li><code>count()</code>：统计所有数量</li>
<li><code>count(Wrapper&lt;T&gt;)</code>：统计符合<code>Wrapper</code>条件的数据数量</li>
</ul>
<p><strong>getBaseMapper</strong>： 当我们在service中要调用Mapper中自定义SQL时，就必须获取service对应的Mapper，就可以通过这个方法：</p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=MGM1NDYyZmU0NjEyZmE1MTY1ZDBhZDM5NTMzNWQ1YjlfQ1pCTVFyWEt6cWV4bjdDSkE0NDFjazRrYWpSeUxTVTdfVG9rZW46TFdqc2JTMVUzb1JCdXh4MWhDMGMxMzdBbmpoXzE3MjI0MTI1ODk6MTcyMjQxNjE4OV9WNA" alt="img"></p>
<h5 id="2-3-2-基本用法"><a href="#2-3-2-基本用法" class="headerlink" title="2.3.2 基本用法"></a>2.3.2 基本用法</h5><p>由于 <code>Service</code> 中经常需要定义与业务有关的自定义方法，因此我们不能直接使用 <code>IService</code>，而是自定义 <code>Service</code> 接口，然后继承 <code>IService</code> 以拓展方法。同时，让自定义的 <code>Service实现类</code> 继承 <code>ServiceImpl</code>，这样就不用自己实现 <code>IService</code> 中的接口了。</p>
<p>具体方法如下：</p>
<p>① 首先，定义 <code>IUserService</code> 类，继承 <code>IService</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// 拓展自定义方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>② 然后，编写 <code>UserServiceImpl</code> 类，继承 <code>ServiceImpl</code>，实现 <code>UserService</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>项目结构如下：</p>
<p><img src="https://b11et3un53m.feishu.cn/space/api/box/stream/download/asynccode/?code=MjZmNzNiNWRlZmQ1MzU1YjYyN2VmYzgzNmNiNTBiOGZfblhsa1NaS1NSbXFpUlByaWNDU1NrcGtmMWIyMXpndVRfVG9rZW46S1BYcGJkM3Y4b2pZVkt4ZHhFUmNmcHpPbnJnXzE3MjI0MDkzNTg6MTcyMjQxMjk1OF9WNA" alt="img"></p>
<p>接下来，我们基于 <code>RESTful</code> 风格快速实现下面几个接口（<a target="_blank" rel="noopener" href="https://blog.csdn.net/SeniorShen/article/details/111591122">什么是<code>RESTful</code>风格</a>）：</p>
<p>简单理解 <code>REST</code> 就是：<code>URL</code> 中只使用名词来定位资源，用 <code>HTTP</code> 协议里的动词（<code>GET</code>、<code>POST</code>、<code>PUT</code>、<code>DELETE</code>）来实现资源的增删改查操作。</p>
<p>什么是 <code>RESTful</code>：</p>
<ul>
<li>使用客户&#x2F;服务器（B&#x2F;S、 C&#x2F;S）模型：客户和服务器之间通过一个统一的接口来互相通讯。</li>
<li>层次化的系统：在一个 <code>REST</code> 系统中，客户端并不会固定地与一个服务器打交道。</li>
<li>无状态：在一个 <code>REST</code> 系统中，服务端并不会保存有关客户的任何状态。也就是说，客户端自身负责用户状态的维持，并在每次发送请求时都需要提供足够的信息。</li>
<li>可缓存：<code>REST</code> 系统需要能够恰当地缓存请求，以尽量减少服务端和客户端之间的信息传输，以提高性能。</li>
<li>统一的接口。一个 <code>REST</code> 系统需要使用一个统一的接口来完成子系统之间以及服务与用户之间的交互。这使得 <code>REST</code> 系统中的各个子系统可以独自完成演化。</li>
</ul>
<p>如果一个系统满足了上面所列出的五条约束，那么该系统就被称为是 <code>RESTful</code> 的。</p>
<table>
<thead>
<tr>
<th align="left"><strong>编号</strong></th>
<th align="left"><strong>接口</strong></th>
<th align="left"><strong>请求方式</strong></th>
<th align="left"><strong>请求路径</strong></th>
<th align="left"><strong>请求参数</strong></th>
<th align="left"><strong>返回值</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">新增用户</td>
<td align="left">POST</td>
<td align="left">&#x2F;users</td>
<td align="left">用户表单实体</td>
<td align="left">无</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">删除用户</td>
<td align="left">DELETE</td>
<td align="left">&#x2F;users&#x2F;{id}</td>
<td align="left">用户 <code>id</code></td>
<td align="left">无</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">根据 <code>id</code> 查询用户</td>
<td align="left">GET</td>
<td align="left">&#x2F;users&#x2F;{id}</td>
<td align="left">用户 <code>id</code></td>
<td align="left">用户VO</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">根据 <code>id</code> 批量查询</td>
<td align="left">GET</td>
<td align="left">&#x2F;users</td>
<td align="left">用户 <code>id</code> 集合</td>
<td align="left">用户VO集合</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">根据 <code>id</code> 扣除余额</td>
<td align="left">PUT</td>
<td align="left">&#x2F;users&#x2F;{id}&#x2F;deduction&#x2F;{money}</td>
<td align="left">1. 用户 <code>id</code><br />2. 扣除金额</td>
<td align="left">无</td>
</tr>
</tbody></table>
<h3 id="🕸-3-拓展功能"><a href="#🕸-3-拓展功能" class="headerlink" title="🕸 3. 拓展功能"></a>🕸 3. 拓展功能</h3><h3 id="🧩-4-插件功能"><a href="#🧩-4-插件功能" class="headerlink" title="🧩 4. 插件功能"></a>🧩 4. 插件功能</h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-30T14:36:18.000Z" title="2024/7/30 22:36:18">2024-07-30</time>发表</span><span class="level-item"><time dateTime="2024-07-30T14:55:50.823Z" title="2024/7/30 22:55:50">2024-07-30</time>更新</span><span class="level-item">1 分钟读完 (大约222个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/30/SpringCloud/">SpringCloud</a></p><div class="content"><h2 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h2><p>[TOC]</p>
<h3 id="1-微服务"><a href="#1-微服务" class="headerlink" title="1. 微服务"></a>1. 微服务</h3><p><strong>什么是微服务：</strong>微服务是一种软件架构风格，它是以专注于单一职责的很多小型项目为基础，组合出复杂的大型应用。</p>
<p>传统的<strong>单体项目</strong>开发将一个项目的所有模块都集中在这个项目中。而<strong>微服务</strong>可以理解为对一个<strong>单体项目</strong>的拆分，将单体项目的边界打破，并且将一个庞大的项目拆分成一个一个小项目。</p>
<p>当然微服务会涉及到一些问题，主要包括下面这些方面：</p>
<ul>
<li>服务拆分</li>
<li>远程调用</li>
<li>服务治理</li>
<li>请求路由</li>
<li>身份认证</li>
<li>配置管理</li>
<li>服务保护</li>
<li>分布式事务</li>
<li>异步通信</li>
<li>消息可靠性</li>
<li>延迟消息</li>
<li>分布式搜索</li>
<li>倒排索引</li>
<li>数据聚合</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-29T07:32:17.000Z" title="2024/7/29 15:32:17">2024-07-29</time>发表</span><span class="level-item"><time dateTime="2024-08-06T02:56:04.097Z" title="2024/8/6 10:56:04">2024-08-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/CppDev/">CppDev</a><span> / </span><a class="link-muted" href="/categories/CppDev/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/">多线程编程</a></span><span class="level-item">2 小时读完 (大约14429个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/29/Cpp-Muti-Threaded/">Cpp_Muti_Threaded</a></p><div class="content"><h2 id="🔱-C-多线程编程"><a href="#🔱-C-多线程编程" class="headerlink" title="🔱 C++ 多线程编程"></a>🔱 C++ 多线程编程</h2><p>[TOC]</p></div><a class="article-more button is-small is-size-7" href="/2024/07/29/Cpp-Muti-Threaded/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-29T07:29:04.000Z" title="2024/7/29 15:29:04">2024-07-29</time>发表</span><span class="level-item"><time dateTime="2024-08-07T14:38:34.610Z" title="2024/8/7 22:38:34">2024-08-07</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/CppDev/">CppDev</a><span> / </span><a class="link-muted" href="/categories/CppDev/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a></span><span class="level-item">几秒读完 (大约0个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/29/Cpp-Network-Programming/">Cpp_Network_Programming</a></p><div class="content"></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-24T02:38:18.000Z" title="2024/7/24 10:38:18">2024-07-24</time>发表</span><span class="level-item"><time dateTime="2024-07-29T01:12:11.311Z" title="2024/7/29 09:12:11">2024-07-29</time>更新</span><span class="level-item">31 分钟读完 (大约4638个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/24/NginxQuickIN/">NginxQuickIN</a></p><div class="content"><h2 id="ENGINE-X-Nginx-快速上手指南"><a href="#ENGINE-X-Nginx-快速上手指南" class="headerlink" title="ENGINE X - Nginx 快速上手指南"></a>ENGINE X - <code>Nginx</code> 快速上手指南</h2><p>[TOC]</p>
<h3 id="🌐-1-Nginx-基本概念"><a href="#🌐-1-Nginx-基本概念" class="headerlink" title="🌐 1. Nginx 基本概念"></a>🌐 1. <code>Nginx</code> 基本概念</h3><p><code>Nginx</code> 是目前最流行的 Web 服务器软件，也是互联网公司和网站的首选。一开始是由一个名为 <code>Igor Sysoev</code> 的俄罗斯程序员开发的，目的是用于解决 <code>C10K</code> 问题，<code>C10K</code> 问题是指服务器同时支持成千上万个并发客户端的问题。这个问题在当时是非常严重的，因为当时的服务器软件都是单线程的，所以在高并发的情况下，服务器的性能会变得非常的差。</p>
<p><code>Nginx</code> 的出现很好的解决了这个问题，在 <code>Nginx</code> 官方的测试结果中，<code>Nginx</code> 可以支持 <code>50000</code> 个并发连接，在后来的发展中，<code>Nginx</code> 也逐渐成为了最流行的 Web 服务器软件。</p>
<p><code>Nginx</code> 具有 <strong><code>epoll</code> I&#x2F;O多路复用</strong>、<strong>高并发</strong>、<strong>高性能</strong>、<strong>低内存消耗</strong>、<strong>热部署</strong>等优势。</p>
<h3 id="🌐-2-Nginx-安装配置"><a href="#🌐-2-Nginx-安装配置" class="headerlink" title="🌐 2. Nginx 安装配置"></a>🌐 2. <code>Nginx</code> 安装配置</h3><h4 id="2-1-通过包管理工具安装-Nginx"><a href="#2-1-通过包管理工具安装-Nginx" class="headerlink" title="2.1 通过包管理工具安装 Nginx"></a>2.1 通过包管理工具安装 <code>Nginx</code></h4><p>① 在 Linux  环境下：</p>
<p>执行 <code>sudo apt update</code> 更新 <code>apt</code> 包，并执行 <code>sudo apt install nginx </code> 安装 <code>Nginx</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ sudo apt update</span><br><span class="line">[sudo] password <span class="keyword">for</span> nilera: </span><br><span class="line">Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]                                                                                                                  </span><br><span class="line">Hit:3 https://packages.microsoft.com/repos/edge stable InRelease                                                                                        </span><br><span class="line">Hit:1 https://packages.microsoft.com/repos/code stable InRelease                                                                                        </span><br><span class="line">Hit:4 https://ppa.launchpadcontent.net/christian-boxdoerfer/fsearch-stable/ubuntu jammy InRelease</span><br><span class="line">Hit:5 https://ppa.launchpadcontent.net/git-core/ppa/ubuntu jammy InRelease                     </span><br><span class="line">Hit:6 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy InRelease                               </span><br><span class="line">Hit:7 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates InRelease</span><br><span class="line">Hit:8 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-backports InRelease</span><br><span class="line">Fetched 129 kB <span class="keyword">in</span> 4s (29.4 kB/s)</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">271 packages can be upgraded. Run <span class="string">&#x27;apt list --upgradable&#x27;</span> to see them.</span><br><span class="line"></span><br><span class="line">nilera@nilera-virtual-machine:~$ sudo apt install nginx </span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libnginx-mod-stream-geoip2 nginx-common nginx-core</span><br><span class="line">Suggested packages:</span><br><span class="line">  fcgiwrap nginx-doc</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libnginx-mod-stream-geoip2 nginx nginx-common nginx-core</span><br><span class="line">0 upgraded, 9 newly installed, 0 to remove and 271 not upgraded.</span><br><span class="line">Need to get 697 kB of archives.</span><br><span class="line">After this operation, 2,395 kB of additional disk space will be used.</span><br><span class="line">Do you want to <span class="built_in">continue</span>? [Y/n] Y</span><br><span class="line">Get:1 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 nginx-common all 1.18.0-6ubuntu14.4 [40.0 kB]</span><br><span class="line">Get:2 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-http-geoip2 amd64 1.18.0-6ubuntu14.4 [11.9 kB]</span><br><span class="line">Get:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-http-image-filter amd64 1.18.0-6ubuntu14.4 [15.4 kB]</span><br><span class="line">Get:4 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-http-xslt-filter amd64 1.18.0-6ubuntu14.4 [13.7 kB]</span><br><span class="line">Get:5 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-mail amd64 1.18.0-6ubuntu14.4 [45.7 kB]</span><br><span class="line">Get:6 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-stream amd64 1.18.0-6ubuntu14.4 [72.9 kB]</span><br><span class="line">Get:7 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 libnginx-mod-stream-geoip2 amd64 1.18.0-6ubuntu14.4 [10.1 kB]</span><br><span class="line">Get:8 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 nginx-core amd64 1.18.0-6ubuntu14.4 [484 kB]</span><br><span class="line">Get:9 http://mirrors.tuna.tsinghua.edu.cn/ubuntu jammy-updates/main amd64 nginx amd64 1.18.0-6ubuntu14.4 [3,872 B]</span><br><span class="line">Fetched 697 kB <span class="keyword">in</span> 5s (128 kB/s)  </span><br><span class="line"></span><br><span class="line">debconf: unable to initialize frontend: Dialog</span><br><span class="line">debconf: (Dialog frontend requires a screen at least 13 lines tall and 31 columns wide.)</span><br><span class="line">debconf: falling back to frontend: Readline</span><br><span class="line">Preconfiguring packages ...</span><br><span class="line">Selecting previously unselected package nginx-common.</span><br><span class="line">(Reading database ... 229379 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../0-nginx-common_1.18.0-6ubuntu14.4_all.deb ...</span><br><span class="line">Unpacking nginx-common (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-http-geoip2.</span><br><span class="line">Preparing to unpack .../1-libnginx-mod-http-geoip2_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-http-geoip2 (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-http-image-filter.</span><br><span class="line">Preparing to unpack .../2-libnginx-mod-http-image-filter_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-http-image-filter (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-http-xslt-filter.</span><br><span class="line">Preparing to unpack .../3-libnginx-mod-http-xslt-filter_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-http-xslt-filter (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-mail.</span><br><span class="line">Preparing to unpack .../4-libnginx-mod-mail_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-mail (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-stream.</span><br><span class="line">Preparing to unpack .../5-libnginx-mod-stream_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-stream (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package libnginx-mod-stream-geoip2.</span><br><span class="line">Preparing to unpack .../6-libnginx-mod-stream-geoip2_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking libnginx-mod-stream-geoip2 (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package nginx-core.</span><br><span class="line">Preparing to unpack .../7-nginx-core_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking nginx-core (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Selecting previously unselected package nginx.</span><br><span class="line">Preparing to unpack .../8-nginx_1.18.0-6ubuntu14.4_amd64.deb ...</span><br><span class="line">Unpacking nginx (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up nginx-common (1.18.0-6ubuntu14.4) ...</span><br><span class="line">debconf: unable to initialize frontend: Dialog</span><br><span class="line">debconf: (Dialog frontend requires a screen at least 13 lines tall and 31 columns wide.)</span><br><span class="line">debconf: falling back to frontend: Readline</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /lib/systemd/system/nginx.service.</span><br><span class="line">Setting up libnginx-mod-http-xslt-filter (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up libnginx-mod-http-geoip2 (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up libnginx-mod-mail (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up libnginx-mod-http-image-filter (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up libnginx-mod-stream (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up libnginx-mod-stream-geoip2 (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Setting up nginx-core (1.18.0-6ubuntu14.4) ...</span><br><span class="line"> * Upgrading binary nginx                                                                                                                                                            [ OK ] </span><br><span class="line">Setting up nginx (1.18.0-6ubuntu14.4) ...</span><br><span class="line">Processing triggers <span class="keyword">for</span> man-db (2.10.2-1) ...</span><br><span class="line">Processing triggers <span class="keyword">for</span> ufw (0.36.1-4ubuntu0.1) ...</span><br></pre></td></tr></table></figure>

<p>② 在 Mac OS 环境下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure>

<p>③ 在 Windows 环境下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install nginx</span><br></pre></td></tr></table></figure>

<p>或者使用：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install nginx</span><br></pre></td></tr></table></figure>

<h4 id="2-2-通过源码编译的方式安装-Nginx"><a href="#2-2-通过源码编译的方式安装-Nginx" class="headerlink" title="2.2 通过源码编译的方式安装 Nginx"></a>2.2 通过源码编译的方式安装 <code>Nginx</code></h4><p><code>Nginx</code> 是使用 <code>C</code> 语言开发的，因此可以像其他 C 语言的项目一样，下载 <code>Nginx</code> 的源码到自己的服务器上，然后执行预编译、编译和安装的过程。</p>
<p>① 预编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">--sbin-path=/usr/local/nginx/nginx \</span><br><span class="line">--conf-path=/usr/local/nginx/nginx.conf \</span><br><span class="line">--pid-path=/usr/local/nginx/nginx/pid \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-pcre=../pcre2-10.39 \</span><br><span class="line">--with-zlib=../zlib-1.2.11</span><br></pre></td></tr></table></figure>

<p>② 编译</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>

<p>③ 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure>

<h4 id="2-3-使用-Docker-来安装-Nginx"><a href="#2-3-使用-Docker-来安装-Nginx" class="headerlink" title="2.3 使用 Docker 来安装 Nginx"></a>2.3 使用 <code>Docker</code> 来安装 <code>Nginx</code></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>

<h3 id="🌐-3-Nginx-常用命令"><a href="#🌐-3-Nginx-常用命令" class="headerlink" title="🌐 3. Nginx 常用命令"></a>🌐 3. <code>Nginx</code> 常用命令</h3><h4 id="3-1-服务的启动和停止"><a href="#3-1-服务的启动和停止" class="headerlink" title="3.1 服务的启动和停止"></a>3.1 服务的启动和停止</h4><h5 id="3-1-1-服务的启动"><a href="#3-1-1-服务的启动" class="headerlink" title="3.1.1 服务的启动"></a>3.1.1 服务的启动</h5><p>安装完成后，可以直接在命令行输入 <code>nginx</code> 启动服务，若是没有出现信息则说明启动成功；若是启动失败，则会输出启动失败的原因，此时需要根据错误原因进行排查。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure>

<p>可能会遇到的问题：</p>
<table>
<thead>
<tr>
<th>问题描述</th>
<th>问题原因</th>
<th>解决方案</th>
</tr>
</thead>
<tbody><tr>
<td>运行 <code>nginx</code> 命令出现错误：<br /><code>nginx: [alert] could not open error log file: open() &quot;/var/log/nginx/error.log&quot; failed (13: Permission denied)</code></td>
<td>权限问题导致无法正常启动 <code>Nginx</code>。</td>
<td>使用 <code>sudo nginx</code> 命令提高用户执行的权限。</td>
</tr>
<tr>
<td>运行 <code>sudo nginx</code> 命令出现错误：<br /><code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Unknown error) ... nginx: [emerg] still could not bind()</code></td>
<td>大概率是 <code>80</code> 端口已经被绑定了，或者是之前已经启动了 <code>Nginx</code> 导致端口冲突。可以查看 <code>80</code> 端口的占用情况进行进一步操作。</td>
<td>使用 <code>kill</code> 命令杀死占用端口的程序，然后重新运行 <code>sudo nginx</code> 命令。</td>
</tr>
</tbody></table>
<p>访问 <code>&lt;your ipaddr&gt;:8080</code> 出现以下欢迎界面则表示 <code>Nginx</code> 启动成功。</p>
<img src="./NginxQuickIN/Welcome2Nginx.png" style="zoom: 33%;" >

<h5 id="3-1-2-查看-Nginx-的进程"><a href="#3-1-2-查看-Nginx-的进程" class="headerlink" title="3.1.2 查看 Nginx 的进程"></a>3.1.2 查看 <code>Nginx</code> 的进程</h5><p>使用 <code>ps -ef|grep nginx</code> 可以查看 <code>Nginx</code> 进程。这个其实并不是 <code>Nginx</code> 的命令，而是 <code>Linux</code> 自带的命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ ps -ef|grep nginx</span><br><span class="line">root       14461       1  0 10:43 ?        00:00:00 nginx: master process nginx</span><br><span class="line">www-data   14462   14461  0 10:43 ?        00:00:00 nginx: worker process</span><br><span class="line">www-data   14463   14461  0 10:43 ?        00:00:00 nginx: worker process</span><br><span class="line">www-data   14464   14461  0 10:43 ?        00:00:00 nginx: worker process</span><br><span class="line">www-data   14465   14461  0 10:43 ?        00:00:00 nginx: worker process</span><br><span class="line">nilera     14542   11143  0 10:43 pts/0    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<p>这里可以看到 <code>Nginx</code> 的进程包括 <strong><code>Master</code> 进程</strong> 和 <strong><code>Worker</code> 进程</strong>。</p>
<ul>
<li><strong><code>Master</code> 进程</strong>就是<code>Nginx</code> 的主进程，他主要负责读取和验证配置文件，并管理 <strong><code>Worker</code>进程</strong>，将工作分配给 <strong><code>Worker</code>进程</strong>。</li>
<li><strong><code>Worker</code> 进程</strong>就是<code>Nginx</code> 的工作进程，其主要负责实际的请求，完成具体的工作。</li>
<li><strong><code>Master</code>进程</strong>只有一个，而**<code>Worker</code>进程**可以有很多个，<code>Worker</code> 进程的数量可以通过配置文件来调整。</li>
</ul>
<p>或者我们可以使用 <code>lsof -i:80</code> 来查看 <code>80</code> 端口的占用情况，需要注意：<code>lsof</code> 命令并不适用于所有的 Linux 发行版，有些发行版可能需要安装该命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ sudo lsof -i:80</span><br><span class="line">[sudo] password <span class="keyword">for</span> nilera: </span><br><span class="line">COMMAND   PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME</span><br><span class="line">nginx   14461     root    6u  IPv4 141914      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14461     root    7u  IPv6 141915      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14462 www-data    6u  IPv4 141914      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14462 www-data    7u  IPv6 141915      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14463 www-data    6u  IPv4 141914      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14463 www-data    7u  IPv6 141915      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14464 www-data    6u  IPv4 141914      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14464 www-data    7u  IPv6 141915      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14465 www-data    6u  IPv4 141914      0t0  TCP *:http (LISTEN)</span><br><span class="line">nginx   14465 www-data    7u  IPv6 141915      0t0  TCP *:http (LISTEN)</span><br></pre></td></tr></table></figure>

<h5 id="3-1-3-服务的停止"><a href="#3-1-3-服务的停止" class="headerlink" title="3.1.3 服务的停止"></a>3.1.3 服务的停止</h5><p>我们可以使用 <code>nginx -s &lt;signal&gt;</code> 来控制 <code>Nginx</code> 的停止或重启。<code>&lt;signal&gt;</code> 可以是 <strong><code>quit</code>优雅退出</strong>、**<code>stop</code>立即停止<strong>、</strong><code>reload</code>重载配置文件<strong>、</strong><code>reopen</code>重新打开日志文件**中的一个。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ sudo nginx -s quit</span><br><span class="line">nilera@nilera-virtual-machine:~$ ps -ef|grep nginx</span><br><span class="line">nilera     15527   11143  0 11:16 pts/0    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<h4 id="3-2-查看-Nginx-的版本、路径等信息"><a href="#3-2-查看-Nginx-的版本、路径等信息" class="headerlink" title="3.2 查看 Nginx 的版本、路径等信息"></a>3.2 查看 <code>Nginx</code> 的版本、路径等信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ nginx -V</span><br><span class="line">nginx version: nginx/1.18.0 (Ubuntu)</span><br><span class="line">built with OpenSSL 3.0.2 15 Mar 2022</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --with-cc-opt=<span class="string">&#x27;-g -O2 -ffile-prefix-map=/build/nginx-zctdR4/nginx-1.18.0=. -flto=auto -ffat-lto-objects -flto=auto -ffat-lto-objects -fstack-protector-strong -Wformat -Werror=format-security -fPIC -Wdate-time -D_FORTIFY_SOURCE=2&#x27;</span> --with-ld-opt=<span class="string">&#x27;-Wl,-Bsymbolic-functions -flto=auto -ffat-lto-objects -flto=auto -Wl,-z,relro -Wl,-z,now -fPIC&#x27;</span> --prefix=/usr/share/nginx --conf-path=/etc/nginx/nginx.conf --http-log-path=/var/log/nginx/access.log --error-log-path=/var/log/nginx/error.log --lock-path=/var/lock/nginx.lock --pid-path=/run/nginx.pid --modules-path=/usr/lib/nginx/modules --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --with-compat --with-debug --with-pcre-jit --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module --with-http_v2_module --with-http_dav_module --with-http_slice_module --with-threads --add-dynamic-module=/build/nginx-zctdR4/nginx-1.18.0/debian/modules/http-geoip2 --with-http_addition_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_sub_module</span><br></pre></td></tr></table></figure>

<p>其中 <code>--conf-path</code> 包含了 <code>Nginx</code> 的配置文件的位置。在这里我们可以看到路径为：<code>--conf-path=/etc/nginx/nginx.conf</code>。</p>
<p>或者可以使用 <code>nginx -t</code> 来快速定位到 配置文件的位置。<code>nginx -t</code> 同时也可以用于检测配置文件是否存在问题，如果配置文件出现错误，执行 <code>nginx -t</code> 会提示错误位置和错误信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ sudo nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure>

<p>在<code>Ubuntu 22.04</code> 中，安装的 <code>Nginx</code> 版本为 <code>nginx/1.18.0(Ubuntu)</code>。在该版本中的配置文件和一些最新的版本有一些区别，体现在如下几个方面：</p>
<ul>
<li>主配置文件：<code>/etc/nginx/nginx.conf</code></li>
<li>站点配置文件目录：<code>/etc/nginx/sites-available</code> 和 <code>/etc/nginx/sites-enabled</code></li>
</ul>
<p>在该版本通常将站点配置文件放在 <code>sites-available</code> 目录中，并通过创建符号链接到 <code>sites-enabled</code> 目录来启用它们。例如，可以通过以下命令创建一个简单的站点配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/nginx/sites-available/my_site</span><br></pre></td></tr></table></figure>

<p>在 <code>nginx/1.25.1</code> 版本中，站点的配置文件和主配置文件是在写在一起的。</p>
<h4 id="3-3-Nginx-的配置文件"><a href="#3-3-Nginx-的配置文件" class="headerlink" title="3.3 Nginx 的配置文件"></a>3.3 <code>Nginx</code> 的配置文件</h4><p><code>Nginx</code> 的配置文件可以帮助我们进行 <code>Nginx</code> 的一些设置，如 <code>worker</code> 进程数等。</p>
<p>我们通过以下步骤修改 <code>Nginx</code> 的配置文件。</p>
<p>① 编辑 <code>Nginx</code> 配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>

<p>② 修改相应的配置项</p>
<p><code>Nginx</code> 的配置项包括全局块、<code>events</code> 块、<code>http</code> 块。</p>
<ul>
<li><p>全局块</p>
<p>主要是一些全局配置，比如 <code>Worker</code> 进程数、指定运行服务的用户等。</p>
</li>
<li><p><code>events</code> 块</p>
<p>主要是服务器和客户端之间网络连接的一些配置等，比如指定每个 <code>Worker</code> 进程可以同时接收多少个网络连接、网络I&#x2F;O模型等。</p>
</li>
<li><p><code>http</code> 块</p>
<p><code>http</code> 块是 <code>Nginx</code> 修改最频繁的部分，如虚拟主机、反向代理、负载均衡等，都是在 <code>http</code> 块中进行配置的。</p>
<ul>
<li><p><code>server</code> 块</p>
<p><code>http</code> 块下具有多个 <code>server</code> 块，也叫虚拟主机。</p>
<p>我们可以在文件下面 <code>include servers/*</code>，这样就可以将 <code>servers</code> 目录下所有的配置文件都包含进来，这样就可以将每个虚拟主机都放在一个单独的文件中。从而让主配置文件看起来更加的清晰。</p>
<p>在 <code>1.18.0(Ubuntu)</code> 版本中，可以看到主配置文件中包含 <code>include /etc/nginx/sites-enabled/*;</code>，而在 <code>/etc/nginx/site-enabled</code> 中，可以看到 <code>default</code> 软连接到 <code>/etc/nginx/sites-available/default</code> 中。</p>
<p><code>include</code> 命令还可以包含其他的配置文件，如 <code>mime.types</code>。</p>
</li>
</ul>
</li>
</ul>
<p>下面是 <code>Ubuntu</code> 版本的配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">user www-data;</span><br><span class="line">worker_processes auto;				-- 这里可以用于修改 Work 进程的进程数</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line">include /etc/nginx/modules-enabled/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">        worker_connections 768;</span><br><span class="line">        <span class="comment"># multi_accept on;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment"># Basic Settings</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line"></span><br><span class="line">        sendfile on;</span><br><span class="line">        tcp_nopush on;</span><br><span class="line">        types_hash_max_size 2048;</span><br><span class="line">        <span class="comment"># server_tokens off;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># server_names_hash_bucket_size 64;</span></span><br><span class="line">        <span class="comment"># server_name_in_redirect off;</span></span><br><span class="line"></span><br><span class="line">        include /etc/nginx/mime.types;</span><br><span class="line">        default_type application/octet-stream;</span><br><span class="line"></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment"># SSL Settings</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line"></span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; <span class="comment"># Dropping SSLv3, ref: POODLE</span></span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment"># Logging Settings</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line"></span><br><span class="line">        access_log /var/log/nginx/access.log;</span><br><span class="line">        error_log /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment"># Gzip Settings</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line"></span><br><span class="line">        gzip on;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># gzip_vary on;</span></span><br><span class="line">        <span class="comment"># gzip_proxied any;</span></span><br><span class="line">        <span class="comment"># gzip_comp_level 6;</span></span><br><span class="line">        <span class="comment"># gzip_buffers 16 8k;</span></span><br><span class="line">        <span class="comment"># gzip_http_version 1.1;</span></span><br><span class="line">        <span class="comment"># gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line">        <span class="comment"># Virtual Host Configs</span></span><br><span class="line">        <span class="comment">##</span></span><br><span class="line"></span><br><span class="line">        include /etc/nginx/conf.d/*.conf;</span><br><span class="line">        include /etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#mail &#123;</span></span><br><span class="line"><span class="comment">#       # See sample authentication script at:</span></span><br><span class="line"><span class="comment">#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       # auth_http localhost/auth.php;</span></span><br><span class="line"><span class="comment">#       # pop3_capabilities &quot;TOP&quot; &quot;USER&quot;;</span></span><br><span class="line"><span class="comment">#       # imap_capabilities &quot;IMAP4rev1&quot; &quot;UIDPLUS&quot;;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       server &#123;</span></span><br><span class="line"><span class="comment">#               listen     localhost:110;</span></span><br><span class="line"><span class="comment">#               protocol   pop3;</span></span><br><span class="line"><span class="comment">#               proxy      on;</span></span><br><span class="line"><span class="comment">#       &#125;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#       server &#123;</span></span><br><span class="line"><span class="comment">#               listen     localhost:143;</span></span><br><span class="line"><span class="comment">#               protocol   imap;</span></span><br><span class="line"><span class="comment">#               proxy      on;</span></span><br><span class="line"><span class="comment">#       &#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br></pre></td></tr></table></figure>

<p>③ 使用 <code>nginx -t</code> 命令检查配置文件是否存在问题。</p>
<p>④ 使用 <code>nginx -s reload</code> 修改配置文件后需要重新加载配置文件。</p>
<h3 id="🌐-4-Nginx-常用操作"><a href="#🌐-4-Nginx-常用操作" class="headerlink" title="🌐 4. Nginx 常用操作"></a>🌐 4. <code>Nginx</code> 常用操作</h3><h4 id="4-1-静态站点部署"><a href="#4-1-静态站点部署" class="headerlink" title="4.1 静态站点部署"></a>4.1 静态站点部署</h4><p>我们可以使用 <code>Hexo</code> 来生成一个简单的静态博客网站，并将其部署到 <code>Nginx</code> 中。</p>
<p><code>Hexo</code> 是一个静态博客站点生成工具，是一个基于 <code>Node.js</code> 的博客框架。它可以将 <code>Markdown</code> 格式的文档转化成静态页面，非常适合用于做个人技术博客。</p>
<p>下面先了解以下如何安装和启动 <code>Hexo</code>。</p>
<p>① 前置要求：安装 <code>Node.js</code> 和 <code>Git</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ sudo apt update</span><br><span class="line">nilera@nilera-virtual-machine:~$ sudo apt install -y nodejs npm</span><br><span class="line"></span><br><span class="line">nilera@nilera-virtual-machine:~$ sudo apt install git</span><br></pre></td></tr></table></figure>

<p>② 检测 <code>Node.js</code>、<code>npm</code> 和 <code>Git</code> 的版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ nodejs -v</span><br><span class="line">v12.22.9</span><br><span class="line"></span><br><span class="line">nilera@nilera-virtual-machine:~$ npm -v</span><br><span class="line">8.5.1</span><br><span class="line"></span><br><span class="line">nilera@nilera-virtual-machine:~$ git -v</span><br><span class="line">git version 2.43.0</span><br></pre></td></tr></table></figure>

<p>③ 安装 <code>Hexo</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>④ 安装 <code>Hexo</code> 有可能会出现安装速度过慢的情况，这时我们进行 <code>npm</code> 换源操作。</p>
<ul>
<li>查看源</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ npm config get registry</span><br><span class="line">https://registry.npmjs.org/</span><br></pre></td></tr></table></figure>

<ul>
<li><p>更换淘宝源</p>
<p>这里需要注意，<code>https://registry.npm.taobao.org/</code> 已经于 <em>2022年05月31日</em> 废弃，现在需要更换为新的淘宝镜像源 <code>https://registry.npmmirror.com/</code>。换源的配置会持久化保存到 <code>~/.npmrc</code> 文件中，可以通过手动修改该文件来修改配置。</p>
<p>此外我们可以安装 <code>nrm</code> 包来简化这一操作，<code>nrm</code> 其实就是 <code>NPM Registry Manager</code>，是一个用于管理 <code>NPM</code> 源的简单命令行工具。具体操作可以参考文章：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/564574951"><code>NPM</code> 如何换源 ?</a></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org/</span><br><span class="line">nilera@nilera-virtual-machine:~$ npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>

<ul>
<li>恢复官方源</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure>

<ul>
<li>删除注册表</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ npm config delete registry</span><br></pre></td></tr></table></figure>

<p>⑤ 初始化</p>
<p>执行完 <code>hexo init blog-demo</code> 后，会在执行该目录下生成 <code>blog-demo</code> 目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ hexo init blog-demo</span><br><span class="line">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class="line">INFO  Install dependencies</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure>

<p>⑥ 安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~$ <span class="built_in">cd</span> blog-demo</span><br><span class="line">nilera@nilera-virtual-machine:~$ npm install</span><br></pre></td></tr></table></figure>

<p>⑦ 使用 <code>hexo g</code> 生成网站静态页面</p>
<p>该命令的主要作用是将 <code>Markdown</code> 格式的文章，转化成静态页面，并放到 <code>public</code> 目录中。第一次执行该命令，会生成 <code>public</code> 目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~/blog-demo$ hexo g</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded <span class="keyword">in</span> 1.18 s</span><br><span class="line">INFO  Generated: archives/2024/index.html</span><br><span class="line">INFO  Generated: archives/index.html</span><br><span class="line">INFO  Generated: archives/2024/07/index.html</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.min.css</span><br><span class="line">INFO  Generated: js/script.js</span><br><span class="line">INFO  Generated: css/style.css</span><br><span class="line">INFO  Generated: css/images/banner.jpg</span><br><span class="line">INFO  Generated: 2024/07/28/hello-world/index.html</span><br><span class="line">INFO  Generated: fancybox/jquery.fancybox.min.js</span><br><span class="line">INFO  Generated: js/jquery-3.6.4.min.js</span><br><span class="line">INFO  11 files generated <span class="keyword">in</span> 7.46 s</span><br></pre></td></tr></table></figure>

<p>⑦ 使用 <code>hexo s</code> 或 <code>hexo server</code> 本地运行（启动本地服务器）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~/blog-demo$ hexo server</span><br><span class="line">nilera@nilera-virtual-machine:~/blog-demo$ hexo s</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>

<p>⑧ 实际生产环境中，我们会将页面部署到 <code>Nginx</code> 上，我们只需要将 <code>blog-demo</code> 中的 <code>public</code> 目录复制到 <code>Nginx</code> 用于存放静态页面的目录下即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nilera@nilera-virtual-machine:~/blog-demo$ sudo <span class="built_in">cp</span> -rf public/* /var/www/html/</span><br></pre></td></tr></table></figure>

<p>⑨ 访问 <code>Nginx</code> 页面，即可进行博客网站的访问。</p>
<h4 id="4-2-反向代理"><a href="#4-2-反向代理" class="headerlink" title="4.2 反向代理"></a>4.2 反向代理</h4><p>反向代理是相对于正向代理来说的，简单来说，正向代理就是代理客户端，反向代理就是代理服务端。</p>
<img src="./NginxQuickIN/Proxy.png" style="zoom: 33%;" >

<p>例如，当我们想要访问一个国外的网站（如：Google）时，可能由于网络的原因无法访问到相关内容。这个时候我们就可以使用 <code>VPN</code> 这种代理服务器，让代理服务器作为客户端，代理我们去访问这些网站，再将访问的结果返回给我们。这就是一个典型的<strong>正向代理</strong>的例子，这里的代理服务器代理的是客户端，而且这个过程客户端是知道的，但是对于服务端来说是透明的。</p>
<p>而<strong>反向代理是代理服务端</strong>的，比如当我们准备访问一个网站（如：Google）的时候，他后面可能有着成千上万台服务器，但是对外暴露的只有一个域名，我们也只能通过这个域名来进行访问，然后我们的请求会被转发到后面的服务器上。这种方式隐藏了真实的服务器<code>IP</code>地址、端口等信息。这就是<strong>反向代理</strong>的典型例子，这里的代理服务器代理的是服务端，而且这个过程服务端是知道的，但是对于客户端来说是透明的。</p>
<h4 id="4-3-负载均衡"><a href="#4-3-负载均衡" class="headerlink" title="4.3 负载均衡"></a>4.3 负载均衡</h4><h4 id="4-4-HTTPS-配置"><a href="#4-4-HTTPS-配置" class="headerlink" title="4.4 HTTPS 配置"></a>4.4 <code>HTTPS</code> 配置</h4><p><code>HTTPS</code> 协议是 <code>HTTP</code> 协议的安全版本，它通过对传输的数据进行加密来保证数据的安全性。<code>HTTP</code> 协议的默认端口号是 <code>80</code> ，而 <code>HTTPS</code> 协议的默认端口号是 <code>443</code>。</p>
<p><code>HTTPS</code> 协议需要使用到 <code>SSL</code> 证书，再主流的云平台上都可以免费申请到 <code>SSL</code> 证书。证书申请完成之后，会得到密钥文件和证书文件。如果没有云平台也没有关系，我们可以通过 <code>OpenSSL</code> 命令来生成一个自签名的 <code>SSL</code> 证书，步骤如下：</p>
<p>① 生成私钥文件（<em>Private Key</em>）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out private.key 2048</span><br></pre></td></tr></table></figure>

<p>② 根据私钥生成证书签名请求文件（<em>Certificate Signing Request, CSR</em>）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key private.key -out cert.csr</span><br></pre></td></tr></table></figure>

<p>③ 使用私钥对证书申请进行签名从而生成证书文件（<em>pem</em>）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> cert.csr -out cacert.pem -signkey private.key</span><br></pre></td></tr></table></figure>

<h4 id="4-5-虚拟主机"><a href="#4-5-虚拟主机" class="headerlink" title="4.5 虚拟主机"></a>4.5 虚拟主机</h4></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-07-22T08:18:39.000Z" title="2024/7/22 16:18:39">2024-07-22</time>发表</span><span class="level-item"><time dateTime="2024-09-09T03:42:39.797Z" title="2024/9/9 11:42:39">2024-09-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/">Docker</a></span><span class="level-item">39 分钟读完 (大约5815个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/07/22/DockerQuickIN/">DockerQuickIN</a></p><div class="content"><h2 id="Docker-快速入门"><a href="#Docker-快速入门" class="headerlink" title="Docker 快速入门"></a>Docker 快速入门</h2><p>[TOC]</p>
<p><strong>宝藏视频：</strong><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV14s4y1i7Vf">https://www.bilibili.com/video/BV14s4y1i7Vf</a></p>
<p>如果你遇到过：</p>
<ul>
<li>应用程序的部署和环境配置过于复杂</li>
<li>在开发环境好用，但是到了测试和生产环境都不好用的情况</li>
<li>作为新人加入项目组，需要花费大量的时间来配置开发环境</li>
<li>花费一整天甚至更长时间，一步一步按照配置部署文档来配置环境，但是最终却卡在中间某个步骤上，再也无法前进</li>
</ul>
<p>那么，<code>Docker</code> 可以帮我们完美解决上面这些问题。</p>
<h3 id="🐳-1-Docker-的基本概念"><a href="#🐳-1-Docker-的基本概念" class="headerlink" title="🐳 1. Docker 的基本概念"></a>🐳 1. <code>Docker</code> 的基本概念</h3><h4 id="1-1-Docker-的简介"><a href="#1-1-Docker-的简介" class="headerlink" title="1.1 Docker 的简介"></a>1.1 <code>Docker</code> 的简介</h4><p><code>Docker</code> 是一个用于<strong>构建（Build）</strong>、<strong>运行（Run）</strong>、<strong>传送（Share）</strong>应用程序的平台。</p>
<img src="./DockerQuickIN/Docker.png" style="zoom:50%;" >

<p>有了 <code>Docker</code>，我们就可以将应用程序和运行他所需要的各种依赖包、第三方软件库、配置文件等打包在一起。以便在任何环境中都能正确的运行。<code>Docker</code> 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口，更重要的是容器性能开销极低。</p>
<p><code>Docker</code> 从 <code>17.03</code> 版本之后分为 社区版 <code>CE(Community Edition)</code> 和 企业版 <code>EE(Enterprise Edition)</code>。</p>
<h4 id="1-2-为什么-要使用-Docker"><a href="#1-2-为什么-要使用-Docker" class="headerlink" title="1.2 为什么 要使用 Docker"></a>1.2 为什么 要使用 <code>Docker</code></h4><p>为什么要使用 <code>Docker</code> 呢？</p>
<p>举个简单的例子：我们写了一个网站，用到了现在不叫流行的前后端分离架构，前端使用 <code>Vue</code> 框架来构建网站的界面，后端使用 <code>Java</code> 的 <code>SpringBoot</code> 框架来提供各种服务和接口，并且使用 <code>MySQL</code> 数据库来存储数据。</p>
<img src="./DockerQuickIN/WebWithoutDocker.png" style="zoom:50%;" >

<p>如果没有 <code>Docker</code>，我们的步骤大概是这样的：</p>
<ul>
<li>Step-01：安装 <code>NodeJS</code> 环境。</li>
<li>Step-02：安装各种 <code>npm</code> 依赖。</li>
<li>Step-03：安装 <code>Java</code> 运行时环境。</li>
<li>Step-04：安装各种第三方依赖包。</li>
<li>Step-05：安装 <code>MySQL</code> 数据库。</li>
<li>Step-06：配置各种环境变量、启动脚本。</li>
<li>Step-07：配置 <code>Redis</code>。</li>
<li>Step-08：配置 <code>Nginx</code> 负载均衡。 </li>
<li>Step-09：其他配置项…</li>
</ul>
<p>这仅仅是开发环境所需要进行的操作，当我们需要将我们的网站部署到测试环境或生产环境上，那么这些所有的步骤都需要重新再来一遍。</p>
<p>但是如果我们有了 <code>Docker</code>，我们就可以将他们打包成一个个集装箱，只要我们在开发环境中运行成功了，那么在测试环境中一定也是可以运行成功的。</p>
<img src="./DockerQuickIN/WebWithDocker.png">

<h4 id="1-3-Docker-和-虚拟机的区别"><a href="#1-3-Docker-和-虚拟机的区别" class="headerlink" title="1.3 Docker 和 虚拟机的区别"></a>1.3 <code>Docker</code> 和 虚拟机的区别</h4><p>我们可能了解或使用过一些虚拟机软件，如：<code>VMware</code>、<code>Virtalbox</code>、<code>Parallels Desktop</code>，或者 <code>Window</code> 的 <code>WSL</code>、<code>Microsoft Hyper-V</code> 等功能。</p>
<p>他们都是完整的操作系统，和实际上使用操作系统一样，可以在实际的操作系统中运行应用程序，这是通过一种叫做<strong>虚拟化（Hypervisor）</strong>的技术实现的。虚拟化技术是一种将物理资源虚拟为多个逻辑资源的技术，他可以将一台物理服务器虚拟成多个逻辑服务器，每个逻辑服务器都有自己的操作系统、CPU、内存、硬盘和网络接口等。不同的逻辑服务器之间是完全隔离的，可以独立运行。</p>
<p>虚拟机在一定程度上实现了资源的整合，可以将要一台服务器的计算能力、存储能力、网络资源分配给多个逻辑服务器。实现多台服务器的功能。但是其缺点也同样明显，每台虚拟机需要占用大量的资源，比如CPU、内存、硬盘、网络等，而且启动速度非常慢。但是其实我们的每台服务器上只需要运行一个主要对外提供服务的应用程序就可以了。并不需要一个完整的操作系统所提供的所有功能。</p>
<img src="./DockerQuickIN/Hypervisor.png" style="zoom:67%;" >

<p>也许我们需要的只是一个Web服务器，但是使用虚拟机却需要启动一个完整的操作系统，包括操作系统的内核、各种系统服务、各种工具甚至图形界面等，这些我们并不需要的服务占用了大量的资源，导致了资源的浪费和启动速度慢的问题。</p>
<img src="./DockerQuickIN/VM.png" style="zoom:50%;" >

<p>了解了虚拟机后，我们再来看一下 <code>Docker</code> 是如何解决的。需要注意，<code>Docker</code> 中***容器(Container)<em><strong>的概念。需要注意的是，<code>Docker</code> 和 <strong>容器</strong>是两个不同的概念，但是因为 <code>Docker</code> 的流行性，以至于很多人将 <code>Docker</code> 和 <strong>容器</strong> 混为一谈，实际上 <code>Docker</code>只是容器的一种实现，是一个容器化的解决方案和平台。而</strong>容器是一种虚拟化技术，和虚拟机类似</em>*，也是一个独立的环境，可以在这个环境中运行应用程序。和虚拟机不同的是，他并不需要在容器中运行一个完整的操作系统，而是使用宿主机的操作系统，所以启动速度非常快，通常只需要几秒钟。同时，因为需要的资源更少，所以可以在一台物理服务器上运行更多的容器，以便于更加充分的利用服务器的资源，减少资源的闲置和浪费。</p>
<img src="./DockerQuickIN/DockerContainer.png" style="zoom:50%;" >

<p>正因如此，一台物理服务器上也许可以运行几个虚拟机，但是却可以运行上百个容器。</p>
<h4 id="1-4-Docker-的基本原理和主要概念"><a href="#1-4-Docker-的基本原理和主要概念" class="headerlink" title="1.4 Docker 的基本原理和主要概念"></a>1.4 <code>Docker</code> 的基本原理和主要概念</h4><img src="./DockerQuickIN/DockerConcept.png">

<p><strong>镜像 Image</strong>：镜像是一个<strong>只读</strong>的模板，它可以用来创建容器。</p>
<p><strong>容器 Container</strong>：容器是 <code>Docker</code> 的<strong>运行实例</strong>，他提供了一个独立的、可移植的环境，可以在这个环境中运行应用程序。</p>
<p><strong>仓库 Registry</strong>：<code>Docker</code> 的仓库是一个用于存储 <code>Docker</code>镜像的地方。最流行、最常用的仓库就是 <code>Docker Hub</code>。</p>
<p>类似于 <code>Java</code> 和 <code>C++</code>，<em><strong>镜像</strong></em>类似于<em><strong>类</strong></em>，而<em><strong>容器</strong></em>则就是<em><strong>类的实例</strong></em>，可以有一到多个容器。</p>
<p><code>Docker</code> 使用的是 <code>Client-Server</code> 架构模式，<code>Docker Client</code> 和 <code>Docker Daemon</code> 之间通过 <code>socket</code> 或 <code>RESTful API</code> 进行通信。<code>Docker Daemon</code> 就是 <code>Docker</code> 服务端的守护进程，他负责管理 <code>Docker</code> 的各种资源。<code>Docker Client</code> 负责向 <code>Docker Daemon</code> 发送请求，<code>Docker Daemon</code> 接收到请求后进行处理，然后将要结果返回给 <code>Docker Client</code>。<code>Docker Daemon</code> 是一个后台进程，用于接收并处理来自 <code>Docker</code> 客户端的请求，然后将结果返回给客户端。因此我们在终端中输入的各种 <code>Docker</code> 命令，其实都是通过 <code>Docker Client</code> 发送给 <code>Docker Daemon</code> 的，<code>Docker Daemon</code> 进行处理，最后将处理结果返回给 <code>Docker Client</code>，然后就可以再终端中看到执行结果。</p>
<h3 id="🐳-2-Docker-的安装配置"><a href="#🐳-2-Docker-的安装配置" class="headerlink" title="🐳 2. Docker 的安装配置"></a>🐳 2. <code>Docker</code> 的安装配置</h3><h4 id="2-1-Windows-环境下下载安装-Docker"><a href="#2-1-Windows-环境下下载安装-Docker" class="headerlink" title="2.1 Windows 环境下下载安装 Docker"></a>2.1 <code>Windows</code> 环境下下载安装 <code>Docker</code></h4><p><code>Docker</code> 官网（目前国内无法正常访问）：<a target="_blank" rel="noopener" href="https://www.docker.com/">https://www.docker.com/</a></p>
<p>可以找一些镜像网站来进行下载安装。</p>
<p>下载完成后，需要运行 <code>Docker</code>，才可以使用 <code>Docker</code> 的一系列命令。</p>
<p><code>Windows</code> 系统下需要开启 <code>Hyper-V</code> 功能。开启方式如下：</p>
<ul>
<li>在设置中搜索 <strong>启用或关闭 Windows 功能</strong>。</li>
<li>勾选 <code>Hyper-V</code> 选项，按照提示重启系统即可。</li>
</ul>
<h4 id="2-2-Linux-Ubuntu-环境下下载安装-Docker"><a href="#2-2-Linux-Ubuntu-环境下下载安装-Docker" class="headerlink" title="2.2 Linux(Ubuntu) 环境下下载安装 Docker"></a>2.2 <code>Linux(Ubuntu)</code> 环境下下载安装 <code>Docker</code></h4><h5 id="2-2-1-安装"><a href="#2-2-1-安装" class="headerlink" title="2.2.1 安装"></a>2.2.1 安装</h5><p>① 使用官方安装脚本自动安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure>

<p>② 或者使用国内daocloud一键安装命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure>

<p>③ 手动安装</p>
<ul>
<li><p>卸载旧版本</p>
<p><code>Docker</code> 的旧版本被称为 <code>docker</code>、<code>docker.io</code> 或 <code>docker-engine</code>。如果已安装，请卸载它们。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove docker docker-engine docker.io containerd runc</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置仓库</p>
<p>更新 <code>apt</code> 包索引</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<p>安装 <code>apt</code> 依赖包，用于通过HTTPS来获取仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install apt-transport-https \</span><br><span class="line">					 ca-certificates \</span><br><span class="line">					 curl \</span><br><span class="line">					 gnupg-agent \</span><br><span class="line">					 software-properties-common</span><br></pre></td></tr></table></figure>

<p>添加 <code>Docker</code> 的官方 <code>GPG</code> 密钥：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<p>设置稳定存储库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] \</span></span><br><span class="line"><span class="string">						 https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/ \</span></span><br><span class="line"><span class="string">						 <span class="subst">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">						 stable&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 <code>Docker Engine-Community</code></p>
<p>更新 <code>apt</code> 包索引：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<p>安装最新版本的 <code>Docker Engine-Community</code> 和 <code>containerd</code> ，或者转到下一步安装特定版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<p>安装特定版本的 <code>Docker Engine-Community</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-cache madison docker-ce</span><br><span class="line"></span><br><span class="line">  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages</span><br><span class="line">  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试安装成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2-2-2-卸载"><a href="#2-2-2-卸载" class="headerlink" title="2.2.2 卸载"></a>2.2.2 卸载</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">				docker-client \</span><br><span class="line">				docker-client-latest \</span><br><span class="line">				docker-common \</span><br><span class="line">				docker-latest \</span><br><span class="line">				docker-latest-logrotate \</span><br><span class="line">				docker-logrotate \</span><br><span class="line">				docker-engine</span><br></pre></td></tr></table></figure>

<h4 id="2-3-Linux-CentOS7-环境下下载安装-Docker"><a href="#2-3-Linux-CentOS7-环境下下载安装-Docker" class="headerlink" title="2.3 Linux(CentOS7) 环境下下载安装 Docker"></a>2.3 <code>Linux(CentOS7)</code> 环境下下载安装 <code>Docker</code></h4><p>安装 <code>Docker</code> 的必要前提条件：要安装 <code>Docker Engine</code> 需要 <code>CentOS 7</code> 的维护版本。不支持或未测试存档版本。<code>centos-extras</code> 库必须启用。默认情况下，此存储库是启用的。建议使用 <code>overlay2</code> 存储驱动程序。</p>
<p>可以通过 <code>uname –a</code> 或 <code>cat /etc/redhat-release</code> 查询当前OS系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ <span class="built_in">uname</span> -a</span><br><span class="line">Linux bigdata 3.10.0-1160.el7.x86_64 <span class="comment">#1 SMP Mon Oct 19 16:18:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ <span class="built_in">cat</span> /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br></pre></td></tr></table></figure>

<h5 id="2-3-1-安装"><a href="#2-3-1-安装" class="headerlink" title="2.3.1 安装"></a>2.3.1 安装</h5><p>可以根据需要以不同的方式安装 <code>Docker Engine</code>：</p>
<ol>
<li>大多数用户会设置 <code>Docker</code> 的存储库并从中进行安装，以简化安装和升级任务。<strong>这是推荐的方法</strong>，这种方式需要访问互联网。</li>
<li>一些用户下载并手动安装 <code>RPM</code> 软件包，并完全手动管理升级。这在无法访问互联网的空白系统上安装 <code>Docker</code> 的情况下非常有用。</li>
<li>在测试和开发环境中，一些用户选择使用自动便携式的脚本来安装 <code>Docker</code>。</li>
</ol>
<p><strong>① 卸载旧版本</strong></p>
<p>较旧的 <code>Docker</code> 版本称为 <code>docker</code> 或 <code>docker-engine</code>。如果已安装这些程序，请卸载它们以及相关的依赖项。</p>
<p><strong>② 使用存储库安装 <code>Docker</code></strong></p>
<ul>
<li><p>设置存储库：</p>
<p>安装 <code>yum-utils</code> 软件包（提供 <code>yum-config-manager</code> 实用程序）并且 <code>device mapper</code> 存储驱动程序需要 <code>device-mapper-persistent-data</code> 和 <code>lvm2</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 完整命令如下</span></span><br><span class="line"><span class="comment"># 安装 yum-utils、device-mapper-persistent-data、lvm2</span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令行执行效果</span></span><br><span class="line">[nilera@bigdata ~]$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>

<p>设置稳定的存储库（使用官方源地址，比较慢）。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在将 <code>Docker Engine</code> 软件包称为 <code>docker-ce</code>。分为2种方式：</p>
<ol>
<li><p>安装最新版本的 <code>Docker Engine</code> 和容器，或转到下一步以安装特定版本。</p>
<p>如果提示接受 <code>GPG</code> 密钥，请验证指纹是否匹配 <code>060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35</code>，如果是，则接受它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>
</li>
<li><p>要安装特定版本的 <code>Docker Engine-Community</code>，需要在存储库中列出可用版本，然后选择并安装。</p>
<p>列出并排序存储库中可用的版本。本示例按版本号（从高到低）对结果进行排序，并被截断：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo yum list docker-ce --showduplicates | <span class="built_in">sort</span> -r</span><br></pre></td></tr></table></figure>

<p>通过其完整的软件包名称安装特定版本，该软件包名称是软件包名称<code>docker-ce</code>加上版本字符串。例如：<code>docker-ce-18.09.1</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>使用存储库安装 <code>Docker CE</code> 完成</p>
<p><code>Docker</code> 已安装但尚未启动。<code>docker</code>组已被创建，但没有用户添加到该组。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ <span class="built_in">cat</span> /etc/group</span><br><span class="line">root:x:0:</span><br><span class="line">bin:x:1:</span><br><span class="line">...</span><br><span class="line">ntp:x:38:</span><br><span class="line">cgred:x:996:</span><br><span class="line">docker:x:995:</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动 <code>Docker</code> 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo systemctl start docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过运行 <code>hello-world</code> 映像来验证是否正确安装了 <code>Docker Engine</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[nilera@bigdata ~]$ sudo docker version</span><br><span class="line">[nilera@bigdata ~]$ sudo docker run hello-world</span><br></pre></td></tr></table></figure></li>
</ul>
<p>③ 使用便捷脚本安装 <code>Docker CE</code></p>
<p><code>Docker</code> 在 <code>get.docker.com</code> 和 <code>test.docker.com</code> 上提供了便捷脚本，用于将 <code>Docker Engine-Community</code> 的边缘版本和测试版本快速且非交互地安装到开发环境中。脚本的源代码在 <code>docker-install</code> 存储库中。</p>
<p>⚠ <strong>不建议在生产环境中使用这些脚本</strong> ⚠</p>
<p>具有一定风险：</p>
<ol>
<li>脚本需要运行 <code>root</code> 或具有 <code>sudo</code> 特权。在运行脚本之前，应仔细检查和审核脚本。</li>
<li>这些脚本尝试检测 Linux 发行版和版本，并配置软件包管理系统。此外，脚本不允许自定义任何安装参数。从Docker的角度或自己组织的准则和标准角度来看，这可能导致不支持的配置。</li>
<li>这些脚本将安装软件包管理器的所有依赖项和建议，而无需进行确认。根据主机的当前配置，可能会安装大量软件包。</li>
<li>该脚本未提供用于指定要安装哪个版本的 Docker 的选项，而是安装了在”edge”通道中发布的最新版本。如果已使用其他机制将Docker安装在主机上，<strong>请不要使用便捷脚本</strong>。</li>
</ol>
<h5 id="2-3-2-卸载"><a href="#2-3-2-卸载" class="headerlink" title="2.3.2 卸载"></a>2.3.2 卸载</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>



<h4 id="2-4-Docker-测试"><a href="#2-4-Docker-测试" class="headerlink" title="2.4 Docker 测试"></a>2.4 <code>Docker</code> 测试</h4><p>启动之后，即可在终端使用 <code>Docker</code> 的各种命令了。我们可以使用一条简单的命令来进行测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\NilEra&gt;docker version</span><br><span class="line">Client:</span><br><span class="line"> Cloud integration: v1.0.28</span><br><span class="line"> Version:           20.10.17</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.17.11</span><br><span class="line"> Git commit:        100c701</span><br><span class="line"> Built:             Mon Jun  6 23:09:02 2022</span><br><span class="line"> OS/Arch:           windows/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">Server: Docker Desktop 4.11.1 (84025)</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.17</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.17.11</span><br><span class="line">  Git commit:       a89b842</span><br><span class="line">  Built:            Mon Jun  6 23:01:23 2022</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.6.6</span><br><span class="line">  GitCommit:        10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.1.2</span><br><span class="line">  GitCommit:        v1.1.2-0-ga916309</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure>

<p>我们可以看到 <code>Client</code> 和 <code>Server</code> 的信息，如果只能看到 <code>Client</code>，则表示 <code>Docker</code> 没有启动，需要启动 <code>Docker</code> 之后才可以看到 <code>Server</code>。</p>
<h3 id="🐳-3-Docker-的常用命令"><a href="#🐳-3-Docker-的常用命令" class="headerlink" title="🐳 3. Docker 的常用命令"></a>🐳 3. <code>Docker</code> 的常用命令</h3><h4 id="3-1-Docker-Desktop-的使用"><a href="#3-1-Docker-Desktop-的使用" class="headerlink" title="3.1 Docker Desktop 的使用"></a>3.1 <code>Docker Desktop</code> 的使用</h4><h5 id="3-1-1-Docker-Containers-Images-容器和镜像"><a href="#3-1-1-Docker-Containers-Images-容器和镜像" class="headerlink" title="3.1.1 Docker Containers &amp; Images 容器和镜像"></a>3.1.1 <code>Docker Containers</code> &amp; <code>Images</code> 容器和镜像</h5><p><code>Docker Desktop</code> 是 <code>Docker</code> 的图形化界面，<code>Docker Desktop</code> 封装了容器日常使用和管理的各种常用功能，打开控制台面板后，可以看到 <strong><code>Containers</code> 容器</strong>和**<code>Images</code>镜像**，这两个菜单项分别用于查看本机的容器列表和镜像列表。</p>
<p>对于菜单项中的内容，我们可以进行一系列操作。</p>
<img src="./DockerQuickIN/DockerDesktopImagesMenu.png">

<p>比如，我们可以点击 <code>RUN</code> 按钮运行一个镜像，等同于执行了 <code>docker run</code> 命令。点击三个小圆点，有几个选项 <code>Inspect</code>、<code>Pull</code>、<code>Push to Hub</code>、<code>Remove</code>，分别用于查看镜像的详细信息、拉取镜像、推送镜像、移除镜像。</p>
<h5 id="3-1-2-Docker-Volumes-逻辑卷"><a href="#3-1-2-Docker-Volumes-逻辑卷" class="headerlink" title="3.1.2 Docker Volumes 逻辑卷"></a>3.1.2 <code>Docker Volumes</code> 逻辑卷</h5><p>此外，还有 <strong><code>Volumes</code> 逻辑卷</strong> 菜单项，在这个菜单项列表中可以看到容器的逻辑卷，逻辑卷是 <code>Docker</code> 中用来存储的。</p>
<p><code>Docker</code> 容器有一个特点，就是容器中的数据是不会持久化的，当我们创建一个容器的时候，它通常以一个干净的文件系统开始，容器启动之后，我们可以在文件中创建文件、修改文件，但是当容器停止之后，容器中的所有数据都会丢失掉。</p>
<p>如果我们想要对于 <code>Docker</code> 中的数据进行容器的持久化应该怎么做？</p>
<p>逻辑卷就是用来解决这个问题的，它可以将容器中的目录或者指定路径映射到宿主机的某一目录或者位置上，这样就可以将数据保存到宿主机的磁盘上，实现了数据的持久化。</p>
<h5 id="3-1-3-Docker-Dev-Environments-开发环境"><a href="#3-1-3-Docker-Dev-Environments-开发环境" class="headerlink" title="3.1.3 Docker Dev Environments 开发环境"></a>3.1.3 <code>Docker Dev Environments</code> 开发环境</h5><p>用于管理开发环境，简单来说就是可以创建一个开发环境，然后通过一些代码配置这个开发环境，这样就可以将这个开发环境共享给项目中的其他开发人员，让每个人都在一个相同的环境下进行开发，避免因为环境的不一致导致的各种问题。</p>
<h3 id="🐳-4-如何从零开始构建一个-Docker-镜像"><a href="#🐳-4-如何从零开始构建一个-Docker-镜像" class="headerlink" title="🐳 4. 如何从零开始构建一个 Docker 镜像"></a>🐳 4. 如何从零开始构建一个 <code>Docker</code> 镜像</h3><h4 id="4-1-容器化和-Dockerfile"><a href="#4-1-容器化和-Dockerfile" class="headerlink" title="4.1 容器化和 Dockerfile"></a>4.1 容器化和 <code>Dockerfile</code></h4><p>**容器化(Containerization)**：就是将应用程序打包成容器，然后在容器中运行应用程序的过程。</p>
<p>容器化的过程可以分为以下几个步骤：</p>
<ol>
<li>创建一个 <code>Dockerfile</code>：来告诉 <code>Docker</code> 构建应用程序镜像所需要的步骤和配置。</li>
<li>使用 <code>Dockerfile</code> 构建镜像。</li>
<li>使用镜像创建和运行容器。</li>
</ol>
<p><code>Dockerfile</code> 是一个文本文件，里面包含了一条条指令，用于告诉 <code>Docker</code> 如何构建镜像，这个镜像中包括了我们应用程序执行的所有命令，如各种依赖、配置环境和运行应用程序所需要的所有内容，一般来说包括：精简版的操作系统（如<code>Alpine</code>）、应用程序的运行时环境（如<code>NodeJS</code>、<code>Python</code>、<code>Java</code>）、应用程序（如打包好的 <code>jar</code> 包）、应用程序的第三方依赖库或包、应用程序的配置文件、环境变量等。</p>
<p>一般来说，我们会在项目的根目录下创建一个叫 <code>Dockerfile</code> 的文件，在这个文件中写入构建镜像所需要的各种指令之后，<code>Docker</code> 就会根据这个 <code>Dockerfile</code> 文件来构建一个镜像，有了这个镜像后，我们就可以根据这个镜像来创建容器，然后在容器中运行应用程序。</p>
<h4 id="4-2-编写-Dockerfile"><a href="#4-2-编写-Dockerfile" class="headerlink" title="4.2 编写 Dockerfile"></a>4.2 编写 <code>Dockerfile</code></h4><ol>
<li>新建一个名为 <code>HelloDocker</code> 的文件夹，使用 <code>VSCode</code> 打开该文件夹</li>
<li>在文件夹中创建一个 <code>index.js</code> 文件，简单的输入一些代码内容，比如输出一段内容到控制台</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello Docker!&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>我们可以使用 <code>NodeJS</code> 来测试这个 <code>JavaScript</code> 文件，<code>NodeJS</code> 是一个运行时环境，它可以让我们在浏览器之外的环境运行 <code>JavaScript</code> 代码。<code>JavaScript</code> 和 <code>NodeJS</code> 的关系就像 <code>Java</code> 和 <code>JRE</code> 的关系一样，如果想在浏览器之外的环境中运行 <code>JavaScript</code> 代码就需要 <code>NodeJS</code>。可以使用下面的命令运行 <code>index.js</code>。</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\HelloDocker&gt; node index.js</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>所以，当我们想要在另一个环境中运行这个应用程序时，都需要执行那些步骤呢？</p>
<ul>
<li>安装操作系统</li>
<li>安装 <code>JavaScript</code> 的运行环境</li>
<li>复制应用程序、依赖包、配置文件</li>
<li>执行启动命令运行程序</li>
</ul>
<p>而有了 <code>Docker</code> 后，我们可以将上述的步骤写入到 <code>Dockerfile</code> 中，剩下的工作交给 <code>Docker</code> 自动完成。</p>
</li>
<li><p>创建 <code>Dockerfile</code> 文件</p>
<p>在 <code>Dockerfile</code> 中，我们需要先指定一个基础镜像，镜像是按层次结构来构建的，每一层都是基于上一层的，所以我们需要先指定一个基础镜像，然后在此基础上添加我们的应用程序。</p>
<p>注意 <code>Dockerfile</code> 中不需要注释，这里只是为了便于理解所以添加了注释</p>
</li>
</ol>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">14</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制 本地路径的 JS 文件到镜像的根目录下</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> index.js /</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 CMD 命令运行该程序 CMD [&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg...&quot;], 其中 arg1 表示可执行程序的名字, arg2 及以后的参数表示可执行程序的参数</span></span><br><span class="line"><span class="comment"># 可以写成这种形式: CMD node /index.js</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;/index.js&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h4 id="4-3-创建镜像"><a href="#4-3-创建镜像" class="headerlink" title="4.3 创建镜像"></a>4.3 创建镜像</h4><ol start="6">
<li><p>构建 <code>Docker</code> 镜像</p>
<p>执行 <code>docker build</code> 命令，<code>hello-docker</code> 是镜像名称；<code>.</code> 表示当前目录，即 <code>Dockerfile</code> 所在目录。</p>
</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\HelloDocker&gt; docker build <span class="literal">-t</span> hello<span class="literal">-docker</span> .</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>执行完成后，我们可以使用命令<code>docker images</code> 或 <code>docker image ls</code> 查看所有镜像。</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\HelloDocker&gt; docker images</span><br><span class="line">REPOSITORY        TAG                              IMAGE ID       CREATED          SIZE</span><br><span class="line">hello<span class="literal">-docker</span>      latest                           <span class="number">31429</span>fa0e1e7   <span class="number">22</span> seconds ago   <span class="number">119</span>MB</span><br></pre></td></tr></table></figure>

<h4 id="4-4-启动容器"><a href="#4-4-启动容器" class="headerlink" title="4.4 启动容器"></a>4.4 启动容器</h4><ol start="8">
<li>使用 <code>docker run</code> 命令运行容器。</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span> D:\HelloDocker&gt; docker run hello<span class="literal">-docker</span></span><br><span class="line">Hello Docker!</span><br></pre></td></tr></table></figure>

<h4 id="4-5-在其他设备上测试容器"><a href="#4-5-在其他设备上测试容器" class="headerlink" title="4.5 在其他设备上测试容器"></a>4.5 在其他设备上测试容器</h4><ol start="9">
<li><p>为了测试我们的容器，我们可以将我们的镜像上传到 <code>Docker Hub</code> 或者 <code>Harbor</code> 镜像仓库中，上传完成之后，可以使用 <a target="_blank" rel="noopener" href="https://labs.play-with-docker.com/">Play with Docker</a> 进行测试。</p>
<p>上传镜像可以使用 <code>docker push</code> 命令。需要注意的是，推送镜像可能会出现问题：<code>docker：denied: requested access to the resource is denied</code>，遇到这个问题时，可以参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/fengpengfei_yes/article/details/113838579">解决docker：denied: requested access to the resource is denied_docker login - CSDN</a>。</p>
<p>① 确保自己登录了 <code>Docker</code></p>
<p>② 将镜像打 <code>TAG</code>，使用 <code>docker tag hello-docker:latest nilerak/hello-docker:1.0.0</code></p>
<p>③ 推送镜像，使用 <code>docker push nilerak/hello-docker:1.0.0</code></p>
</li>
<li><p>使用 <code>docker pull</code> 命令下载镜像文件。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nilerak/hello-docker:1.0.0</span><br></pre></td></tr></table></figure>

<img src="./DockerQuickIN/DockerPull01.png" style="width:700px">

<img src="./DockerQuickIN/DockerPull02.png" style="width:700px">

<img src="./DockerQuickIN/DockerPull03.png"  style="width:700px">

<h3 id="🐳-5-如何运行一个-Docker-容器"><a href="#🐳-5-如何运行一个-Docker-容器" class="headerlink" title="🐳 5. 如何运行一个 Docker 容器"></a>🐳 5. 如何运行一个 <code>Docker</code> 容器</h3><h3 id="🐳-6-Docker-Compose-和-Kubernetes"><a href="#🐳-6-Docker-Compose-和-Kubernetes" class="headerlink" title="🐳 6. Docker Compose 和 Kubernetes"></a>🐳 6. <code>Docker Compose</code> 和 <code>Kubernetes</code></h3><h4 id="6-1-Docker-Compose"><a href="#6-1-Docker-Compose" class="headerlink" title="6.1 Docker Compose"></a>6.1 Docker Compose</h4><p>Docker Compose 是 Docker 官方的开源项目，是一个用于定义和运行多容器 <code>Docker</code> 应用程序的工具，使用 <code>Yaml</code> 文件配置应用程序的服务，只需运行一条命令即可创建并启动所有的服务。</p>
<p>例如我们的项目可能需要前端（Vue）、后端（SpringBoot）、数据库（MySQL）、缓存（Redis）、负载均衡（Nginx）等多个服务器，这些服务相互独立，但是又存在一定的关联，需要相互配合来工作，前端需要连接后端、后端需要连接数据库。这些服务之间的关联关系，就是 <code>Docker Compose</code> 要解决的问题。它通过一个单独的 <code>docker-compose.yaml</code> 文件来将这一组互相关联的容器组合在一起，形成一个项目，然后使用一条命令 <code>docker compose up</code> 即可启动、停止、重建这些服务，这样就可以非常方便的管理这些服务了。</p>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lqpf199681/article/details/110518692">Docker超详细基础教程 - CSDN博客</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-23T04:27:44.000Z" title="2024/6/23 12:27:44">2024-06-23</time>发表</span><span class="level-item"><time dateTime="2024-06-24T08:40:14.154Z" title="2024/6/24 16:40:14">2024-06-24</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/CppDev/">CppDev</a><span> / </span><a class="link-muted" href="/categories/CppDev/Gaming/">Gaming</a></span><span class="level-item">5 分钟读完 (大约756个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/23/CppGamingDEV-PVZ-BASE-EASYX/">CppGamingDEV_PVZ_BASE_EASYX</a></p><div class="content"><h2 id="🎮-从零开始进行-C-游戏开发"><a href="#🎮-从零开始进行-C-游戏开发" class="headerlink" title="🎮 从零开始进行 C++ 游戏开发"></a>🎮 从零开始进行 C++ 游戏开发</h2><p>[TOC]</p>
<h3 id="游戏场景概念"><a href="#游戏场景概念" class="headerlink" title="游戏场景概念"></a>游戏场景概念</h3><ul>
<li><strong>什么是场景?</strong><br>如果将要游戏程序比作是一场有玩家参与的盛大演出，那场景就是演出过程中的一幕。在不同的幕中，会有不同的剧本逻辑，也可能会有不同的角色登场，这些角色即游戏开发中常提到的 <code>GameObject</code> 的概念。<br>不论是玩家、敌人还是子弹、道具等，这些从概念上讲都是 <code>GameObject</code> 的范畴。他们接受着不同的场景剧本的指挥，进行着不同逻辑的演出。<br>了解了这些，我们就可以对程序的流程进行宏观的划分，游戏的主菜单是一个场景，玩家角色选择界面也是一个场景，游戏局内的逻辑也需要放置在一个单独的场景中。<br>所以我们就可以定义一个 <code>Scene</code> 场景基类，<strong>主菜单</strong>、<strong>角色选择</strong>、<strong>局内游戏</strong> 作为新类分别继承 <code>Scene</code> 类。</li>
</ul>
<h3 id="游戏主循环框架概念"><a href="#游戏主循环框架概念" class="headerlink" title="游戏主循环框架概念"></a>游戏主循环框架概念</h3><ul>
<li><strong>什么是游戏主循环框架?</strong><br>游戏程序的主体是一个永不停歇的死循环。在每次循环中，我们读取玩家的操作信息，并根据这些操作，处理玩家数据更新，在最后的绘图阶段将游戏画面根据这些更新后的数据渲染出来。<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">初始化();</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    读取操作();</span><br><span class="line">    处理数据();</span><br><span class="line">    绘制画面();</span><br><span class="line">&#125;</span><br><span class="line">施放资源;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="C-头文件"><a href="#C-头文件" class="headerlink" title="C++ 头文件"></a>C++ 头文件</h3><ul>
<li>为什么需要头文件卫士?<br>如果不使用头文件卫士，可能会导致出现重定义的问题。例如，我们有一个头文件 <code>A.h</code> ，有一个头文件 <code>B.h</code>，头文件 <code>B.h</code> 中使用了 <code>A.h</code> 的内容。当我们在主函数里面使用了 <code>A.h</code> 和 <code>B.h</code> 的时候，使用 <code>#include</code> 时会将头文件中的内容全部<strong>复制</strong>到 <code>#include</code> 的部分。这样的话如果不加头文件卫士，就会导致重定义的问题，如下：  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A.h</span></span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// B.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;A.h&quot;</span></span></span><br><span class="line"><span class="type">int</span> b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;A.h&quot;</span>      <span class="comment">// int a;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;B.h&quot;</span>      <span class="comment">// int a;</span></span></span><br><span class="line">                    <span class="comment">// int b;</span></span><br><span class="line">                    <span class="comment">// 出现重定义错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误信息如下</span></span><br><span class="line">In file included from B.h:<span class="number">1</span>,</span><br><span class="line">             from main.cpp:<span class="number">2</span>:</span><br><span class="line">A.h:<span class="number">1</span>:<span class="number">5</span>: error: redefinition of <span class="string">&#x27;int a&#x27;</span></span><br><span class="line">    <span class="number">1</span> | <span class="type">int</span> a;</span><br><span class="line">      |     ^</span><br><span class="line">In file included from main.cpp:<span class="number">1</span>:</span><br><span class="line">A.h:<span class="number">1</span>:<span class="number">5</span>: note: <span class="string">&#x27;int a&#x27;</span> previously declared here</span><br><span class="line">    <span class="number">1</span> | <span class="type">int</span> a;</span><br><span class="line">      |     ^</span><br></pre></td></tr></table></figure>
在 <code>MSVC</code> 编译器中，头文件卫士如下：  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br></pre></td></tr></table></figure>
在其他的一些编译器中，常写为这样：  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __HEADER_H__</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __HEADER_H__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="场景管理器"><a href="#场景管理器" class="headerlink" title="场景管理器"></a>场景管理器</h3><p>游戏程序是一个巨大的死循环，也是一个巨大的状态机。不同的游戏场景代表着不同的状态，管理着这些状态的“状态机”，在游戏开发中有一个特殊的名字——场景管理器。</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/">上一页</a></div><div class="pagination-next"><a href="/page/3/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link is-current" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatarMyself.jpg" alt="NilEra"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">NilEra</p><p class="is-size-6 is-block">C/C++ Developer!</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Jinan Shandong</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">43</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">37</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">43</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/NilEra-K" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/NilEra-K" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">GitHub</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://nano.chemtian.top/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thymol Blue</span></span><span class="level-right"><span class="level-item tag">nano.chemtian.top</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/CppDev/"><span class="level-start"><span class="level-item">CppDev</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/CppDev/Gaming/"><span class="level-start"><span class="level-item">Gaming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/QT6/"><span class="level-start"><span class="level-item">QT6</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">多线程编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">网络编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/"><span class="level-start"><span class="level-item">语法点</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/bind/"><span class="level-start"><span class="level-item">bind</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/enum-class/"><span class="level-start"><span class="level-item">enum class</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/%E8%99%9A%E5%87%BD%E6%95%B0/"><span class="level-start"><span class="level-item">虚函数</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/%E8%BD%AF%E4%BB%B6%E6%BA%90/"><span class="level-start"><span class="level-item">软件源</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">大数据技术</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/ECharts/"><span class="level-start"><span class="level-item">ECharts</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/HBase/"><span class="level-start"><span class="level-item">HBase</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Scala/"><span class="level-start"><span class="level-item">Scala</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Spark/"><span class="level-start"><span class="level-item">Spark</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"><span class="level-start"><span class="level-item">数据可视化</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">项目</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">开发工具</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Axure-RP-9/"><span class="level-start"><span class="level-item">Axure RP 9</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/SVN/"><span class="level-start"><span class="level-item">SVN</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VSCode/"><span class="level-start"><span class="level-item">VSCode</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">数据结构/算法</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E5%93%88%E5%B8%8C-Hash/"><span class="level-start"><span class="level-item">哈希(Hash)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E6%A0%88-Stack/"><span class="level-start"><span class="level-item">栈(Stack)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E6%A0%91-Tree/"><span class="level-start"><span class="level-item">树(Tree)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">深度学习</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Kaggle/"><span class="level-start"><span class="level-item">Kaggle</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/"><span class="level-start"><span class="level-item">LLMs</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/PyTorch/"><span class="level-start"><span class="level-item">PyTorch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Stable-Diffusion/"><span class="level-start"><span class="level-item">Stable_Diffusion</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84/"><span class="level-start"><span class="level-item">网络架构</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84/Kolmogorov-Arnold-Networks/"><span class="level-start"><span class="level-item">Kolmogorov-Arnold Networks</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%81%8A/"><span class="level-start"><span class="level-item">闲聊</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%81%8A/%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">计划</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-12T02:03:09.000Z">2024-09-12</time></p><p class="title"><a href="/2024/09/12/RedHat-Build-LLM/">RedHat-Build-LLM</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/">LLMs</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-11T01:06:12.000Z">2024-09-11</time></p><p class="title"><a href="/2024/09/11/SVN-Quick-IN/">SVN-Quick-IN</a></p><p class="categories"><a href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a> / <a href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/SVN/">SVN</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-05T07:07:36.000Z">2024-09-05</time></p><p class="title"><a href="/2024/09/05/How2Use-Stable-Diffusion/">How2Use_Stable_Diffusion</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Stable-Diffusion/">Stable_Diffusion</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-22T09:58:38.000Z">2024-08-22</time></p><p class="title"><a href="/2024/08/22/Kolmogorov-Arnold-Networks/">Kolmogorov-Arnold Networks</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84/">网络架构</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84/Kolmogorov-Arnold-Networks/">Kolmogorov-Arnold Networks</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-18T02:35:39.000Z">2024-08-18</time></p><p class="title"><a href="/2024/08/18/Create-AN-Environment-of-Kaggle/">Create_AN_Environment_of_Kaggle</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">九月 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">八月 2024</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">七月 2024</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">六月 2024</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">五月 2024</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">四月 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">三月 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Axure-RP-9/"><span class="tag">Axure RP 9</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C-11-%E6%96%B0%E6%A0%87%E5%87%86/"><span class="tag">C++ 11 新标准</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CppDev/"><span class="tag">CppDev</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECharts/"><span class="tag">ECharts</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EasyX/"><span class="tag">EasyX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GameDev/"><span class="tag">GameDev</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HBase/"><span class="tag">HBase</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaDev/"><span class="tag">JavaDev</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/KAN/"><span class="tag">KAN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kaggle/"><span class="tag">Kaggle</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLMs/"><span class="tag">LLMs</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LM-Studio/"><span class="tag">LM-Studio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MyBatis-Plus/"><span class="tag">MyBatis-Plus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PowerInfer/"><span class="tag">PowerInfer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PyTorch/"><span class="tag">PyTorch</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QT6/"><span class="tag">QT6</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/R/"><span class="tag">R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RedHat/"><span class="tag">RedHat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SVN/"><span class="tag">SVN</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scala/"><span class="tag">Scala</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spark/"><span class="tag">Spark</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Stable-Diffusion/"><span class="tag">Stable Diffusion</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tomcat/"><span class="tag">Tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VSCode/"><span class="tag">VSCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZooKeeper/"><span class="tag">ZooKeeper</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="tag">多线程编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/"><span class="tag">大数据技术</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"><span class="tag">大模型</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"><span class="tag">开发工具</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">数据结构</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="tag">机器学习</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">深度学习</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="tag">网络编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E5%88%92/"><span class="tag">计划</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%AD%E6%B3%95%E7%82%B9/"><span class="tag">语法点</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E6%BA%90/"><span class="tag">软件源</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%97%B2%E8%81%8A/"><span class="tag">闲聊</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE/"><span class="tag">项目</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/StarLogo.svg" alt="Hello, NilEra :-)" height="28"></a><p class="is-size-7"><span>&copy; 2024 NilEra</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2024 前方⚡高能</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container" id="algolia-input"></div><div id="algolia-poweredby" style="display:flex;margin:0 .5em 0 1em;align-items:center;line-height:0"></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div><div class="searchbox-footer"></div></div></div><script src="https://cdnjs.loli.net/ajax/libs/algoliasearch/4.0.3/algoliasearch-lite.umd.js" crossorigin="anonymous" defer></script><script src="https://cdnjs.loli.net/ajax/libs/instantsearch.js/4.3.1/instantsearch.production.min.js" crossorigin="anonymous" defer></script><script src="/js/algolia.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadAlgolia({"applicationId":"2TB5ZZYPCO","apiKey":"00a43f1d62ca7b24c8b78d5f0223c065","indexName":"dev_nilera_blog"}, {"hint":"想要查找什么...","no_result":"未找到搜索结果","untitled":"(无标题)","empty_preview":"(无内容预览)"});
        });</script></body></html>