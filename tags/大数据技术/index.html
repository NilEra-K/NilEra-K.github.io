<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><meta name="theme-color" content="#123456"><meta name="generator" content="Hexo 4.2.0"><title>标签: 大数据技术 - Hello, NilEra :-)</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hello, NilEra :-)"><meta name="msapplication-TileImage" content="/img/StarLogo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hello, NilEra :-)"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="努力做自己喜欢的事"><meta property="og:type" content="blog"><meta property="og:title" content="Hello, NilEra :-)"><meta property="og:url" content="https://hello-nilera.com/"><meta property="og:site_name" content="Hello, NilEra :-)"><meta property="og:description" content="努力做自己喜欢的事"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hello-nilera.com/img/og_image.png"><meta property="article:author" content="NilEra"><meta property="article:tag" content="Hello NilEra"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hello-nilera.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hello-nilera.com"},"headline":"Hello, NilEra :-)","image":["https://hello-nilera.com/img/og_image.png"],"author":{"@type":"Person","name":"NilEra"},"publisher":{"@type":"Organization","name":"Hello, NilEra :-)","logo":{"@type":"ImageObject","url":"https://hello-nilera.com/img/StarLogo.svg"}},"description":"努力做自己喜欢的事"}</script><link rel="icon" href="/img/StarLogo.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?249654dcf9a3bf70708fdfc6e2b1ec2b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="F6BD78C6BD0096D2218CF88334111125"><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/StarLogo.svg" alt="Hello, NilEra :-)" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">目录</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" href="/me">我</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">大数据技术</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-22T08:15:12.000Z" title="2024/6/22 16:15:12">2024-06-22</time>发表</span><span class="level-item"><time dateTime="2024-07-09T12:42:38.315Z" title="2024/7/9 20:42:38">2024-07-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></span><span class="level-item">1 小时读完 (大约11518个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/22/DataVisualization-USE-R-ECHARTS/">DataVisualization_USE_R_ECHARTS</a></p><div class="content"><h2 id="📺-数据可视化基础（使用R和ECharts）"><a href="#📺-数据可视化基础（使用R和ECharts）" class="headerlink" title="📺 数据可视化基础（使用R和ECharts）"></a>📺 数据可视化基础（使用<code>R</code>和<code>ECharts</code>）</h2><p>本文会从 <strong><code>R</code></strong> 和 <strong><code>ECharts</code></strong> 两个方面来展开数据可视化技术的一些使用方法。</p>
<p>[TOC]</p>
<h3 id="📊-1-数据可视化概述"><a href="#📊-1-数据可视化概述" class="headerlink" title="📊 1. 数据可视化概述"></a>📊 1. 数据可视化概述</h3><ul>
<li><p>数据可视化概念</p>
<ul>
<li>狭义概念：指的是数据用统计图表方式呈现</li>
<li>广义概念：是数据可视化、信息可视化以及科学可视化等等多个领域的统称</li>
</ul>
</li>
<li><p>数据可视化分类</p>
<ul>
<li>数据可视化</li>
<li>信息可视化</li>
<li>科学可视化</li>
</ul>
</li>
<li><p>⭐*** 数据可视化作用***</p>
<ul>
<li><strong>数据表达</strong>：通过计算机图形图形技术来更加友好地展示数据信息，以方便人们理解和分析数据。</li>
<li><strong>数据操作</strong>：以计算提供的界面、接口和协议等条件为基础完成人与数据的交互需求。</li>
<li><strong>数据分析</strong>：通过计算机获得多维、多源、异构和海量数据所隐含信息的核心手段，它是数据存储、数据转换、数据计算和数据可视化的综合应用。</li>
</ul>
</li>
<li><p>⭐ <em><strong>数据可视化的工具</strong></em></p>
<ul>
<li><code>R</code>、<code>ECharts</code>、<code>D3</code> <strong>…</strong></li>
<li><code>Python</code>、<code>pyecharts</code>、<code>Excel</code> <strong>…</strong></li>
<li>第三方商业工具：<code>FineBI</code>、<code>FineReport</code> <strong>…</strong></li>
</ul>
</li>
<li><p>学习数据可视化需要了解（具备）什么？</p>
<ul>
<li><p>对色彩的感知：了解原色、间色、复色等，并且了解色彩的视觉感受（心理感受），当然也就是了解即可，色彩这种东西天赋更重要一些，知道三原色是啥就行。</p>
<ul>
<li><strong>原色</strong>：红、黄、蓝。</li>
<li>间色：可存在多个间色，当原色之间 <code>1:1</code> 匹配时则为：橙、绿、紫。</li>
<li>复色：可存在多个复色（一定包含三原色），两个间色或一种原色和其对应的间色（黄 + 紫、蓝 + 橙）相混合得到复色。</li>
<li>色彩感受：轻重感、冷暖感、前后感、收缩感 …</li>
</ul>
</li>
<li><p>数据可视化的基本流程</p>
<ul>
<li>数据采集</li>
<li>数据处理</li>
<li>可视化映射</li>
<li>用户感知</li>
</ul>
</li>
<li><p>数据可视化的一些设计技巧</p>
<ul>
<li><p>设计原则：注重用户的视觉体验</p>
</li>
<li><p>设计技巧：</p>
<p>① （颜色）建立视觉层次，用醒目的颜色突出数据，淡化其他元素</p>
<p>② （内容）高亮显示重点内容</p>
<p>③ （跨度）提升不同区域的色阶跨度</p>
<p>④ （场景）借助场景来表现数据指标</p>
<p>⑤ （转换）将抽象的不易理解的数字转换为容易被人感知的图表</p>
<p>⑥ （简洁）尽量让图表简洁</p>
</li>
</ul>
</li>
<li><p>数据可视化的图表类型</p>
<p>在统计图表中每一种类型的图表中都可包含不同的数据可视化图形，如：柱状图、饼图、气泡图、热力图、趋势图、直方图、雷达图、色块图、漏斗图、和弦图、仪表盘、面积图、折线图、密度图 以及 K线图等。</p>
</li>
</ul>
</li>
</ul>
<h3 id="🎫-2-R-R语言快速入门"><a href="#🎫-2-R-R语言快速入门" class="headerlink" title="🎫 2. R - R语言快速入门"></a>🎫 2. <code>R</code> - <code>R</code>语言快速入门</h3><p>参考文献：<a target="_blank" rel="noopener" href="https://bookdown.org/wangminjie/R4DS/">数据科学中的 R 语言 (bookdown.org)</a></p>
<h4 id="2-1-R-语言概述"><a href="#2-1-R-语言概述" class="headerlink" title="2.1 R 语言概述"></a>2.1 R 语言概述</h4><p>R语言是为数学研究工作者设计的一种数学编程语言，主要用于统计分析、绘图、数据挖掘数据可视化。</p>
<p>目前主流的数据分析语言有 <code>R</code>、<code>Python</code>、<code>Matlab</code> 等。</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left"><code>R</code></th>
<th><code>Python</code></th>
<th><code>Matlab</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>语言学习难易程度</strong></td>
<td align="left">入门难度低</td>
<td>入门难度一般</td>
<td>入门难度一般</td>
</tr>
<tr>
<td align="left"><strong>使用场景</strong></td>
<td align="left">数据分析、数据挖掘、机器学习、数据可视化等。</td>
<td>数据分析、机器学习、矩阵运算、科学数据可视化、数字图像处理、Web应用、网络爬虫、系统运维等。</td>
<td>矩阵计算、数值分析、科学数据可视化、机器学习、符号计算、数字图像处理、数字信号处理、仿真模拟等。</td>
</tr>
<tr>
<td align="left"><strong>第三方支持</strong></td>
<td align="left">拥有大量的 <code>Packages</code>，能够调用 <code>C</code>、<code>C++</code>、<code>Fortran</code>、<code>Java</code>等其他程序语言。</td>
<td>拥有大量的第三方库，能够简便地调用<code>C</code>、<code>C++</code>、<code>Fortran</code>、<code>Java</code>等其他程序语言。</td>
<td>拥有大量专业的工具箱，在新版本中加入了对<code>C</code>、<code>C++</code>，<code>Java</code>的支持。</td>
</tr>
<tr>
<td align="left"><strong>流行领域</strong></td>
<td align="left">工业界 ≈ 学术界</td>
<td>工业界 ＞ 学术界</td>
<td>工业界 ≤ 学术界</td>
</tr>
<tr>
<td align="left"><strong>软件成本</strong></td>
<td align="left">开源免费</td>
<td>开源免费</td>
<td>商业收费</td>
</tr>
</tbody></table>
<h4 id="2-2-R-语言中包的概念和使用"><a href="#2-2-R-语言中包的概念和使用" class="headerlink" title="2.2 R 语言中包的概念和使用"></a>2.2 R 语言中包的概念和使用</h4><ul>
<li><p>软件包和软件库</p>
<ul>
<li><p>软件包：<code>R</code> 中的包是 <code>R</code> 函数、数据、预编译代码以一种定义完善的格式组成的集合。</p>
</li>
<li><p>软件库：软件库指的是一个包含了若干个包的目录。你可以拥有一个系统级别的软件库，也可以为每个用户单独设立一个软件库。</p>
</li>
<li><p><code>R</code> 自带了一系列默认包（包括 <code>base</code>、<code>datasets</code>、<code>utils</code>、<code>grDevices</code>、<code>graphics</code>、<code>stats</code>以及<code>methods</code>），它们提供了种类繁多的默认函数和数据集。</p>
<ul>
<li><code>base</code>：包含基础的 <code>R</code> 函数</li>
<li><code>database</code>：自带的数据包，里面的数据结构包括矩阵、向量、数据框等</li>
<li><code>utils</code>：工具函数包</li>
<li><code>grDevices</code>：基础绘图工具包，提供调整图形颜色和字体的功能，可用于配色</li>
<li><code>graphics</code>：基础绘图工具包</li>
<li><code>stats</code>：统计函数的扩展包</li>
<li><code>methods</code>：<code>R</code> 对象和其他编程工具定义方法和类比的扩展包</li>
</ul>
</li>
</ul>
</li>
<li><p>包的相关操作</p>
<ul>
<li>查看包的安装路径：<code>.libPaths()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> .libPaths<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;D:/R/R-4.3.3/library&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看已安装的包：<code>library()</code></li>
<li>查看编译环境下已载入的包的列表：<code>search()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> search<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;.GlobalEnv&quot;</span>        <span class="string">&quot;tools:rstudio&quot;</span>     <span class="string">&quot;package:stats&quot;</span>     <span class="string">&quot;package:graphics&quot;</span>  <span class="string">&quot;package:grDevices&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">6</span><span class="punctuation">]</span> <span class="string">&quot;package:utils&quot;</span>     <span class="string">&quot;package:datasets&quot;</span>  <span class="string">&quot;package:methods&quot;</span>   <span class="string">&quot;Autoloads&quot;</span>         <span class="string">&quot;package:base&quot;</span>   </span><br></pre></td></tr></table></figure>

<ul>
<li><p>下载包：</p>
<ul>
<li><p>通过 <strong>CRAN (The Comprehensive R Archive Network)</strong> 下载。<strong>CRAN</strong> 是 R 语言的综合档案网络。用户可以从 CRAN 上下载并安装各种第三方包来扩展 R 语言的功能。</p>
<p>① 指定包名进行安装：<code>install.packages(&quot;PackageName&quot;)</code></p>
<p>② 使用图形界面安装：<code>install.packages()</code> </p>
</li>
<li><p>手动安装：<a target="_blank" rel="noopener" href="https://cran.r-project.org/web/packages/XML/index.html">https://cran.r-project.org/web/packages/XML/index.html</a></p>
</li>
<li><p>使用 <code>RStudio</code> 安装</p>
</li>
</ul>
</li>
<li><p>包的卸载：<code>remove.packages(&quot;PackageName&quot;)</code></p>
</li>
<li><p>包的载入：<code>library(&quot;PackageName&quot;)</code></p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span><span class="string">&quot;XML&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> search<span class="punctuation">(</span><span class="punctuation">)</span>		<span class="comment"># 可以看到 &quot;package:XML&quot; 已经被加载进来了</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;.GlobalEnv&quot;</span>        <span class="string">&quot;package:XML&quot;</span>       <span class="string">&quot;tools:rstudio&quot;</span>     <span class="string">&quot;package:stats&quot;</span>     <span class="string">&quot;package:graphics&quot;</span> </span><br><span class="line"> <span class="punctuation">[</span><span class="number">6</span><span class="punctuation">]</span> <span class="string">&quot;package:grDevices&quot;</span> <span class="string">&quot;package:utils&quot;</span>     <span class="string">&quot;package:datasets&quot;</span>  <span class="string">&quot;package:methods&quot;</span>   <span class="string">&quot;Autoloads&quot;</span>        </span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;package:base&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>包的取消载入：<code>detach(&quot;package:PackageName&quot;, unload = True)</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> detach<span class="punctuation">(</span><span class="string">&quot;package:XML&quot;</span><span class="punctuation">,</span> unload <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> search<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;.GlobalEnv&quot;</span>        <span class="string">&quot;tools:rstudio&quot;</span>     <span class="string">&quot;package:stats&quot;</span>     <span class="string">&quot;package:graphics&quot;</span>  <span class="string">&quot;package:grDevices&quot;</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">6</span><span class="punctuation">]</span> <span class="string">&quot;package:utils&quot;</span>     <span class="string">&quot;package:datasets&quot;</span>  <span class="string">&quot;package:methods&quot;</span>   <span class="string">&quot;Autoloads&quot;</span>         <span class="string">&quot;package:base&quot;</span>     </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-3-R-语言的工作空间的概念和使用"><a href="#2-3-R-语言的工作空间的概念和使用" class="headerlink" title="2.3  R 语言的工作空间的概念和使用"></a>2.3  R 语言的工作空间的概念和使用</h4><ul>
<li>概念：<strong>工作空间(Work Space)</strong> 就是当前 R 的工作环境，它储存着所有用户定义的对象（向量、矩阵、函数、数据框、列表）。在一个 R 会话结束时，用户可以将当前工作空间保存到一个镜像中，并在下次启动 R 时自动载入它。</li>
<li>设置工作目录：<code>setwd()</code> 或使用 <code>RStudio</code> 可视化窗口进行设置（<em><strong>Session</strong></em> → <em><strong>Set Working Directory</strong></em>）</li>
<li>获取工作目录：<code>getwd()</code></li>
</ul>
<h4 id="2-4-R-语言的六大原子数据类型"><a href="#2-4-R-语言的六大原子数据类型" class="headerlink" title="2.4 R 语言的六大原子数据类型"></a>2.4 R 语言的六大原子数据类型</h4><ul>
<li><strong>数字型(Numeric)</strong></li>
<li><strong>逻辑型(Logical)</strong></li>
<li><strong>整型(Integer)</strong></li>
<li><strong>字符型(Character)</strong></li>
<li><strong>复合型(Complex)</strong></li>
<li><strong>原子型(Raw)</strong></li>
</ul>
<p>对于不同原子数据类型可以按照如下方式定义：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 数值型(Numeric)</span></span><br><span class="line"><span class="operator">&gt;</span> varNumeric <span class="operator">=</span> <span class="number">12.5</span></span><br><span class="line"><span class="operator">&gt;</span> varNumeric</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12.5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 逻辑型(Logical)</span></span><br><span class="line"><span class="operator">&gt;</span> varLogical <span class="operator">=</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> varLogical</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 整型(Integer)</span></span><br><span class="line"><span class="operator">&gt;</span> varInteger <span class="operator">=</span> <span class="number">25L</span></span><br><span class="line"><span class="operator">&gt;</span> varInteger</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">25</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 字符型(Character)</span></span><br><span class="line"><span class="operator">&gt;</span> varCharacter <span class="operator">=</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> varCharacter</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 复合型(Complex)</span></span><br><span class="line"><span class="operator">&gt;</span> varComplex <span class="operator">=</span> <span class="number">2</span> <span class="operator">+</span> <span class="number">3i</span></span><br><span class="line"><span class="operator">&gt;</span> varComplex</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 原子型(Raw)</span></span><br><span class="line"><span class="operator">&gt;</span> varRaw <span class="operator">=</span> charToRaw<span class="punctuation">(</span><span class="string">&#x27;Hello&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> varRaw</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">48</span> <span class="number">65</span> <span class="number">6</span><span class="built_in">c</span> <span class="number">6</span><span class="built_in">c</span> <span class="number">6</span>f</span><br></pre></td></tr></table></figure>

<h4 id="2-5-R-语言变量使用"><a href="#2-5-R-语言变量使用" class="headerlink" title="2.5 R 语言变量使用"></a>2.5 R 语言变量使用</h4><ul>
<li>定义变量并赋值：使用 <code>&lt;-</code>、<code>=</code>、<code>-&gt;</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> var1 <span class="operator">=</span> <span class="number">12.5</span>		<span class="comment"># 定义 var1, 并赋值为 12.5</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>var1<span class="punctuation">)</span>		<span class="comment"># 输出 var1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12.5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> var2 <span class="operator">&lt;-</span> 13		<span class="comment"># 定义 var2, 并赋值为 13(由右向左)</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>var2<span class="punctuation">)</span>		<span class="comment"># 输出 var2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">13</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="number">14</span> <span class="operator">-&gt;</span> var3		<span class="comment"># 定义 var3, 并赋值为 14(由左向右)</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>var3<span class="punctuation">)</span>		<span class="comment"># 输出 var3</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">14</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> var2 <span class="operator">-&gt;</span> var3</span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>var3<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">13</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>变量的打印：<code>print()</code> 或 <code>cat()</code></p>
<p><code>print()</code> 和 <code>cat()</code> 都可以向控制台输出文字，区别在于 <code>print()</code> 有返回值，其会返回输出的内容，无法使用转义字符，当使用转义字符时，会直接输出转义字符；而 <code>cat()</code> 没有返回值，可以使用转义字符。</p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> varX <span class="operator">=</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> varY <span class="operator">=</span> <span class="string">&quot;Hello World\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> printX <span class="operator">&lt;-</span> print<span class="punctuation">(</span>varX<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> catX   <span class="operator">&lt;-</span> cat<span class="punctuation">(</span>varX<span class="punctuation">,</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">)</span>	<span class="comment"># 如果不添加转义字符会无法换行</span></span><br><span class="line">Hello World </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> printY <span class="operator">&lt;-</span> print<span class="punctuation">(</span>varY<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello World\n&quot;</span>			<span class="comment"># 使用 print() 直接将转义字符进行了输出</span></span><br><span class="line"><span class="operator">&gt;</span> catY   <span class="operator">&lt;-</span> cat<span class="punctuation">(</span>varY<span class="punctuation">)</span></span><br><span class="line">Hello World					<span class="comment"># 使用 cat() 没有将转义字符直接输出, 而是转化成了响应的格式, 如&quot;换行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>printX<span class="punctuation">)</span>				<span class="comment"># print() 有返回值</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>catX<span class="punctuation">)</span>				<span class="comment"># cat() 没有返回值</span></span><br><span class="line"><span class="literal">NULL</span></span><br></pre></td></tr></table></figure>

<ul>
<li>变量的查看：<code>ls()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> ls<span class="punctuation">(</span><span class="punctuation">)</span>						<span class="comment"># 输出所有变量</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;catX&quot;</span>     <span class="string">&quot;catY&quot;</span>     <span class="string">&quot;cyl.f&quot;</span>    <span class="string">&quot;printX&quot;</span>   <span class="string">&quot;printY&quot;</span>   <span class="string">&quot;score&quot;</span>    <span class="string">&quot;tempdens&quot;</span> <span class="string">&quot;var1&quot;</span>     <span class="string">&quot;var2&quot;</span>     <span class="string">&quot;var3&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;varX&quot;</span>     <span class="string">&quot;varY&quot;</span>    </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> ls<span class="punctuation">(</span>pattern <span class="operator">=</span> <span class="string">&quot;var&quot;</span><span class="punctuation">)</span> 		<span class="comment"># 模式匹配部分变量, 包含 &quot;var&quot; 的</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;var1&quot;</span> <span class="string">&quot;var2&quot;</span> <span class="string">&quot;var3&quot;</span> <span class="string">&quot;varX&quot;</span> <span class="string">&quot;varY&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> ls<span class="punctuation">(</span>pattern <span class="operator">=</span> <span class="string">&quot;*&quot;</span><span class="punctuation">)</span>			<span class="comment"># 模式匹配部分变量, 使用通配符</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;catX&quot;</span>     <span class="string">&quot;catY&quot;</span>     <span class="string">&quot;cyl.f&quot;</span>    <span class="string">&quot;printX&quot;</span>   <span class="string">&quot;printY&quot;</span>   <span class="string">&quot;score&quot;</span>    <span class="string">&quot;tempdens&quot;</span> <span class="string">&quot;var1&quot;</span>     <span class="string">&quot;var2&quot;</span>     <span class="string">&quot;var3&quot;</span>    </span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;varX&quot;</span>     <span class="string">&quot;varY&quot;</span>    </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> ls<span class="punctuation">(</span>pattern <span class="operator">=</span> <span class="string">&quot;2&quot;</span><span class="punctuation">)</span>			<span class="comment"># 模式匹配部分变量, 包含 &quot;2&quot; 的</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;var2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> ls<span class="punctuation">(</span>all.names <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span>		<span class="comment"># </span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;.Random.seed&quot;</span> <span class="string">&quot;catX&quot;</span>         <span class="string">&quot;catY&quot;</span>         <span class="string">&quot;cyl.f&quot;</span>        <span class="string">&quot;printX&quot;</span>       <span class="string">&quot;printY&quot;</span>       <span class="string">&quot;score&quot;</span>       </span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">]</span> <span class="string">&quot;tempdens&quot;</span>     <span class="string">&quot;var1&quot;</span>         <span class="string">&quot;var2&quot;</span>         <span class="string">&quot;var3&quot;</span>         <span class="string">&quot;varX&quot;</span>         <span class="string">&quot;varY&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>变量的删除：<code>rm()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> rm<span class="punctuation">(</span><span class="string">&quot;var1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;var2&quot;</span><span class="punctuation">)</span>				<span class="comment"># 删除 &quot;var1&quot; 和 &quot;var2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> rm<span class="punctuation">(</span><span class="built_in">list</span> <span class="operator">=</span> ls<span class="punctuation">(</span>pattern <span class="operator">=</span> <span class="string">&quot;var&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span>	<span class="comment"># 删除 匹配到 &quot;var&quot; 的变量, list 是一个可以指定的参数</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> rmlist <span class="operator">=</span> ls<span class="punctuation">(</span>pattern <span class="operator">=</span> <span class="string">&quot;X&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> rmlist</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;catX&quot;</span>   <span class="string">&quot;printX&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> rm<span class="punctuation">(</span><span class="built_in">list</span> <span class="operator">=</span> rmlist<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>[⭐] 变量的数据类型判别和转换</p>
<ul>
<li>判别：<code>is.XXX()</code>，返回 <code>True/False</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 数值型(Numeric)</span></span><br><span class="line"><span class="operator">&gt;</span> varNumeric <span class="operator">=</span> <span class="number">12.5</span></span><br><span class="line"><span class="operator">&gt;</span> varNumeric</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12.5</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.numeric</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.logical</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.integer</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.character</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.complex</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.raw</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 逻辑型(Logical)</span></span><br><span class="line"><span class="operator">&gt;</span> varLogical <span class="operator">=</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> varLogical</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.numeric</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.logical</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.integer</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.character</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.complex</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.raw</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>

<ul>
<li>转换：<code>as.XXX()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 变量类型转换</span></span><br><span class="line"><span class="operator">&gt;</span> varNumToChar <span class="operator">&lt;-</span> <span class="built_in">as.character</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> varNumToChar</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;12.5&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.numeric</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.logical</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.integer</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.character</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span>	<span class="operator">&lt;-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span><span class="operator">-</span> 可以看到已经转换成了字符型</span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.complex</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.raw</span><span class="punctuation">(</span>varNumToChar<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>[⭐] 变量的数据类型查看</p>
<ul>
<li><code>mode()</code>：查看数据元素类型</li>
<li><code>typeof()</code>：查看数据元素类型，基本等同于 <code>mode()</code> ，比 <code>mode()</code> 更为详细</li>
<li><code>class()</code>：查看数据结构，<code>vector</code>、<code>matrix</code>、<code>array</code>、<code>dataframe</code>、<code>list</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 查看变量类型</span></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;double&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varNumeric<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;logical&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;logical&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varLogical<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;logical&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varInteger<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;numeric&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varInteger<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varInteger<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varCharacter<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varCharacter<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varCharacter<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varComplex<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;complex&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varComplex<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;complex&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varComplex<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;complex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> mode<span class="punctuation">(</span>varRaw<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;raw&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> typeof<span class="punctuation">(</span>varRaw<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;raw&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>varRaw<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;raw&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>[⭐] 字符串的应用</p>
<ul>
<li>R语言中的文本，或者原子数据类型中 <code>Character</code>。在 R 语言中的单引号<code>&#39; &#39;</code> 或 双引号<code>&quot; &quot;</code> 中写入的任何值都被视为字符串。在字符串构造中应用的规则：<ul>
<li>在字符串的开头和结尾的引号应该是两个双引号或两个单引号。它们不能被混合。</li>
<li>双引号可以插入到以单引号开头和结尾的字符串中</li>
<li>单引号可以插入以双引号开头和结尾的字符串。</li>
<li>双引号不能插入以双引号开头和结尾的字符串。</li>
<li>单引号不能插入以单引号开头和结尾的字符串。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="2-7-R-语言的运算符的概念和使用"><a href="#2-7-R-语言的运算符的概念和使用" class="headerlink" title="2.7 R 语言的运算符的概念和使用"></a>2.7 R 语言的运算符的概念和使用</h4><ul>
<li><p>运算符的概念</p>
</li>
<li><p>算数运算符</p>
<ul>
<li><code>+</code>加、<code>-</code>减、<code>*</code>乘、<code>/</code>除</li>
<li><code>%%</code> 整除取余</li>
<li><code>%/%</code> 整除</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 相除</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="number">6</span> <span class="operator">/</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1.5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># %% 整除取余</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="number">6</span> <span class="operator">%%</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># %/% 整除</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="number">6</span> <span class="operator">%/%</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关系运算符</p>
<ul>
<li><code>&lt;</code> 小于、<code>&gt;</code> 大于、<code>=</code> 等于</li>
<li><code>&lt;=</code>小于等于、<code>&gt;=</code> 大于等于</li>
<li><code>!=</code> 不等于</li>
</ul>
</li>
<li><p>逻辑运算符</p>
<ul>
<li><code>&amp;</code></li>
<li><code>|</code></li>
<li><code>&amp;&amp;</code></li>
<li><code>||</code></li>
</ul>
<p><strong><code>&amp;&amp;</code>和<code>||</code>为值逻辑，<code>&amp;</code>和<code>|</code>为位逻辑</strong><br>说人话就是，<code>&amp;&amp;</code> 和 <code>||</code>是讲两个操作目的值做逻辑运算，无论操作对象是向量还是标量，返回值都是一个逻辑值，（NOW）<code>&amp;&amp;</code> 和 <code>||</code> 运算符只接受长度为 1 的逻辑值作为参数；而 <code>&amp;</code> 和 <code>|</code> 是讲两个对象按位比较，其返回值的长度与对象是标量还是向量有关。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 逻辑运算符</span></span><br><span class="line"><span class="operator">&gt;</span> v <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span>  <span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="literal">FALSE</span><span class="punctuation">,</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v<span class="operator">&amp;</span>t<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> v <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="number">2</span><span class="operator">+</span><span class="number">2i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v <span class="operator">&amp;&amp;</span> t<span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> v <span class="operator">&amp;&amp;</span> t <span class="operator">:</span> <span class="string">&#x27;length = 4&#x27;</span> <span class="keyword">in</span> coercion to <span class="string">&#x27;logical(1)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="literal">TRUE</span> <span class="operator">&amp;&amp;</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="literal">TRUE</span> <span class="operator">&amp;&amp;</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="literal">FALSE</span> <span class="operator">&amp;&amp;</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="literal">FALSE</span> <span class="operator">&amp;&amp;</span> <span class="literal">FALSE</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>赋值运算符</p>
<ul>
<li><code>&lt;-</code></li>
<li><code>=</code></li>
<li><code>-&gt;</code></li>
<li><code>&lt;&lt;-</code></li>
<li><code>-&gt;&gt;</code></li>
</ul>
<p><code>&lt;−</code> 或 <code>=</code> 或 <code>&lt;&lt;−</code> 运算符： 称为左赋值。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 赋值运算符</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 左赋值</span></span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v2 <span class="operator">&lt;&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v3 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v2<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v3<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br></pre></td></tr></table></figure>

<p><code>-&gt;</code> 或 <code>-&gt;&gt;</code> 运算符：称为右赋值。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 右赋值</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span> <span class="operator">-&gt;</span> v1</span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">+</span><span class="number">3i</span><span class="punctuation">)</span> <span class="operator">-&gt;&gt;</span> v2 </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v2<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">1</span><span class="operator">+</span><span class="number">0i</span> <span class="number">2</span><span class="operator">+</span><span class="number">3i</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>其他运算符</p>
<ul>
<li><code>:</code> 为向量创建数字序列。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> v <span class="operator">&lt;-</span> 2<span class="operator">:</span><span class="number">8</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>%in%</code> 用于确定元素是否属于向量。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">&lt;-</span> 8</span><br><span class="line"><span class="operator">&gt;</span> v2 <span class="operator">&lt;-</span> 12</span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v1 <span class="operator">%in%</span> t<span class="punctuation">)</span>	<span class="comment">#  8 是否再 1~10 中</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>v2 <span class="operator">%in%</span> t<span class="punctuation">)</span>	<span class="comment"># 12 是否再 1~10 中</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>%*%</code> 用于求两个向量的内积，也称为点乘</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> M <span class="operator">=</span> matrix<span class="punctuation">(</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> ncol <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># M</span></span><br><span class="line"><span class="number">2</span><span class="punctuation">,</span>  <span class="number">6</span><span class="punctuation">,</span> <span class="number">5</span></span><br><span class="line"><span class="number">1</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># t(M)</span></span><br><span class="line"><span class="number">2</span><span class="punctuation">,</span>  <span class="number">1</span></span><br><span class="line"><span class="number">6</span><span class="punctuation">,</span> <span class="number">10</span></span><br><span class="line"><span class="number">5</span><span class="punctuation">,</span>  <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># M %*% t(M)</span></span><br><span class="line"><span class="number">2</span><span class="operator">*</span><span class="number">2</span> <span class="operator">+</span>  <span class="number">6</span><span class="operator">*</span><span class="number">6</span> <span class="operator">+</span> <span class="number">5</span><span class="operator">*</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">*</span><span class="number">2</span> <span class="operator">+</span> <span class="number">10</span><span class="operator">*</span> <span class="number">6</span> <span class="operator">+</span> <span class="number">4</span><span class="operator">*</span><span class="number">5</span></span><br><span class="line"><span class="number">2</span><span class="operator">*</span><span class="number">1</span> <span class="operator">+</span> <span class="number">10</span><span class="operator">*</span><span class="number">6</span> <span class="operator">+</span> <span class="number">4</span><span class="operator">*</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">*</span><span class="number">1</span> <span class="operator">+</span> <span class="number">10</span><span class="operator">*</span><span class="number">10</span> <span class="operator">+</span> <span class="number">4</span><span class="operator">*</span><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">=</span> M <span class="operator">%*%</span> t<span class="punctuation">(</span>M<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>t<span class="punctuation">)</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">65</span>   <span class="number">82</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">82</span>  <span class="number">117</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment">#===================================================================#</span></span><br><span class="line"><span class="operator">&gt;</span> M <span class="operator">=</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span>ncol <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> N <span class="operator">=</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> ncol <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> byrow <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">=</span> M <span class="operator">%*%</span> N</span><br><span class="line"><span class="operator">&gt;</span> print<span class="punctuation">(</span>t<span class="punctuation">)</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">45</span>   <span class="number">58</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">51</span>   <span class="number">66</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-8-R-语言的六大数据对象"><a href="#2-8-R-语言的六大数据对象" class="headerlink" title="2.8 R 语言的六大数据对象"></a>2.8 R 语言的六大数据对象</h4><p>R 语言有六种基本的数据结构（数据对象）：向量<code>vector</code>、列表<code>list</code>、矩阵<code>matrix</code>、数组<code>array</code>、数据框<code>data.frame</code> 和 因子<code>factor</code> 类型。</p>
<h5 id="2-8-1-向量-vector"><a href="#2-8-1-向量-vector" class="headerlink" title="2.8.1 向量 vector"></a>2.8.1 向量 <code>vector</code></h5><ul>
<li><p>概念：向量是最基本的 R 语言数据对象，向量的元素支持六种原子数据类型，即逻辑，整数，双精度，复合，字符和原型。</p>
</li>
<li><p>特征：一个向量的所有元素都必须属于<strong>相同的类型</strong>。如果不是，R将强制执行类型转换。</p>
</li>
<li><p>创建向量：<code>c()</code>、<code>seq()</code>、<code>rep()</code></p>
<ul>
<li><code>c()</code> 这里的<code>c</code>就是 <em>combine</em> 或 <em>concatenate</em> 的意思，它要求元素之间用<strong>英文的逗号</strong>分隔，且元素的数据类型是统一的，比如都是数值。<code>c()</code> 函数把一组数据聚合到了一起，就构成了一个<strong>向量</strong>。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 创建向量</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 使用 c()</span></span><br><span class="line"><span class="operator">&gt;</span> low      <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> high     <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> sequence <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span>low<span class="punctuation">,</span> high<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> sequence</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 给变量命名</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span> <span class="operator">=</span> <span class="number">5</span><span class="punctuation">,</span> <span class="string">&#x27;b&#x27;</span> <span class="operator">=</span> <span class="number">6</span><span class="punctuation">,</span> <span class="string">&#x27;c&#x27;</span> <span class="operator">=</span> <span class="number">7</span><span class="punctuation">,</span> <span class="string">&#x27;d&#x27;</span> <span class="operator">=</span> <span class="number">8</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line">a b <span class="built_in">c</span> d </span><br><span class="line"><span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> </span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">names</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&#x27;a&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;b&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;c&#x27;</span><span class="punctuation">,</span> <span class="string">&#x27;d&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line">a b <span class="built_in">c</span> d </span><br><span class="line"><span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> </span><br></pre></td></tr></table></figure>

<p>如果向量元素很多，用手工一个个去输入，那就成了体力活，不现实。<strong>在特定情况下</strong>，有几种偷懒方法:</p>
<ul>
<li><code>seq()</code> 函数可以生成等差数列，<code>from</code> 参数指定数列的起始值，<code>to</code> 参数指定数列的终止值，<code>by</code> 参数指定数值的间距。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 使用 seq()</span></span><br><span class="line"><span class="operator">&gt;</span> s1 <span class="operator">&lt;-</span> seq<span class="punctuation">(</span>from <span class="operator">=</span> <span class="number">0</span><span class="punctuation">,</span> to <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> by <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> s1</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">0.0</span>  <span class="number">0.5</span>  <span class="number">1.0</span>  <span class="number">1.5</span>  <span class="number">2.0</span>  <span class="number">2.5</span>  <span class="number">3.0</span>  <span class="number">3.5</span>  <span class="number">4.0</span>  <span class="number">4.5</span>  <span class="number">5.0</span>  <span class="number">5.5</span>  <span class="number">6.0</span>  <span class="number">6.5</span>  <span class="number">7.0</span>  <span class="number">7.5</span>  <span class="number">8.0</span>  <span class="number">8.5</span>  <span class="number">9.0</span>  <span class="number">9.5</span> <span class="number">10.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>rep()</code> 是 <em>repeat</em>（重复）的意思，可以用于产生重复出现的数字序列：<code>x</code> 用于重复的向量，<code>times</code> 参数可以指定要生成的个数，<code>each</code> 参数可以指定每个元素重复的次数。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> s2 <span class="operator">&lt;-</span> <span class="built_in">rep</span><span class="punctuation">(</span>x <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> times <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> s2</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> s3 <span class="operator">&lt;-</span> <span class="built_in">rep</span><span class="punctuation">(</span>x <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> each <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> s3</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> s4 <span class="operator">&lt;-</span> <span class="built_in">rep</span><span class="punctuation">(</span>x <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> time <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> each <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> s4</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>向量元素访问</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 定义一个向量</span></span><br><span class="line"><span class="operator">&gt;</span> t <span class="operator">&lt;-</span> seq<span class="punctuation">(</span>from <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> to <span class="operator">=</span> <span class="number">20</span><span class="punctuation">,</span> by <span class="operator">=</span> <span class="number">0.4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> t</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.0</span> <span class="number">10.4</span> <span class="number">10.8</span> <span class="number">11.2</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.4</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.0</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">15.6</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.2</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">18.8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">24</span><span class="punctuation">]</span> <span class="number">19.2</span> <span class="number">19.6</span> <span class="number">20.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>t[index]</code>：使用这种方式进行访问，<code>index</code> 默认从 1 开始。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 方式 1</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.4</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>t[Logic Index]</code>： <code>TRUE</code> 表示读取，<code>FALSE</code> 为不读取。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 方式 2</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="literal">TRUE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="literal">FALSE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.0</span> <span class="number">10.4</span> <span class="number">11.2</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">19.2</span> <span class="number">19.6</span> <span class="number">20.0</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10.0</span> <span class="number">10.4</span> <span class="number">10.8</span> <span class="number">10.0</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12</span> <span class="number">10</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>t[name]</code>：通过 <code>name</code> 进行访问。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 方式 3</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">names</span><span class="punctuation">(</span>t<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;v1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v3&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v4&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v5&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v6&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v7&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v8&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v9&quot;</span><span class="punctuation">,</span> <span class="string">&quot;v10&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> t</span><br><span class="line">  v1   v2   v3   v4   v5   v6   v7   v8   v9  v10 <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">10.0</span> <span class="number">10.4</span> <span class="number">10.8</span> <span class="number">11.2</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.4</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.0</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">15.6</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.2</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">18.8</span> </span><br><span class="line"><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">19.2</span> <span class="number">19.6</span> <span class="number">20.0</span> </span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="string">&quot;v1&quot;</span><span class="punctuation">]</span></span><br><span class="line">v1 </span><br><span class="line"><span class="number">10</span> </span><br></pre></td></tr></table></figure>

<ul>
<li><code>t[-index]</code>：索引为负数，则会删除该位置的元素。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 方式 4</span></span><br><span class="line"><span class="operator">&gt;</span> t</span><br><span class="line">  v1   v2   v3   v4   v5   v6   v7   v8   v9  v10 <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">10.0</span> <span class="number">10.4</span> <span class="number">10.8</span> <span class="number">11.2</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.4</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.0</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">15.6</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.2</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">18.8</span> </span><br><span class="line"><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">19.2</span> <span class="number">19.6</span> <span class="number">20.0</span> </span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line">  v2   v3   v4   v5   v6   v7   v8   v9  v10 <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">10.4</span> <span class="number">10.8</span> <span class="number">11.2</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.4</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.0</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">15.6</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.2</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">18.8</span> <span class="number">19.2</span> </span><br><span class="line"><span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">19.6</span> <span class="number">20.0</span> </span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">2</span><span class="operator">:</span> <span class="operator">-</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">  v1   v5   v6   v7   v8   v9  v10 <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span> </span><br><span class="line"><span class="number">10.0</span> <span class="number">11.6</span> <span class="number">12.0</span> <span class="number">12.4</span> <span class="number">12.8</span> <span class="number">13.2</span> <span class="number">13.6</span> <span class="number">14.0</span> <span class="number">14.4</span> <span class="number">14.8</span> <span class="number">15.2</span> <span class="number">15.6</span> <span class="number">16.0</span> <span class="number">16.4</span> <span class="number">16.8</span> <span class="number">17.2</span> <span class="number">17.6</span> <span class="number">18.0</span> <span class="number">18.4</span> <span class="number">18.8</span> <span class="number">19.2</span> <span class="number">19.6</span> <span class="number">20.0</span> </span><br></pre></td></tr></table></figure>
</li>
<li><p>向量元素运算</p>
<ul>
<li>长度相同的向量</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 长度不同的向量</span></span><br><span class="line"><span class="operator">&gt;</span> v3 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v4 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> add.result <span class="operator">=</span> v1 <span class="operator">+</span> v3</span><br><span class="line"><span class="operator">&gt;</span> add.result <span class="operator">=</span> v1 <span class="operator">+</span> v4</span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 向量的运算</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 长度相同的向量</span></span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span>  <span class="number">5</span><span class="punctuation">,</span>  <span class="number">6</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v2 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">11</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> add.result <span class="operator">=</span> v1 <span class="operator">+</span> v2</span><br><span class="line"><span class="operator">&gt;</span> sub.result <span class="operator">=</span> v1 <span class="operator">-</span> v2</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> add.result</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">7</span>  <span class="number">9</span> <span class="number">11</span> <span class="number">13</span> <span class="number">15</span> <span class="number">17</span></span><br><span class="line"><span class="operator">&gt;</span> sub.result</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="operator">-</span><span class="number">5</span> <span class="operator">-</span><span class="number">5</span> <span class="operator">-</span><span class="number">5</span> <span class="operator">-</span><span class="number">5</span> <span class="operator">-</span><span class="number">5</span> <span class="operator">-</span><span class="number">5</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>长度不同的向量</p>
<p>如果长度不同，较短的向量会循环补充到与较长的向量长度相同，在进行运算。但是前提是：长的向量的长度必须为短的向量的整数倍。</p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 长度不同的向量</span></span><br><span class="line"><span class="operator">&gt;</span> v3 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v4 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">20</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> add.result <span class="operator">=</span> v1 <span class="operator">+</span> v3</span><br><span class="line"><span class="operator">&gt;</span> add.result</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">11</span> <span class="number">22</span> <span class="number">13</span> <span class="number">24</span> <span class="number">15</span> <span class="number">26</span></span><br><span class="line"><span class="operator">&gt;</span> add.result <span class="operator">=</span> v1 <span class="operator">+</span> v4</span><br><span class="line"><span class="operator">&gt;</span> add.result</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">11</span> <span class="number">22</span> <span class="number">13</span> <span class="number">24</span> <span class="number">15</span> <span class="number">26</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2-8-2-列表-list"><a href="#2-8-2-列表-list" class="headerlink" title="2.8.2 列表 list"></a>2.8.2 列表 <code>list</code></h5><ul>
<li>概念：列表是 R 语言的对象集合，可以用来保存<strong>不同类型</strong>的数据，可以是数字、字符串、向量、另一个列表等，当然还可以包含矩阵和函数。R语言创建列表使用 <code>list()</code> 函数。</li>
<li>列表的创建</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 列表的创建</span></span><br><span class="line"><span class="operator">&gt;</span> list_data <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&quot;Hello&quot;</span><span class="punctuation">,</span> <span class="string">&quot;World&quot;</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="number">51.23</span><span class="punctuation">,</span> <span class="number">119L</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">5</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">51.23</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">6</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">119</span></span><br></pre></td></tr></table></figure>

<ul>
<li>列表元素的重命名(<code>names</code> 函数)</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 列表的重命名</span></span><br><span class="line"><span class="operator">&gt;</span> list_data <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Hello&quot;</span><span class="punctuation">,</span> <span class="string">&quot;World&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">,</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&quot;Happy&quot;</span><span class="punctuation">,</span> <span class="number">1314L</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">names</span><span class="punctuation">(</span>list_data<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;HelloString&quot;</span><span class="punctuation">,</span> <span class="string">&quot;MatrixElem&quot;</span><span class="punctuation">,</span> <span class="string">&quot;ListElem&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>MatrixElem</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>列表元素的访问——增删改查</p>
<ul>
<li>查</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># (查)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 根据索引访问</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span></span><br><span class="line">named <span class="built_in">list</span><span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 根据元素名称访问</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="operator">$</span>ListElem</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span><span class="operator">&lt;-</span><span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>MatrixElem</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>增</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># (增)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span><span class="operator">&lt;-</span><span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>MatrixElem</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>改</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># (改)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>MatrixElem</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># (删)</span></span><br><span class="line"><span class="operator">&gt;</span> list_data<span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span> <span class="operator">&lt;-</span> <span class="literal">NULL</span></span><br><span class="line"><span class="operator">&gt;</span> list_data</span><br><span class="line"><span class="operator">$</span>HelloString</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Hello&quot;</span> <span class="string">&quot;World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>MatrixElem</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem</span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;Happy&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">$</span>ListElem<span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1314</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>列表的合并：使用 <code>c</code> 可以将多个列表合并为一个列表</p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 合并列表</span></span><br><span class="line"><span class="operator">&gt;</span> list1 <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list2 <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>list1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>list2<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> merged.list <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span>list1<span class="punctuation">,</span> list2<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> merged.list</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">5</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">6</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>merged.list<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;list&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>列表和向量之间的转换</li>
</ul>
  <figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 列表转换为向量</span></span><br><span class="line"><span class="operator">&gt;</span> list1 <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="number">1</span> <span class="operator">:</span>  <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list2 <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="number">10</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list3 <span class="operator">&lt;-</span> <span class="built_in">list</span><span class="punctuation">(</span><span class="string">&quot;hello&quot;</span><span class="punctuation">,</span> matrix<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> list1</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> list2</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> list3</span><br><span class="line"><span class="punctuation">[[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">3</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">[[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">&lt;-</span> unlist<span class="punctuation">(</span>list1<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v2 <span class="operator">&lt;-</span> unlist<span class="punctuation">(</span>list2<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v3 <span class="operator">&lt;-</span> unlist<span class="punctuation">(</span>list3<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>v1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>v2<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>v3<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> v3</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;hello&quot;</span> <span class="string">&quot;1&quot;</span>     <span class="string">&quot;2&quot;</span>     <span class="string">&quot;3&quot;</span>     <span class="string">&quot;4&quot;</span>     <span class="string">&quot;3&quot;</span>    </span><br></pre></td></tr></table></figure>

<h5 id="2-8-3-矩阵-matrix"><a href="#2-8-3-矩阵-matrix" class="headerlink" title="2.8.3 矩阵 matrix"></a>2.8.3 矩阵 <code>matrix</code></h5><ul>
<li>概念：<code>R</code> 语言为线性代数的研究提供了矩阵类型，这种数据结构很类似于其它语言中的二维数组。</li>
<li>矩阵的创建</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵的创建</span></span><br><span class="line"><span class="operator">&gt;</span> m1 <span class="operator">=</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m1</span><br><span class="line">      <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">7</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">6</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">8</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">7</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">9</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">8</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">10</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">9</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">10</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">12</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">12</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> m2 <span class="operator">=</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m2</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> m2 <span class="operator">=</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">,</span> ncol<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m2</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span>   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> m3 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">4</span><span class="punctuation">,</span> byrow<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span>		<span class="comment"># 默认为 TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> m3</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">14</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> rownames <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;row2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;row3&quot;</span><span class="punctuation">,</span> <span class="string">&quot;row4&quot;</span><span class="punctuation">)</span> </span><br><span class="line"><span class="operator">&gt;</span> colnames <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;col1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;col2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;col3&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m4 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">4</span><span class="punctuation">,</span> byrow<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">,</span> <span class="built_in">dimnames</span><span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>rownames<span class="punctuation">,</span> colnames<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m4</span><br><span class="line">     col1 col2 col3</span><br><span class="line">row1    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span></span><br><span class="line">row2    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span></span><br><span class="line">row3    <span class="number">9</span>   <span class="number">10</span>   <span class="number">11</span></span><br><span class="line">row4   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span></span><br></pre></td></tr></table></figure>

<ul>
<li>矩阵转置</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵转置 t()</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># R 语言矩阵提供了 t() 函数, 可以实现矩阵的行列转换</span></span><br><span class="line"><span class="operator">&gt;</span> t<span class="punctuation">(</span>m4<span class="punctuation">)</span></span><br><span class="line">     row1 row2 row3 row4</span><br><span class="line">col1    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line">col2    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span>   <span class="number">13</span></span><br><span class="line">col3    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span>   <span class="number">14</span></span><br></pre></td></tr></table></figure>

<ul>
<li>矩阵元素访问</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> m4<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;row1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;row4&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;col1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;col3&quot;</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line">     col1 col3</span><br><span class="line">row1    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line">row4   <span class="number">12</span>   <span class="number">14</span></span><br></pre></td></tr></table></figure>

<ul>
<li>矩阵相关操作</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵元素操作</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵计算</span></span><br><span class="line"><span class="operator">&gt;</span> m1 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="operator">:</span> <span class="number">14</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m1</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> m2 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span> <span class="number">12</span><span class="punctuation">)</span><span class="punctuation">,</span> nrow<span class="operator">=</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> m2</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span> m1 <span class="operator">+</span> m2</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">4</span>   <span class="number">12</span>   <span class="number">20</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">6</span>   <span class="number">14</span>   <span class="number">22</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">8</span>   <span class="number">16</span>   <span class="number">24</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">10</span>   <span class="number">18</span>   <span class="number">26</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵转换 </span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵 -&gt; 向量</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.matrix</span><span class="punctuation">(</span>m1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>m1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;matrix&quot;</span> <span class="string">&quot;array&quot;</span> </span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">&lt;-</span> as.vector<span class="punctuation">(</span>m1<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v1</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>v1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 矩阵组合</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># cbind() 把其自变量横向拼成一个大矩阵, 横向组合, 行数一致</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># rbind() 把其自变量纵向拼成一个大矩阵, 纵向组合, 列数一致</span></span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v2 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span> <span class="number">7</span><span class="punctuation">,</span> <span class="number">8</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> y1 <span class="operator">=</span> cbind<span class="punctuation">(</span>v1<span class="punctuation">,</span> v2<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> y2 <span class="operator">=</span> rbind<span class="punctuation">(</span>v1<span class="punctuation">,</span> v2<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> y1</span><br><span class="line">     v1 v2</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">2</span>  <span class="number">7</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">3</span>  <span class="number">8</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">4</span>  <span class="number">9</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">5</span><span class="punctuation">,</span><span class="punctuation">]</span>  <span class="number">5</span> <span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> y2</span><br><span class="line">   <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">]</span></span><br><span class="line">v1    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span></span><br><span class="line">v2    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>   <span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br></pre></td></tr></table></figure>

<h5 id="2-8-4-数组-array"><a href="#2-8-4-数组-array" class="headerlink" title="2.8.4 数组 array"></a>2.8.4 数组 <code>array</code></h5><ul>
<li>概念：数组也是 <code>R</code> 语言的对象，<code>R</code> 语言可以创建一维或多维数组。</li>
<li>数组的创建</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 创建数组</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 一维数组</span></span><br><span class="line"><span class="operator">&gt;</span> v1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a1 <span class="operator">&lt;-</span> array<span class="punctuation">(</span>v1<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a1</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span> <span class="number">9</span> <span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.array</span><span class="punctuation">(</span>a1<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="number">10</span><span class="operator">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="number">9</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span> a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="number">10</span><span class="operator">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">10</span> <span class="number">11</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 二维数组</span></span><br><span class="line"><span class="operator">&gt;</span> a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="number">10</span><span class="operator">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span>   <span class="comment"># 10, 11, 12, 13, 14, 15</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">10</span>   <span class="number">12</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">13</span>   <span class="number">15</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">is.array</span><span class="punctuation">(</span>a<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 三维数组</span></span><br><span class="line"><span class="operator">&gt;</span> a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="number">10</span><span class="operator">:</span> <span class="number">15</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> <span class="number">1</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">10</span>   <span class="number">12</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">13</span>   <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> <span class="number">2</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">10</span>   <span class="number">12</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>   <span class="number">11</span>   <span class="number">13</span>   <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> column.names <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;COL1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;COL2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;COL3&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> row.names <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;ROW1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;ROW2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;ROW3&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> matrix.names <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Matrix1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Matrix2&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> vector1 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">9</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> vector2 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">11</span><span class="punctuation">,</span> <span class="number">12</span><span class="punctuation">,</span> <span class="number">13</span><span class="punctuation">,</span> <span class="number">14</span><span class="punctuation">,</span> <span class="number">15</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span>vector1<span class="punctuation">,</span> vector2<span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">dimnames</span> <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>row.names<span class="punctuation">,</span> column.names<span class="punctuation">,</span> matrix.names<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> a</span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> Matrix1</span><br><span class="line">     COL1 COL2 COL3</span><br><span class="line">ROW1    <span class="number">5</span>   <span class="number">10</span>   <span class="number">13</span></span><br><span class="line">ROW2    <span class="number">9</span>   <span class="number">11</span>   <span class="number">14</span></span><br><span class="line">ROW3    <span class="number">3</span>   <span class="number">12</span>   <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> Matrix2</span><br><span class="line">     COL1 COL2 COL3</span><br><span class="line">ROW1    <span class="number">5</span>   <span class="number">10</span>   <span class="number">13</span></span><br><span class="line">ROW2    <span class="number">9</span>   <span class="number">11</span>   <span class="number">14</span></span><br><span class="line">ROW3    <span class="number">3</span>   <span class="number">12</span>   <span class="number">15</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组元素访问</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 数组访问</span></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>    <span class="comment"># 一维数组的访问</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">]</span> <span class="comment"># 一维数组的访问——向量访问</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">5</span>  <span class="number">9</span>  <span class="number">3</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> dim2_a <span class="operator">&lt;-</span> array<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span>vector1<span class="punctuation">,</span> vector2<span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> dim2_a</span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>   <span class="number">10</span>   <span class="number">13</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">9</span>   <span class="number">11</span>   <span class="number">14</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">3</span>   <span class="number">12</span>   <span class="number">15</span></span><br><span class="line"><span class="operator">&gt;</span> dim2_a<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">1</span><span class="punctuation">]</span>       <span class="comment"># 二维数组的访问, 访问的必须是二维数组</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span></span><br><span class="line"><span class="operator">&gt;</span> dim2_a<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span> <span class="number">2</span><span class="punctuation">]</span> <span class="comment"># 二维数组的访问——矩阵访问</span></span><br><span class="line">     <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">[</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">5</span>   <span class="number">10</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span>    <span class="number">9</span>   <span class="number">11</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span>    <span class="comment"># 三维数组</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">15</span></span><br></pre></td></tr></table></figure>

<h5 id="2-8-5-数据框-data-frame"><a href="#2-8-5-数据框-data-frame" class="headerlink" title="2.8.5 数据框 data.frame"></a>2.8.5 数据框 <code>data.frame</code></h5><ul>
<li><p>概念：数据框 <code>DataFrame</code> 可以理解成我们常说的<strong>表格</strong>，数据框是 <code>R</code> 语言的数据结构，是特殊的二维列表。数据框每一列都有一个唯一的列名，长度都是相等的，同一列的数据类型需要一致，不同列的数据类型可以不一样。数据框的特点：</p>
<ul>
<li>列名称应为非空。</li>
<li>行名称应该是唯一的。</li>
<li>存储在数据框中的数据可以是数字，字符型等。</li>
<li>每个列应包含相同数量的数据项。</li>
</ul>
</li>
<li><p>数据框的创建</p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 数据框</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 创建数据框对象</span></span><br><span class="line"><span class="operator">&gt;</span> df1 <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span></span><br><span class="line"><span class="operator">+</span>   <span class="comment"># tag = value</span></span><br><span class="line"><span class="operator">+</span>   姓名 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span> <span class="string">&quot;王五&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   工号 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;001&quot;</span><span class="punctuation">,</span> <span class="string">&quot;002&quot;</span><span class="punctuation">,</span> <span class="string">&quot;003&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   月薪 <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1000</span><span class="punctuation">,</span> <span class="number">2000</span><span class="punctuation">,</span> <span class="number">3000</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> df1</span><br><span class="line">  姓名 工号 月薪</span><br><span class="line"><span class="number">1</span> 张三  <span class="number">001</span> <span class="number">1000</span></span><br><span class="line"><span class="number">2</span> 李四  <span class="number">002</span> <span class="number">2000</span></span><br><span class="line"><span class="number">3</span> 王五  <span class="number">003</span> <span class="number">3000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看数据框结构</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 查看数据框结构(Structure)</span></span><br><span class="line"><span class="operator">&gt;</span> str<span class="punctuation">(</span>df1<span class="punctuation">)</span></span><br><span class="line"><span class="string">&#x27;data.frame&#x27;</span><span class="operator">:</span>	<span class="number">3</span> obs. of  <span class="number">3</span> variables<span class="operator">:</span></span><br><span class="line"> <span class="operator">$</span> 姓名<span class="operator">:</span> chr  <span class="string">&quot;张三&quot;</span> <span class="string">&quot;李四&quot;</span> <span class="string">&quot;王五&quot;</span></span><br><span class="line"> <span class="operator">$</span> 工号<span class="operator">:</span> chr  <span class="string">&quot;001&quot;</span> <span class="string">&quot;002&quot;</span> <span class="string">&quot;003&quot;</span></span><br><span class="line"> <span class="operator">$</span> 月薪<span class="operator">:</span> num  <span class="number">1000</span> <span class="number">2000</span> <span class="number">3000</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 查看数据框描述性统计量</span></span><br><span class="line"><span class="operator">&gt;</span> summary<span class="punctuation">(</span>df1<span class="punctuation">)</span></span><br><span class="line">     姓名               工号                月薪     </span><br><span class="line"> Length<span class="operator">:</span><span class="number">3</span>           Length<span class="operator">:</span><span class="number">3</span>           Min.   <span class="operator">:</span><span class="number">1000</span>  </span><br><span class="line"> Class <span class="operator">:</span>character   Class <span class="operator">:</span>character   <span class="number">1</span>st Qu.<span class="operator">:</span><span class="number">1500</span>  </span><br><span class="line"> Mode  <span class="operator">:</span>character   Mode  <span class="operator">:</span>character   Median <span class="operator">:</span><span class="number">2000</span>  </span><br><span class="line">                                       Mean   <span class="operator">:</span><span class="number">2000</span>  </span><br><span class="line">                                       <span class="number">3</span>rd Qu.<span class="operator">:</span><span class="number">2500</span>  </span><br><span class="line">                                       Max.   <span class="operator">:</span><span class="number">3000</span>  </span><br></pre></td></tr></table></figure>

<ul>
<li>数据框访问、新增列</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 提取数据框中的列</span></span><br><span class="line"><span class="operator">&gt;</span> df1<span class="operator">$</span>姓名</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;张三&quot;</span> <span class="string">&quot;李四&quot;</span> <span class="string">&quot;王五&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> df2 <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>df1<span class="operator">$</span>姓名<span class="punctuation">,</span> df1<span class="operator">$</span>月薪<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> df2</span><br><span class="line">  df1.姓名 df1.月薪</span><br><span class="line"><span class="number">1</span>     张三     <span class="number">1000</span></span><br><span class="line"><span class="number">2</span>     李四     <span class="number">2000</span></span><br><span class="line"><span class="number">3</span>     王五     <span class="number">3000</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 提取数据框中的行</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 提取前两行</span></span><br><span class="line"><span class="operator">&gt;</span> result <span class="operator">&lt;-</span> df1<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">,</span> <span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> result</span><br><span class="line">  姓名 工号 月薪</span><br><span class="line"><span class="number">1</span> 张三  <span class="number">001</span> <span class="number">1000</span></span><br><span class="line"><span class="number">2</span> 李四  <span class="number">002</span> <span class="number">2000</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 提取前两行, 前两列</span></span><br><span class="line"><span class="operator">&gt;</span> result <span class="operator">&lt;-</span> df1<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> result</span><br><span class="line">  姓名 工号 月薪</span><br><span class="line"><span class="number">1</span> 张三  <span class="number">001</span> <span class="number">1000</span></span><br><span class="line"><span class="number">2</span> 李四  <span class="number">002</span> <span class="number">2000</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 提取第1、3行, 第1、2列的数据</span></span><br><span class="line"><span class="operator">&gt;</span> result <span class="operator">&lt;-</span> df1<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="operator">&gt;</span> result</span><br><span class="line">  姓名 工号</span><br><span class="line"><span class="number">1</span> 张三  <span class="number">001</span></span><br><span class="line"><span class="number">3</span> 王五  <span class="number">003</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 新增列</span></span><br><span class="line"><span class="operator">&gt;</span> df1<span class="operator">$</span>部门 <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;运营&quot;</span><span class="punctuation">,</span> <span class="string">&quot;技术&quot;</span><span class="punctuation">,</span> <span class="string">&quot;运营&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> df1</span><br><span class="line">  姓名 工号 月薪 部门</span><br><span class="line"><span class="number">1</span> 张三  <span class="number">001</span> <span class="number">1000</span> 运营</span><br><span class="line"><span class="number">2</span> 李四  <span class="number">002</span> <span class="number">2000</span> 技术</span><br><span class="line"><span class="number">3</span> 王五  <span class="number">003</span> <span class="number">3000</span> 运营</span><br></pre></td></tr></table></figure>

<ul>
<li>数据框合并</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据框合并</span></span><br><span class="line"><span class="comment"># cbind()/rbind()</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数据框筛选</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 数据框筛选</span></span><br><span class="line"><span class="operator">&gt;</span> student <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span></span><br><span class="line"><span class="operator">+</span>   sno <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   sname <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;zhangsan&quot;</span><span class="punctuation">,</span> <span class="string">&quot;lisi&quot;</span><span class="punctuation">,</span> <span class="string">&quot;wangwu&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   sage <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> <span class="number">12</span><span class="punctuation">,</span> <span class="number">14</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> student</span><br><span class="line">  sno    sname sage</span><br><span class="line"><span class="number">1</span>   <span class="number">1</span> zhangsan   <span class="number">10</span></span><br><span class="line"><span class="number">2</span>   <span class="number">2</span>     lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   <span class="number">3</span>   wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>      <span class="comment"># 第一个字段</span></span><br><span class="line">  sno</span><br><span class="line"><span class="number">1</span>   <span class="number">1</span></span><br><span class="line"><span class="number">2</span>   <span class="number">2</span></span><br><span class="line"><span class="number">3</span>   <span class="number">3</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>   <span class="comment"># 第一行, 第二列</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="operator">$</span>sage<span class="operator">&gt;</span><span class="number">12</span> <span class="comment"># FALSE FALSE TRUE</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># [...] 里面一个参数取字段, 两个参数取行列</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span>student<span class="operator">$</span>sage<span class="operator">&gt;</span><span class="number">11</span><span class="punctuation">]</span>          <span class="comment"># 执行判断, 得到结果 c(FALSE, TRUE, TRUE)</span></span><br><span class="line">     sname sage</span><br><span class="line"><span class="number">1</span> zhangsan   <span class="number">10</span></span><br><span class="line"><span class="number">2</span>     lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="literal">FALSE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">)</span><span class="punctuation">]</span>     <span class="comment"># 使用 c(FALSE, TRUE, TRUE) 进行运算</span></span><br><span class="line">     sname sage</span><br><span class="line"><span class="number">1</span> zhangsan   <span class="number">10</span></span><br><span class="line"><span class="number">2</span>     lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span>student<span class="operator">$</span>sage<span class="operator">&gt;</span><span class="number">11</span><span class="punctuation">,</span> <span class="punctuation">]</span>        <span class="comment"># 选择年龄大于 11 的, 并取所有字段</span></span><br><span class="line">  sno  sname sage</span><br><span class="line"><span class="number">2</span>   <span class="number">2</span>   lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   <span class="number">3</span> wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="literal">FALSE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">,</span> <span class="literal">TRUE</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="punctuation">]</span>   <span class="comment"># 选择年龄大于 11 的行, 并取所有字段</span></span><br><span class="line">  sno  sname sage</span><br><span class="line"><span class="number">2</span>   <span class="number">2</span>   lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   <span class="number">3</span> wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span>student<span class="operator">$</span>sage<span class="operator">&gt;</span><span class="number">11</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span>       <span class="comment"># 选择年龄大于 11 的, 并取第 2 个字段</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;lisi&quot;</span>   <span class="string">&quot;wangwu&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> student<span class="punctuation">[</span>student<span class="operator">$</span>sage<span class="operator">&gt;</span><span class="number">11</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">]</span> <span class="comment"># 选择年龄大于 11 的, 并取第 1、2 个字段 </span></span><br><span class="line">  sno  sname</span><br><span class="line"><span class="number">2</span>   <span class="number">2</span>   lisi</span><br><span class="line"><span class="number">3</span>   <span class="number">3</span> wangwu</span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> subset<span class="punctuation">(</span>student<span class="punctuation">,</span> select <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;sname&quot;</span><span class="punctuation">,</span> <span class="string">&quot;sage&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span>                        <span class="comment"># 可以理解为: SELECT sname, sage FROM student;</span></span><br><span class="line">     sname sage</span><br><span class="line"><span class="number">1</span> zhangsan   <span class="number">10</span></span><br><span class="line"><span class="number">2</span>     lisi   <span class="number">12</span></span><br><span class="line"><span class="number">3</span>   wangwu   <span class="number">14</span></span><br><span class="line"><span class="operator">&gt;</span> subset<span class="punctuation">(</span>student<span class="punctuation">,</span> select <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;sname&quot;</span><span class="punctuation">,</span> <span class="string">&quot;sage&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> sage<span class="operator">&gt;</span><span class="number">11</span> <span class="operator">&amp;</span> sno <span class="operator">==</span> <span class="number">2</span><span class="punctuation">)</span>    <span class="comment"># 可以理解问: SELECT sname, sage FROM student WHERE sage&gt;11 AND sno=2;</span></span><br><span class="line">  sname sage</span><br><span class="line"><span class="number">2</span>  lisi   <span class="number">12</span></span><br></pre></td></tr></table></figure>

<h5 id="2-8-6-因子-factor"><a href="#2-8-6-因子-factor" class="headerlink" title="2.8.6 因子 factor"></a>2.8.6 因子 <code>factor</code></h5><ul>
<li>概念：因子用于存储不同类别的数据类型，例如：人的性别有 <em>男</em> 和 <em>女</em> 两个类别，年龄来分可以有 <em>未成年人</em> 和 <em>成年人</em> 。</li>
<li>因子创建</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 因子创建</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 例 1:男 2:女</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> factor<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="number">3</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="operator">&gt;</span> factor<span class="punctuation">(</span>x<span class="punctuation">,</span> levels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span>    <span class="number">2</span>    <span class="number">1</span>    <span class="number">2</span>    <span class="number">2</span>    <span class="number">1</span>    <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line">Levels<span class="operator">:</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> factor<span class="punctuation">(</span>x<span class="punctuation">,</span> levels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;男&quot;</span><span class="punctuation">,</span> <span class="string">&quot;女&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> 男   女   男   女   女   男   <span class="operator">&lt;</span><span class="literal">NA</span><span class="operator">&gt;</span></span><br><span class="line">Levels<span class="operator">:</span> 男 女</span><br></pre></td></tr></table></figure>

<h4 id="2-9-R-语言判断、控制、循环"><a href="#2-9-R-语言判断、控制、循环" class="headerlink" title="2.9 R 语言判断、控制、循环"></a>2.9 R 语言判断、控制、循环</h4><h5 id="2-9-1-判断语句"><a href="#2-9-1-判断语句" class="headerlink" title="2.9.1 判断语句"></a>2.9.1 判断语句</h5><ul>
<li><code>if</code> 语句</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 控制语句</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="literal">TRUE</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span> <span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;x 为真&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;x 为真&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="built_in">is.logical</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;x 是逻辑型数据&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;x 是逻辑型数据&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>if...else...</code> 语句 和 <code>if...else if...</code> 语句</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> 10L</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="built_in">is.logical</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;x 是逻辑型数据&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="built_in">is.numeric</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;x 是数值型数据&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;x 不是逻辑型数据, 也不是数值型数据&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;x 是数值型数据&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> y <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;a&quot;</span><span class="punctuation">,</span> <span class="string">&quot;b&quot;</span><span class="punctuation">,</span> <span class="string">&quot;c&quot;</span><span class="punctuation">,</span> <span class="string">&quot;e&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="string">&quot;e&quot;</span> <span class="operator">%in%</span> y<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;y 中包含 `e`&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="string">&quot;a&quot;</span> <span class="operator">%in%</span> y<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;y 中包含 `a`&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span> <span class="keyword">else</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span><span class="string">&quot;不存在&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;y 中包含 `e`&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>switch</code> 语句</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># switch语句</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># x &lt;- switch (object,</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment">#   case = action</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># )</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># expression(object) 是一个常量表达式, 可以是整数或字符串</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># 如果是整数, 则返回对应 case 的位置值, 如果整数不在范围内则返回 NULL</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">switch</span> <span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;a&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;b&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;c&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;d&quot;</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">switch</span> <span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;a&quot;</span> <span class="operator">=</span> <span class="string">&quot;a1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;b&quot;</span> <span class="operator">=</span> <span class="string">&quot;b1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;c&quot;</span> <span class="operator">=</span> <span class="string">&quot;c1&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;d&quot;</span> <span class="operator">=</span> <span class="string">&quot;d1&quot;</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a1&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># expression 如果是字符串, 则对应的是 case 中变量名对应的值, 没有匹配则没有返回值</span></span><br><span class="line"><span class="operator">&gt;</span> x <span class="operator">&lt;-</span> <span class="built_in">switch</span> <span class="punctuation">(</span><span class="string">&quot;c&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;a&quot;</span> <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;b&quot;</span> <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line"><span class="operator">+</span>   <span class="string">&quot;c&quot;</span> <span class="operator">=</span> <span class="string">&quot;cn&quot;</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;cn&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-9-2-循环语句"><a href="#2-9-2-循环语句" class="headerlink" title="2.9.2 循环语句"></a>2.9.2 循环语句</h5><ul>
<li><code>repeat + if(...) &#123; break &#125;</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 循环语句</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># repeat + if(...) &#123; break &#125;</span></span><br><span class="line"><span class="operator">&gt;</span> v <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Google&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Micrsoft&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OpenAI&quot;</span><span class="punctuation">,</span> <span class="string">&quot;LinkIn&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> cnt <span class="operator">&lt;-</span> 3</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">repeat</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span>v<span class="punctuation">[</span>cnt<span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span>   cnt <span class="operator">&lt;-</span> cnt <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="operator">+</span>   <span class="keyword">if</span><span class="punctuation">(</span>cnt <span class="operator">&gt;</span> <span class="number">6</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span> <span class="keyword">break</span>; <span class="punctuation">&#125;</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;OpenAI&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;LinkIn&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>while()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> <span class="comment"># while 循环</span></span><br><span class="line"><span class="operator">&gt;</span> v <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Google&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Micrsoft&quot;</span><span class="punctuation">,</span> <span class="string">&quot;OpenAI&quot;</span><span class="punctuation">,</span> <span class="string">&quot;LinkIn&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> cnt <span class="operator">&lt;-</span> 3</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">while</span><span class="punctuation">(</span>cnt <span class="operator">&lt;=</span> <span class="number">5</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span>v<span class="punctuation">[</span>cnt<span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span>   cnt <span class="operator">&lt;-</span> cnt <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;OpenAI&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;LinkIn&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>for()</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># for 循环</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">letters</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span> <span class="string">&quot;f&quot;</span> <span class="string">&quot;g&quot;</span> <span class="string">&quot;h&quot;</span> <span class="string">&quot;i&quot;</span> <span class="string">&quot;j&quot;</span> <span class="string">&quot;k&quot;</span> <span class="string">&quot;l&quot;</span> <span class="string">&quot;m&quot;</span> <span class="string">&quot;n&quot;</span> <span class="string">&quot;o&quot;</span> <span class="string">&quot;p&quot;</span> <span class="string">&quot;q&quot;</span> <span class="string">&quot;r&quot;</span> <span class="string">&quot;s&quot;</span> <span class="string">&quot;t&quot;</span> <span class="string">&quot;u&quot;</span> <span class="string">&quot;v&quot;</span> <span class="string">&quot;w&quot;</span> <span class="string">&quot;x&quot;</span> <span class="string">&quot;y&quot;</span> <span class="string">&quot;z&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">LETTERS</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span> <span class="string">&quot;B&quot;</span> <span class="string">&quot;C&quot;</span> <span class="string">&quot;D&quot;</span> <span class="string">&quot;E&quot;</span> <span class="string">&quot;F&quot;</span> <span class="string">&quot;G&quot;</span> <span class="string">&quot;H&quot;</span> <span class="string">&quot;I&quot;</span> <span class="string">&quot;J&quot;</span> <span class="string">&quot;K&quot;</span> <span class="string">&quot;L&quot;</span> <span class="string">&quot;M&quot;</span> <span class="string">&quot;N&quot;</span> <span class="string">&quot;O&quot;</span> <span class="string">&quot;P&quot;</span> <span class="string">&quot;Q&quot;</span> <span class="string">&quot;R&quot;</span> <span class="string">&quot;S&quot;</span> <span class="string">&quot;T&quot;</span> <span class="string">&quot;U&quot;</span> <span class="string">&quot;V&quot;</span> <span class="string">&quot;W&quot;</span> <span class="string">&quot;X&quot;</span> <span class="string">&quot;Y&quot;</span> <span class="string">&quot;Z&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">LETTERS</span><span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span> <span class="string">&quot;B&quot;</span> <span class="string">&quot;C&quot;</span> <span class="string">&quot;D&quot;</span> <span class="string">&quot;E&quot;</span> <span class="string">&quot;F&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">for</span> <span class="punctuation">(</span>i <span class="keyword">in</span> <span class="built_in">LETTERS</span><span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span>i<span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;D&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;E&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;F&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-9-3-控制语句"><a href="#2-9-3-控制语句" class="headerlink" title="2.9.3 控制语句"></a>2.9.3 控制语句</h5><ul>
<li><code>break</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># break语句</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">for</span> <span class="punctuation">(</span>i <span class="keyword">in</span> <span class="built_in">LETTERS</span><span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   <span class="keyword">if</span> <span class="punctuation">(</span>i <span class="operator">==</span> <span class="string">&quot;D&quot;</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>     <span class="keyword">break</span>;</span><br><span class="line"><span class="operator">+</span>   <span class="punctuation">&#125;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span>i<span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;C&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>next</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># next语句</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">for</span> <span class="punctuation">(</span>i <span class="keyword">in</span> <span class="built_in">LETTERS</span><span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   <span class="keyword">if</span> <span class="punctuation">(</span>i <span class="operator">==</span> <span class="string">&quot;D&quot;</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>     <span class="keyword">next</span>;</span><br><span class="line"><span class="operator">+</span>   <span class="punctuation">&#125;</span></span><br><span class="line"><span class="operator">+</span>   print<span class="punctuation">(</span>i<span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;A&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;B&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;E&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;F&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-10-R-语言函数"><a href="#2-10-R-语言函数" class="headerlink" title="2.10 R 语言函数"></a>2.10 R 语言函数</h4><p>概念：函数是一组一起执行一个任务的语句。</p>
<h5 id="2-10-1-内置函数："><a href="#2-10-1-内置函数：" class="headerlink" title="2.10.1 内置函数："></a>2.10.1 内置函数：</h5><ul>
<li><code>print()</code></li>
<li><code>cat()</code></li>
<li><code>list()</code></li>
<li><code>array()</code></li>
</ul>
<h5 id="2-10-2-自定义函数"><a href="#2-10-2-自定义函数" class="headerlink" title="2.10.2 自定义函数"></a>2.10.2 自定义函数</h5><p><code>R</code> 语言函数通常由以下几个部分组成：</p>
<ul>
<li>函数名</li>
<li>参数</li>
<li>函数体</li>
<li>返回值</li>
</ul>
<p>具体格式如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function_name <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>arg_1<span class="punctuation">,</span> arg_2<span class="punctuation">,</span> ...<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment"># 函数体</span></span><br><span class="line">    <span class="comment"># 执行的代码块</span></span><br><span class="line">    <span class="built_in">return</span><span class="punctuation">(</span>output<span class="punctuation">)</span>	<span class="comment"># 返回值</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>下面由一些例子来演示：</p>
<p>只演示几种情况，其他情况（如有参函数、有默认参数值的函数都和其他语言类似）。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># R 语言函数</span></span><br><span class="line"><span class="operator">&gt;</span> new.function <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>   <span class="comment"># 函数体</span></span><br><span class="line"><span class="operator">+</span>   <span class="keyword">for</span><span class="punctuation">(</span>i <span class="keyword">in</span> <span class="number">1</span><span class="operator">:</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">&#123;</span></span><br><span class="line"><span class="operator">+</span>     print<span class="punctuation">(</span>i<span class="operator">^</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">+</span>   <span class="punctuation">&#125;</span></span><br><span class="line"><span class="operator">+</span> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> new.function<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">9</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">16</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">25</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">36</span></span><br></pre></td></tr></table></figure>

<h4 id="2-11-R语言读写数据文件、数据库"><a href="#2-11-R语言读写数据文件、数据库" class="headerlink" title="2.11 R语言读写数据文件、数据库"></a>2.11 R语言读写数据文件、数据库</h4><h5 id="2-11-1-读写数据文件"><a href="#2-11-1-读写数据文件" class="headerlink" title="2.11.1 读写数据文件"></a>2.11.1 读写数据文件</h5><table>
<thead>
<tr>
<th>读写类型</th>
<th>读写方法</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td>从键盘输入数据</td>
<td><code>edit()</code></td>
<td align="center">使用方法见下方代码</td>
</tr>
<tr>
<td>读写 <code>.txt</code> 格式文件</td>
<td>读 <code>read.table</code> <br />写 <code>write.table</code></td>
<td align="center">-</td>
</tr>
<tr>
<td>读写 <code>.csv</code> 格式文件</td>
<td>读 <code>read.csv()</code><br />写 <code>write.csv()</code></td>
<td align="center">-</td>
</tr>
<tr>
<td>读写 <code>.xlsx</code> 格式文件</td>
<td>读 <code>read.xlsx()</code><br />写 <code>write.xlsx()</code></td>
<td align="center">使用之前需要下载并加载 R语言的 <code>xlsx</code> 包</td>
</tr>
</tbody></table>
<ol>
<li>从键盘中输入数据</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="comment"># 从键盘读入数据, edit() 和 fix() 可以可视化的输入数据</span></span><br><span class="line"><span class="operator">&gt;</span> mydata <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>age<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span><span class="punctuation">,</span> gender<span class="operator">=</span>character<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span><span class="punctuation">,</span> weight<span class="operator">=</span>numeric<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> mydata</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> age    gender weight</span><br><span class="line"><span class="operator">&lt;</span><span class="number">0</span> 行<span class="operator">&gt;</span> <span class="punctuation">(</span>或<span class="number">0</span><span class="operator">-</span>长度的row.names<span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> edit<span class="punctuation">(</span>mydata<span class="punctuation">)</span></span><br><span class="line">  age gender weight</span><br><span class="line"><span class="number">1</span>  <span class="number">12</span>      <span class="number">2</span>    <span class="number">120</span></span><br><span class="line"><span class="number">2</span>  <span class="number">13</span>      <span class="number">2</span>     <span class="literal">NA</span></span><br><span class="line"><span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">&gt;</span> fix<span class="punctuation">(</span>mydata<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>读写 <code>.txt</code> 格式文件</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stutxt <span class="operator">&lt;-</span> read.table<span class="punctuation">(</span><span class="string">&quot;/path/to/file.txt&quot;</span><span class="punctuation">,</span> header<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">,</span> sep<span class="operator">=</span><span class="string">&quot;,&quot;</span><span class="punctuation">)</span></span><br><span class="line">stutxt</span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>stutxt<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">write.table<span class="punctuation">(</span>stutxt<span class="punctuation">,</span> <span class="string">&quot;/path/to/write.txt&quot;</span><span class="punctuation">,</span> sep<span class="operator">=</span><span class="string">&quot;,&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>读写 <code>.csv</code> 格式文件</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">csvfile <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;/path/to/file.csv&quot;</span><span class="punctuation">)</span></span><br><span class="line">csvfile</span><br><span class="line"></span><br><span class="line">write.csv<span class="punctuation">(</span>csvfile<span class="punctuation">,</span> <span class="string">&quot;/path/to/write.csv&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>读写 <code>.xlsx</code> 格式文件</li>
</ol>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;xlsx&quot;</span><span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">search<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;x1sx&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">student <span class="operator">&lt;-</span> read.xlsx<span class="punctuation">(</span><span class="string">&quot;/path/to/file.xlsx&quot;</span><span class="punctuation">,</span> sheetIndex<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> encoding <span class="operator">=</span> <span class="string">&quot;UTF-8&quot;</span><span class="punctuation">)</span></span><br><span class="line">student</span><br><span class="line"></span><br><span class="line">city<span class="operator">&lt;-</span>read.xlsx<span class="punctuation">(</span><span class="string">&quot;/path/to/file.xlsx&quot;</span><span class="punctuation">,</span> sheetName <span class="operator">=</span> <span class="string">&quot;city&quot;</span><span class="punctuation">,</span>encoding <span class="operator">=</span> <span class="string">&quot;UTF-8&quot;</span><span class="punctuation">)</span></span><br><span class="line">city</span><br><span class="line"></span><br><span class="line">write.xlsx<span class="punctuation">(</span>city<span class="punctuation">,</span> <span class="string">&quot;/path/to/write.xlsx&quot;</span><span class="punctuation">,</span> sheetName <span class="operator">=</span> <span class="string">&quot;city&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-11-2-读写数据库"><a href="#2-11-2-读写数据库" class="headerlink" title="2.11.2 读写数据库"></a>2.11.2 读写数据库</h5><p>非重点，有需要可自行了解</p>
<h4 id="2-12-R-语言基础绘图"><a href="#2-12-R-语言基础绘图" class="headerlink" title="2.12 R 语言基础绘图"></a>2.12 R 语言基础绘图</h4><h5 id="2-12-1-R-语言绘制barplot-条形图、堆叠条形图"><a href="#2-12-1-R-语言绘制barplot-条形图、堆叠条形图" class="headerlink" title="2.12.1 R 语言绘制barplot() 条形图、堆叠条形图"></a>2.12.1 R 语言绘制<code>barplot()</code> 条形图、堆叠条形图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### 1. 绘制条形图 barplot()</span></span><br><span class="line"><span class="comment"># 1.1 height: 高度, 通过这个参数可以指定要画多少个柱子, 以及每个柱子的高度, 其值有两种——向量、矩阵</span></span><br><span class="line"><span class="comment"># 1.1.1 向量 vector, 此时会根据向量的长度确定图中有多少个柱子, 向量中的每个值就是高度</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.1.2 矩阵 matrix, 此时用于画堆积柱状图</span></span><br><span class="line">data <span class="operator">&lt;-</span> cbind<span class="punctuation">(</span>a <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">,</span> b <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">data</span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>data<span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> data<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.2 width: 宽度, 控制每个柱子的宽度, 默认值为 1, 值得注意的是, 这个参数的值是可以循环使用的</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span> width<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span> width<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span> width<span class="operator">=</span><span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">data <span class="operator">&lt;-</span> cbind<span class="punctuation">(</span>a <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">,</span> b <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> data<span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> data<span class="punctuation">,</span> width<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height <span class="operator">=</span> data<span class="punctuation">,</span> width<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.3 space: 间隔, 指定每个柱子左边的空白区域的宽度, 这个值为一个百分比, 默认值为 0.2</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span><span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span> space<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span><span class="number">1</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">,</span> space<span class="operator">=</span><span class="number">5</span><span class="operator">:</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span>data<span class="punctuation">,</span> space<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span>data<span class="punctuation">,</span> space<span class="operator">=</span><span class="number">1</span><span class="operator">:</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.4 names.arg: 每个柱子下面的标记, 当 height 为 vector 时, 默认的标记为向量的 names 属性</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span> names.arg<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;a&quot;</span><span class="punctuation">,</span><span class="string">&quot;b&quot;</span><span class="punctuation">,</span><span class="string">&quot;c&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">v <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">3</span></span><br><span class="line"><span class="built_in">names</span><span class="punctuation">(</span>v<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;c&quot;</span> <span class="punctuation">,</span><span class="string">&quot;b&quot;</span> <span class="punctuation">,</span><span class="string">&quot;a&quot;</span><span class="punctuation">)</span></span><br><span class="line">v</span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span>v<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.5 horiz: 逻辑值, 默认为 FALSE, 当值为 TRUE 时, 将 X 轴和 Y 轴转置</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span> horiz <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span> horiz <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">data</span><br><span class="line"></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span>data<span class="punctuation">,</span> horiz<span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>height<span class="operator">=</span>data<span class="punctuation">,</span> horiz <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.6 col: 柱子的填充色, 默认为灰色</span></span><br><span class="line"><span class="comment"># 1.7 border: 柱子边框的颜色, 默认为 black, 当 border为 NA时, 表示没有边框</span></span><br><span class="line"><span class="comment"># 1.8 main: 设置图形标题</span></span><br><span class="line"><span class="built_in">c</span> <span class="operator">&lt;-</span> colors<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">c</span></span><br><span class="line"><span class="built_in">c</span><span class="punctuation">[</span><span class="number">2</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line">barplot<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">[</span><span class="number">2</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">]</span><span class="punctuation">,</span> border <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;图形标题&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">barplot<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">,</span> col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span> <span class="string">&quot;green&quot;</span><span class="punctuation">,</span> <span class="string">&quot;antiquewhite&quot;</span><span class="punctuation">,</span> <span class="string">&quot;white&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.9 &amp; 1.10 density 设置柱子用线条填充, density 控制线条的密度，angle 控制线条的角度</span></span><br><span class="line">par<span class="punctuation">(</span>mfrow<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">par</span><br><span class="line"></span><br><span class="line">barplot<span class="punctuation">(</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> angle <span class="operator">=</span> <span class="number">30</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;density = 1&quot;</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> angle <span class="operator">=</span> <span class="number">90</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;density = 2&quot;</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="number">3</span><span class="punctuation">,</span> angle <span class="operator">=</span> <span class="number">180</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;density = 3&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.11 axes: 逻辑值, 控制是否显示轴线(如 y 轴线)</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> axes <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> axes <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.12 axisnames: 控制是否显示柱子的标签</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> axisnames <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> axisnames <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.13 beside: 当输入参数为矩阵时, 默认是堆积柱状图, beside 默认值为 FALSE;</span></span><br><span class="line"><span class="comment"># beside = FALSE 时, 条形图的高度是矩阵的数值, 矩形条是水平堆叠的</span></span><br><span class="line"><span class="comment"># beside = TRUE 时, 条形图的高度是矩阵的数值, 矩形条是并列的</span></span><br><span class="line">data</span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> beside <span class="operator">=</span> <span class="built_in">F</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> beside <span class="operator">=</span> <span class="built_in">T</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.14 legend.text: 图例的文字说明</span></span><br><span class="line"><span class="comment"># 只有当 height 参数的值是 matrix 时, 才起作用</span></span><br><span class="line"><span class="comment"># 默认显示的是 matrix 的 rownames 属性</span></span><br><span class="line"><span class="comment"># 其值有两种指定形式:</span></span><br><span class="line"><span class="comment"># 第一种: 逻辑值, 是否需要显示图例, 默认为FALSE</span></span><br><span class="line">par<span class="punctuation">(</span>mfrow<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">data</span><br><span class="line">rownames<span class="punctuation">(</span>data<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;A1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;A2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;A3&quot;</span><span class="punctuation">,</span> <span class="string">&quot;A4&quot;</span><span class="punctuation">)</span></span><br><span class="line">data</span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> legend.text <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种, 指定图例中的文字内容</span></span><br><span class="line"><span class="comment"># 相当于修改了 matrix 的 rownames 属性</span></span><br><span class="line">barplot<span class="punctuation">(</span>data<span class="punctuation">,</span> legend.text <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;D&quot;</span><span class="punctuation">,</span> <span class="string">&quot;E&quot;</span><span class="punctuation">,</span> <span class="string">&quot;F&quot;</span><span class="punctuation">,</span> <span class="string">&quot;G&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-12-2-R-语言绘制-饼图、3D饼图绘制"><a href="#2-12-2-R-语言绘制-饼图、3D饼图绘制" class="headerlink" title="2.12.2 R 语言绘制 饼图、3D饼图绘制"></a>2.12.2 R 语言绘制 饼图、3D饼图绘制</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### 2. 绘制饼图</span></span><br><span class="line"><span class="comment"># 2.1 x: 数值向量, 表示每个扇形的面积</span></span><br><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">21</span><span class="punctuation">,</span> <span class="number">62</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">53</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.2 labels: 字符型向量, 表示各扇形面积标签</span></span><br><span class="line">x<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">21</span><span class="punctuation">,</span> <span class="number">62</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">53</span><span class="punctuation">)</span></span><br><span class="line"><span class="built_in">names</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span></span><br><span class="line">x</span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">x<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">21</span><span class="punctuation">,</span> <span class="number">62</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">53</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.3 radius: 饼图的半径</span></span><br><span class="line">x<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">21</span><span class="punctuation">,</span> <span class="number">62</span><span class="punctuation">,</span> <span class="number">10</span><span class="punctuation">,</span> <span class="number">53</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.4 main: 饼图的标题</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.5 clockwise: 一个逻辑值, 用来指定饼图各个切片是否按顺时针做出分割</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">,</span> clockwise <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.6 &amp; 2.7</span></span><br><span class="line"><span class="comment"># angle: 设置底纹的斜率</span></span><br><span class="line"><span class="comment"># density: 底纹的密度, 默认值为NULL</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> radius <span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">,</span> clockwise <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> density <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> angle <span class="operator">=</span> <span class="number">20</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.8 col: 每个扇面的颜色, 相当于调色板</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> </span><br><span class="line">    radius <span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">,</span> clockwise <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> </span><br><span class="line">    density <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> angle <span class="operator">=</span> <span class="number">20</span><span class="punctuation">,</span> col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> </span><br><span class="line">    radius <span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">,</span> clockwise <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> </span><br><span class="line">    col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.9 设置百分数</span></span><br><span class="line">piepercent <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>x<span class="operator">/</span><span class="built_in">sum</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="operator">*</span> <span class="number">100</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>x<span class="punctuation">,</span> piepercent<span class="punctuation">,</span> radius<span class="operator">=</span><span class="number">0.5</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;饼图&quot;</span><span class="punctuation">,</span> clockwise<span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.10 设置图例</span></span><br><span class="line">legend<span class="punctuation">(</span><span class="string">&quot;topright&quot;</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">       fill <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.8</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">legend<span class="punctuation">(</span><span class="string">&quot;topright&quot;</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">       fill <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span> horiz <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> cex <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.11 绘制 3D 饼图</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;plotrix&quot;</span><span class="punctuation">)</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;plotrix&quot;</span><span class="punctuation">)</span></span><br><span class="line">lbl <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;London&quot;</span><span class="punctuation">,</span> <span class="string">&quot;New York&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Singapore&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Mumbai&quot;</span><span class="punctuation">)</span></span><br><span class="line">pie3D<span class="punctuation">(</span>x<span class="punctuation">,</span> labels <span class="operator">=</span> lbl<span class="punctuation">,</span> explode <span class="operator">=</span> <span class="number">0.1</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;城市 3D 饼图&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-12-3-R-语言散点图、折线图、散点矩阵图"><a href="#2-12-3-R-语言散点图、折线图、散点矩阵图" class="headerlink" title="2.12.3 R 语言散点图、折线图、散点矩阵图"></a>2.12.3 R 语言散点图、折线图、散点矩阵图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### 3. 绘制散点图、折线图、散点矩阵图</span></span><br><span class="line"><span class="comment"># 3.1 绘制散点图 plot()</span></span><br><span class="line"><span class="comment"># x: 横坐标, x轴的数据集合</span></span><br><span class="line"><span class="comment"># y: 纵坐标, y轴的数据集合</span></span><br><span class="line"><span class="comment"># type: 绘图的类型, type=&quot;p&quot; 为点(默认); </span></span><br><span class="line"><span class="comment">#                   type=&quot;l&quot; 在图形中数据显示为线;</span></span><br><span class="line"><span class="comment">#                   type=&quot;b&quot; 在图形中数据显示为点和连接线;</span></span><br><span class="line"><span class="comment">#                   type=&quot;o&quot; 在图形中数据点覆盖在线上;</span></span><br><span class="line"><span class="comment">#                   type=&quot;h&quot; 在图形中数据显示为从点到x轴的垂直线; </span></span><br><span class="line"><span class="comment">#                   type=&quot;s&quot; 在图形中数据显示为阶梯图;</span></span><br><span class="line"><span class="comment">#                   type=&quot;n&quot; 在图形中数据不显示</span></span><br><span class="line"><span class="comment"># main: 图表标题</span></span><br><span class="line"><span class="comment"># xlab/ylab: x轴/y轴的标签名称</span></span><br><span class="line"><span class="comment"># xlim/ylim: x轴/y轴的范围</span></span><br><span class="line"><span class="comment"># axes: 布尔值, 是否绘制两个坐标轴</span></span><br><span class="line"><span class="comment"># pch: 点的样式由 pch 的取值决定</span></span><br><span class="line"><span class="comment"># cex: 表示相对于默认大小缩放倍数的数值。默认大小为1, 1.5表示放大为默认值的1.5倍; 0.5表示做小为默认大小的0.5倍;</span></span><br><span class="line"></span><br><span class="line">cars        <span class="comment"># 加载车辆时速-刹车距离数据集</span></span><br><span class="line">cars<span class="operator">$</span>speed  <span class="comment"># 查看车辆时速</span></span><br><span class="line">cars<span class="operator">$</span>dist   <span class="comment"># 查看车辆刹车距离</span></span><br><span class="line"></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="operator">$</span>speed<span class="punctuation">,</span> cars<span class="operator">$</span>dist<span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="punctuation">[</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">]</span><span class="punctuation">,</span> cars<span class="punctuation">[</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;车辆时速-刹车距离散点图&quot;</span><span class="punctuation">,</span> xlab<span class="operator">=</span><span class="string">&quot;车速&quot;</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&quot;刹车距离&quot;</span><span class="punctuation">,</span></span><br><span class="line">     col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span> pch<span class="operator">=</span><span class="number">4</span><span class="punctuation">,</span> cex<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">with<span class="punctuation">(</span>classData<span class="punctuation">,</span> plot<span class="punctuation">(</span>height<span class="punctuation">,</span> weight<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2 绘制折线图 plot()</span></span><br><span class="line"><span class="comment"># type: 绘图的类型, type=&quot;p&quot; 为点(默认); </span></span><br><span class="line"><span class="comment">#                   type=&quot;l&quot; 在图形中数据显示为线;</span></span><br><span class="line"><span class="comment">#                   type=&quot;b&quot; 在图形中数据显示为点和连接线;</span></span><br><span class="line"><span class="comment">#                   type=&quot;o&quot; 在图形中数据点覆盖在线上;</span></span><br><span class="line"><span class="comment">#                   type=&quot;h&quot; 在图形中数据显示为从点到 x 轴的垂直线(直线条形图);</span></span><br><span class="line"><span class="comment">#                   type=&quot;s&quot; 在图形中数据显示为阶梯图;</span></span><br><span class="line"><span class="comment">#                   type=&quot;c&quot; 在图形中数据虚线图;</span></span><br><span class="line"><span class="comment">#                   type=&quot;n&quot; 在图形中数据不显示</span></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="operator">$</span>speed<span class="punctuation">,</span> cars<span class="operator">$</span>dist<span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&quot;l&quot;</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="operator">$</span>speed<span class="punctuation">,</span> cars<span class="operator">$</span>dist<span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&quot;b&quot;</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>cars<span class="operator">$</span>speed<span class="punctuation">,</span> cars<span class="operator">$</span>dist<span class="punctuation">,</span> type<span class="operator">=</span><span class="string">&quot;o&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 可以配合lines() 函数绘制出多条折线图</span></span><br><span class="line"><span class="comment"># lines() 函数必须与 plot() 函数配合才能使用, 先用 plot() 函数画出一个图形</span></span><br><span class="line"><span class="comment"># round(x, digits = 0) 舍入函数, x 为数值向量, digits表示有效位数, 可以为负数, 负数表示舍入十位(-1)、百位(-2)...等</span></span><br><span class="line">x <span class="operator">&lt;-</span> 1<span class="operator">:</span> <span class="number">10</span></span><br><span class="line">beijing <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>rnorm<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> mean <span class="operator">=</span> <span class="number">20</span><span class="punctuation">,</span> sd <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">beijing</span><br><span class="line">shanghai <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>rnorm<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> mean <span class="operator">=</span> <span class="number">23</span><span class="punctuation">,</span> sd <span class="operator">=</span> <span class="number">3</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">shanghai</span><br><span class="line">guangzhou <span class="operator">&lt;-</span> <span class="built_in">round</span><span class="punctuation">(</span>rnorm<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span> mean <span class="operator">=</span> <span class="number">18</span><span class="punctuation">,</span> sd <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">guangzhou</span><br><span class="line"></span><br><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span> beijing<span class="punctuation">,</span> type <span class="operator">=</span> <span class="string">&quot;l&quot;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">16</span><span class="punctuation">,</span> <span class="number">30</span><span class="punctuation">)</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;北上广近十天气温变化趋势图&quot;</span><span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>x<span class="punctuation">,</span> shanghai<span class="punctuation">,</span> type <span class="operator">=</span> <span class="string">&quot;b&quot;</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>x<span class="punctuation">,</span> guangzhou<span class="punctuation">,</span> type <span class="operator">=</span> <span class="string">&quot;l&quot;</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 plot() 会单独绘制一张新图</span></span><br><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span> shanghai<span class="punctuation">,</span> type <span class="operator">=</span> <span class="string">&quot;l&quot;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">16</span><span class="punctuation">,</span> <span class="number">30</span><span class="punctuation">)</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;北上广近十天气温变化趋势图&quot;</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span> guangzhou<span class="punctuation">,</span> type <span class="operator">=</span> <span class="string">&quot;l&quot;</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">16</span><span class="punctuation">,</span> <span class="number">30</span><span class="punctuation">)</span><span class="punctuation">,</span> lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="string">&quot;北上广近十天气温变化趋势图&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3 绘制散点矩阵图</span></span><br><span class="line">mtcars     <span class="comment"># 加载 mtcars 数据集, 数据来自1974年美国汽车趋势杂志, 包括32辆汽车(1973-74款) 的油耗和10个方面的汽车设计和性能</span></span><br><span class="line">           <span class="comment"># mpg(Miles Per Gallon): 油耗(每加仑英里(美国)), 功能更强大, 更重的汽车往往消耗更多的燃油</span></span><br><span class="line">           <span class="comment"># cyl(cylinders): 汽缸数, 功率更大的汽车通常具有更多的汽缸</span></span><br><span class="line">           <span class="comment"># disp(displacement, in cubic inches): 排量(立方英寸), 发动机气缸的总容积</span></span><br><span class="line">           <span class="comment"># hp(horsepower): 总马力：这是汽车产生的功率的量度</span></span><br><span class="line">           <span class="comment"># drat：driveshaft ratio:后轴比率：这描述了驱动轴的转动与车轮的转动如何对应。较高的值会降低燃油效率。</span></span><br><span class="line">           <span class="comment"># wt(weight): 重量(1000磅)</span></span><br><span class="line">           <span class="comment"># qsec(1/4 mile time; a measure of acceleration): 1/4英里时间：汽车的速度和加速度</span></span><br><span class="line">           <span class="comment"># vs(‘V’ or straight - engine shape): 发动机缸体, 表示车辆的发动机形状是&quot;V&quot; 形还是更常见的直形。</span></span><br><span class="line">           <span class="comment"># am(transmission; auto or manual): 变速箱, 这表示汽车的变速箱是自动(0)还是手动(1)。</span></span><br><span class="line">           <span class="comment"># gear(abbreviation of gears): 前进挡的数量, 跑车往往具有更多的挡位</span></span><br><span class="line">           <span class="comment"># carb(abbreviation of carburetors): 化油器数量, 与更强大的发动机相关</span></span><br><span class="line"></span><br><span class="line">pairs<span class="punctuation">(</span>mtcars<span class="punctuation">[</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;wt&quot;</span><span class="punctuation">,</span> <span class="string">&quot;mpg&quot;</span><span class="punctuation">,</span> <span class="string">&quot;disp&quot;</span><span class="punctuation">,</span> <span class="string">&quot;cyl&quot;</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br><span class="line">pairs<span class="punctuation">(</span>vs<span class="operator">~</span>wt <span class="operator">+</span> mpg <span class="operator">+</span> disp <span class="operator">+</span> cyl<span class="punctuation">,</span> data<span class="operator">=</span>mtcars<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-12-4-R-语言绘制直方图"><a href="#2-12-4-R-语言绘制直方图" class="headerlink" title="2.12.4 R 语言绘制直方图"></a>2.12.4 R 语言绘制直方图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-12-5-R-语言绘制核密度图"><a href="#2-12-5-R-语言绘制核密度图" class="headerlink" title="2.12.5 R 语言绘制核密度图"></a>2.12.5 R 语言绘制核密度图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-12-6-R-语言绘制箱线图"><a href="#2-12-6-R-语言绘制箱线图" class="headerlink" title="2.12.6 R 语言绘制箱线图"></a>2.12.6 R 语言绘制箱线图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-12-7-R-语言小提琴图"><a href="#2-12-7-R-语言小提琴图" class="headerlink" title="2.12.7 R 语言小提琴图"></a>2.12.7 R 语言小提琴图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### 7. 小提琴图 </span></span><br><span class="line"><span class="comment"># vioplot 包中的 vioplot 函数用于绘制小提琴图, 小提琴图是核密度图与箱线图的结合</span></span><br><span class="line"><span class="comment"># install.packages(&quot;vioplot&quot;)</span></span><br><span class="line"><span class="comment"># install.packages(&quot;vioplot&quot;)</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;vioplot&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># `==` 意为比较等号两端是否相等</span></span><br><span class="line">mpg4 <span class="operator">&lt;-</span> mtcars<span class="operator">$</span>mpg<span class="punctuation">[</span>mtcars<span class="operator">$</span>cyl <span class="operator">==</span> <span class="number">4</span><span class="punctuation">]</span></span><br><span class="line">mpg4</span><br><span class="line">mpg6 <span class="operator">&lt;-</span> mtcars<span class="operator">$</span>mpg<span class="punctuation">[</span>mtcars<span class="operator">$</span>cyl <span class="operator">==</span> <span class="number">6</span><span class="punctuation">]</span></span><br><span class="line">mpg6</span><br><span class="line">mpg8 <span class="operator">&lt;-</span> mtcars<span class="operator">$</span>mpg<span class="punctuation">[</span>mtcars<span class="operator">$</span>cyl <span class="operator">==</span> <span class="number">8</span><span class="punctuation">]</span></span><br><span class="line">mpg8</span><br><span class="line"></span><br><span class="line">vioplot<span class="punctuation">(</span>mpg4<span class="punctuation">,</span> mpg6<span class="punctuation">,</span> mpg8<span class="punctuation">,</span> <span class="built_in">names</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;4-cyl&quot;</span><span class="punctuation">,</span> <span class="string">&quot;6-cyl&quot;</span><span class="punctuation">,</span> <span class="string">&quot;8-cyl&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span> col<span class="operator">=</span><span class="string">&quot;gold&quot;</span><span class="punctuation">)</span></span><br><span class="line">title<span class="punctuation">(</span><span class="string">&quot;四/六/八缸 车辆的油耗 (英里/加仑)&quot;</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&quot;Miles Per Gallon&quot;</span><span class="punctuation">,</span> xlab<span class="operator">=</span><span class="string">&quot;Num Of Cylinders&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片的保存</span></span><br><span class="line">pdf<span class="punctuation">(</span>file<span class="operator">=</span><span class="string">&quot;fig-vioplot.pdf&quot;</span><span class="punctuation">,</span> height <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> width <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span> family <span class="operator">=</span> <span class="string">&quot;GB1&quot;</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">vioplot<span class="punctuation">(</span>mpg<span class="operator">~</span>cyl<span class="punctuation">,</span> data<span class="operator">=</span>mtcars<span class="punctuation">,</span> xlab<span class="operator">=</span><span class="string">&quot;气缸数&quot;</span><span class="punctuation">,</span> ylab<span class="operator">=</span><span class="string">&quot;加仑每英里&quot;</span><span class="punctuation">,</span> main<span class="operator">=</span><span class="string">&quot;里程数据&quot;</span><span class="punctuation">,</span> <span class="built_in">names</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;4-cyl&quot;</span><span class="punctuation">,</span> <span class="string">&quot;6-cyl&quot;</span><span class="punctuation">,</span> <span class="string">&quot;8-cyl&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">dev.off   <span class="comment"># 关闭图像设备, 我们经常使用图像设备来创建和保存图形输出</span></span><br><span class="line">          <span class="comment"># 当我们完成图形绘制并且不再需要将图形输出到设备上时, 我们需要关闭图像设备以释放系统资源并确保图形正确保存</span></span><br><span class="line">          <span class="comment"># 在 R 中, 我们可以使用 dev.off() 函数来关闭当前活动的图像设备</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-13-R-绘图常用拓展库-ggplot2-绘图"><a href="#2-13-R-绘图常用拓展库-ggplot2-绘图" class="headerlink" title="2.13 R 绘图常用拓展库 ggplot2 绘图"></a>2.13 <code>R</code> 绘图常用拓展库 <code>ggplot2</code> 绘图</h4><p><strong>简介：</strong><code>ggplot2</code>是一款强大的图形可视化R包，其作图方式易于理解，且生成的图形精美，定制化程度也很高，是 R 语言中很流行的可视化工具之一。</p>
<p><code>ggplot2</code> 包是 <code>R</code> 的一个作图用的扩展包，它实现了 <em><strong>图形的语法</strong></em>，将一个作图任务分成若干子任务，只需要完成各个子任务就可以完成作图。在绘制常用图形时，只需要两个步骤：</p>
<ol>
<li><p>将图形所展现的数据输入到 <code>ggplot()</code> 函数中</p>
</li>
<li><p>调用某个 <code>geom_xxx()</code> 函数，指定图形类型，如散点图、面积图、曲线图、盒型图等。<code>geom_xxx()</code> 提供了各种基本图形，如<code>geom_blank()</code> 不绘制图形、<code>geom_point()</code> 每个观测为一个散点、<code>geom_hline(), geom_vline(), geom_abline()</code> 绘制线等。</p>
</li>
</ol>
<p><code>ggplot2</code> 的作图的一般步骤为：</p>
<ol>
<li><strong>准备数据：</strong>一般为数据框，且一般为长表，即每个观测时间占一行，每个观测变量占一列</li>
<li><strong>输入数据：</strong>将数据输入到 <code>ggplot()</code> 函数中，并指定参与作图的每个变量分别映射到哪些图形特性</li>
<li><strong>选择图形类型：</strong>选择一个合适的图形类型，函数名以 <code>geom_</code> 开头，如 <code>geom_point()</code> 表示散点图。</li>
<li>设定标题和图例位置等，如 <code>labs()</code>，仍用加号连接。</li>
</ol>
<p>模板如下：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data <span class="operator">=</span> <span class="operator">&lt;</span>输入数据框<span class="operator">&gt;</span><span class="punctuation">,</span> </span><br><span class="line">            mapping <span class="operator">=</span> aes<span class="punctuation">(</span><span class="operator">&lt;</span>维度<span class="operator">&gt;=</span><span class="operator">&lt;</span>变量名<span class="operator">&gt;</span><span class="punctuation">,</span> </span><br><span class="line">                          <span class="operator">&lt;</span>维度<span class="operator">&gt;=</span><span class="operator">&lt;</span>变量名<span class="operator">&gt;</span><span class="punctuation">,</span> </span><br><span class="line">                          <span class="operator">&lt;</span>...<span class="operator">&gt;=</span><span class="operator">&lt;</span>...<span class="operator">&gt;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">p <span class="operator">+</span> geom_<span class="operator">&lt;</span>图形类型<span class="operator">&gt;</span><span class="punctuation">(</span><span class="operator">&lt;</span>...<span class="operator">&gt;</span><span class="punctuation">)</span> <span class="operator">+</span> </span><br><span class="line">	scala_<span class="operator">&lt;</span>映射<span class="operator">&gt;</span>_<span class="operator">&lt;</span>类型<span class="operator">&gt;</span><span class="punctuation">(</span><span class="operator">&lt;</span>...<span class="operator">&gt;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">	coord_<span class="operator">&lt;</span>类型<span class="operator">&gt;</span><span class="punctuation">(</span><span class="operator">&lt;</span>...<span class="operator">&gt;</span><span class="punctuation">)</span> <span class="operator">+</span></span><br><span class="line">	labs<span class="punctuation">(</span><span class="operator">&lt;</span>...<span class="operator">&gt;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-13-1-ggplot2-绘制散点图"><a href="#2-13-1-ggplot2-绘制散点图" class="headerlink" title="2.13.1 ggplot2 绘制散点图"></a>2.13.1 <code>ggplot2</code> 绘制散点图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### ggplot2 绘图</span></span><br><span class="line"><span class="comment"># install.packages(&quot;ggplot2&quot;)     # 安装 ggplot2 绘图库</span></span><br><span class="line"><span class="comment"># install.packages(&quot;gapminder&quot;)   # 安装 gapminder 数据集</span></span><br><span class="line"></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;ggplot2&quot;</span><span class="punctuation">)</span>                <span class="comment"># 绘图包</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;gapminder&quot;</span><span class="punctuation">)</span>              <span class="comment"># 数据集包</span></span><br><span class="line"></span><br><span class="line">gapminder</span><br><span class="line"></span><br><span class="line">dev.new<span class="punctuation">(</span><span class="punctuation">)</span>                         <span class="comment"># 打开绘图设备</span></span><br><span class="line">p <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data <span class="operator">=</span> gapminder<span class="punctuation">,</span></span><br><span class="line">            mapping <span class="operator">=</span> aes<span class="punctuation">(</span></span><br><span class="line">              x <span class="operator">=</span> gdpPercap<span class="punctuation">,</span></span><br><span class="line">              y <span class="operator">=</span> lifeExp<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">p <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data <span class="operator">=</span> gapminder<span class="punctuation">,</span></span><br><span class="line">            aes<span class="punctuation">(</span>gdpPercap<span class="punctuation">,</span> lifeExp<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">p <span class="operator">+</span> geom_point<span class="punctuation">(</span><span class="punctuation">)</span>  <span class="comment"># 散点图</span></span><br><span class="line">p <span class="operator">+</span> geom_smooth<span class="punctuation">(</span><span class="punctuation">)</span> <span class="comment"># 拟合曲线图</span></span><br><span class="line">p <span class="operator">+</span> geom_point<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span> geom_smooth<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">dev.off<span class="punctuation">(</span><span class="punctuation">)</span>		  <span class="comment"># 关闭绘图设备</span></span><br></pre></td></tr></table></figure>

<h5 id="2-13-2-ggplot2-绘制面积图"><a href="#2-13-2-ggplot2-绘制面积图" class="headerlink" title="2.13.2 ggplot2 绘制面积图"></a>2.13.2 <code>ggplot2</code> 绘制面积图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 面积图</span></span><br><span class="line"><span class="comment"># 定义数据框 data.frame</span></span><br><span class="line">df <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span></span><br><span class="line">  year<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1700</span><span class="punctuation">,</span> <span class="number">1701</span><span class="punctuation">,</span> <span class="number">1702</span><span class="punctuation">,</span> <span class="number">1703</span><span class="punctuation">,</span> <span class="number">1704</span><span class="punctuation">,</span> </span><br><span class="line">         <span class="number">1705</span><span class="punctuation">,</span> <span class="number">1706</span><span class="punctuation">,</span> <span class="number">1707</span><span class="punctuation">,</span> <span class="number">1708</span><span class="punctuation">,</span> <span class="number">1709</span><span class="punctuation">,</span></span><br><span class="line">         <span class="number">1710</span><span class="punctuation">,</span> <span class="number">1711</span><span class="punctuation">,</span> <span class="number">1712</span><span class="punctuation">,</span> <span class="number">1713</span><span class="punctuation">,</span> <span class="number">1714</span><span class="punctuation">,</span></span><br><span class="line">         <span class="number">1715</span><span class="punctuation">,</span> <span class="number">1716</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">  sunspots<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span> <span class="number">5.0</span><span class="punctuation">,</span> <span class="number">11.0</span><span class="punctuation">,</span> <span class="number">16.0</span><span class="punctuation">,</span> <span class="number">23.0</span><span class="punctuation">,</span> <span class="number">36.0</span><span class="punctuation">,</span></span><br><span class="line">             <span class="number">58.0</span><span class="punctuation">,</span> <span class="number">29.0</span><span class="punctuation">,</span> <span class="number">20.0</span><span class="punctuation">,</span> <span class="number">10.0</span><span class="punctuation">,</span>  <span class="number">8.0</span><span class="punctuation">,</span></span><br><span class="line">              <span class="number">3.0</span><span class="punctuation">,</span>  <span class="number">0.0</span><span class="punctuation">,</span>  <span class="number">0.0</span><span class="punctuation">,</span>  <span class="number">2.0</span><span class="punctuation">,</span> <span class="number">11.0</span><span class="punctuation">,</span></span><br><span class="line">             <span class="number">27.0</span><span class="punctuation">,</span> <span class="number">47.0</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">)</span></span><br><span class="line"></span><br><span class="line">df</span><br><span class="line"></span><br><span class="line">p <span class="operator">&lt;-</span> ggplot<span class="punctuation">(</span>data <span class="operator">=</span> df<span class="punctuation">,</span> mapping <span class="operator">=</span> aes<span class="punctuation">(</span>year<span class="punctuation">,</span> sunspots<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">p <span class="operator">+</span> geom_area<span class="punctuation">(</span>fill <span class="operator">=</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">,</span> alpha <span class="operator">=</span> <span class="number">0.2</span><span class="punctuation">,</span> col <span class="operator">=</span> <span class="string">&quot;red&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<h5 id="2-13-3-ggplot2-绘制堆叠面积图"><a href="#2-13-3-ggplot2-绘制堆叠面积图" class="headerlink" title="2.13.3 ggplot2 绘制堆叠面积图"></a>2.13.3 <code>ggplot2</code> 绘制堆叠面积图</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="🎫-3-ECharts-ECharts的简单使用"><a href="#🎫-3-ECharts-ECharts的简单使用" class="headerlink" title="🎫 3. ECharts - ECharts的简单使用"></a>🎫 3. <code>ECharts</code> - <code>ECharts</code>的简单使用</h3><h4 id="3-1-ECharts-简介"><a href="#3-1-ECharts-简介" class="headerlink" title="3.1 ECharts 简介"></a>3.1 ECharts 简介</h4><ul>
<li><em>ECharts</em> 概念：一个基于 <em><strong>JavaScript</strong></em> 的开源可视化图表库（别人写好了 <code>.js</code>，我直接使用），可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（<em>IE 9&#x2F;10&#x2F;11</em>，<em>Chrome</em>，<em>Firefox</em>，<em>Safari</em> 等），底层依赖矢量图形库 *<a target="_blank" rel="noopener" href="https://github.com/ecomfe/zrender">ZRender</a>*，提供直观，交互丰富，可高度个性化定制的数据可视化图表。</li>
<li>官网：<a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/download.html">ECharts</a></li>
<li>特性：<a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/feature.html">ECharts Feature</a></li>
<li>获取 <code>Apache ECharts</code><ul>
<li><p>通过 <code>GitHub</code> 获取</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/apache/echarts">Apache&#x2F;ECharts</a> 项目的 <a target="_blank" rel="noopener" href="https://github.com/apache/echarts/releases">release</a> 页面可以找到各个版本的链接。点击下载页面下方 <code>Assets</code> 中的 <code>Source code</code>，解压后即为包含完整 ECharts 功能的文件。</li>
<li><code>echarts-5.4.0/echarts-5.4.0/dist/echarts.common.js </code>  与 <code>echarts-5.4.0/echarts-5.4.0/dist/echarts.common.min.js</code>：体积适中，常用版，支持常见的图表和组件</li>
<li><code>echarts-5.4.0/echarts-5.4.0/dist/echarts.js</code> 与 <code>echarts-5.4.0/echarts-5.4.0/dist/echarts.min.js</code>：体积最大，完整版，包含所有支持的图表和组件。</li>
<li><code>echarts-5.4.0/echarts-5.4.0/dist/echarts.simple.js</code> 与 <code>echarts-5.4.0/echarts-5.4.0/dist/echarts.simple.min.js</code>：体积较小，精简版，包含最常用的图表和组件。</li>
</ul>
</li>
<li><p>从 <code>npm</code> 获取</p>
<ul>
<li><code>npm install echarts</code></li>
</ul>
</li>
<li><p>从 <code>CDN</code> 获取</p>
<ul>
<li><code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
</li>
<li><p>在线定制</p>
</li>
</ul>
</li>
</ul>
<h4 id="3-2-第一个-ECharts-程序"><a href="#3-2-第一个-ECharts-程序" class="headerlink" title="3.2 第一个 ECharts 程序"></a>3.2 第一个 <code>ECharts</code> 程序</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>第一个 ECharts 程序<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1. 引入 ECharts.js 类库文件 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 3. 实例化 ECharts 对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 4. 指定图表的配置项和数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> option = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">text</span>: <span class="string">&quot;ECharts 入门案例&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">tooltip</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;帽子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>] </span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">26</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">8</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;]</span></span><br><span class="line"><span class="language-javascript">                &#125;;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 5. 使用刚指定的配置项和数据显示图表</span></span></span><br><span class="line"><span class="language-javascript">                myChart.<span class="title function_">setOption</span>(option);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">	    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2. 准备一个放图表的容器 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-ECharts-绘图流程"><a href="#3-3-ECharts-绘图流程" class="headerlink" title="3.3 ECharts 绘图流程"></a>3.3 ECharts 绘图流程</h4><ol>
<li>新建一个 HTML 文件，并在网页头部 <code>&lt;head&gt; ... &lt;/head&gt;</code> 部分引入在线的 <code>ECharts</code> 类库或者本地已经下载好的类库。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入在线的 ECharts 类库或者本地已经下载好的类库 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在网页创建一个容器，为 <code>ECharts</code> 准备一个具备大小（宽高）的 <strong><code>DOM</code></strong> <em>（Document Object Model, 文件对象模型 )</em> 。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 为 ECharts 准备一个具备大小(宽高)的 DOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>当页面加载时，获取 <code>DOM</code>，并初始化 <code>ECharts</code> 对象</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>指定配置项信息</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 省略上一步的操作</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">text</span>: <span class="string">&quot;ECharts 入门案例&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tooltip</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">yAxis</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                &#123;<span class="attr">name</span>:<span class="string">&#x27;销量&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]&#125;</span></span><br><span class="line"><span class="language-javascript">            ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>用刚指定的配置项和数据显示图表</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 省略上一步的操作...</span></span></span><br><span class="line"><span class="language-javascript">        myChart.<span class="title function_">setOption</span>(option);        </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-4-ECharts-常用配置项详解"><a href="#3-4-ECharts-常用配置项详解" class="headerlink" title="3.4 ECharts 常用配置项详解"></a>3.4 ECharts 常用配置项详解</h4><p>完成简单柱状图的绘制需要包含的组件包括：</p>
<ul>
<li><code>xAxis</code>：X 轴组件</li>
<li><code>yAxis</code>：Y 轴组件</li>
<li><code>series</code>：系列组件（我更喜欢称其序列组件）</li>
</ul>
<p>完善图形补充组件：</p>
<ul>
<li><code>title</code>：标题组件</li>
<li><code>legend</code>：图例组件</li>
<li><code>tooltip</code>：提示框组件</li>
<li><code>toolbox</code>：工具栏配置项</li>
<li><code>datazoom</code>：数据区域缩放</li>
</ul>
<h4 id="3-5-ECharts-样式设置"><a href="#3-5-ECharts-样式设置" class="headerlink" title="3.5 ECharts 样式设置"></a>3.5 ECharts 样式设置</h4><h5 id="3-5-1-ECharts-颜色主题-Theme"><a href="#3-5-1-ECharts-颜色主题-Theme" class="headerlink" title="3.5.1 ECharts 颜色主题(Theme)"></a>3.5.1 ECharts 颜色主题(Theme)</h5><ul>
<li>内置颜色主题（<code>dark</code>、<code>light</code>）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>样式设置<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height=900px; width:400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 内置颜色主题</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// var myCharts = echarts.init(dom, &quot;light&quot;);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myCharts = echarts.<span class="title function_">init</span>(dom, <span class="string">&quot;dark&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">text</span>: <span class="string">&quot;ECharts 入门案例&quot;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">tooltip</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123;<span class="attr">name</span>:<span class="string">&#x27;销量&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]&#125;</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                myCharts.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>自定义颜色主题</p>
<ul>
<li>通过 <code>JavaScript</code> 定义颜色主题</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure>

<ul>
<li>通过 <code>Json + jQuery</code> 定义颜色主题</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3-5-2-ECharts-调色盘"><a href="#3-5-2-ECharts-调色盘" class="headerlink" title="3.5.2 ECharts 调色盘"></a>3.5.2 ECharts 调色盘</h5><ul>
<li>全局调色盘</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>ECharts 全局调色盘<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        	<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>);	<span class="comment">// 获取到 DOM</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myCharts = echarts.<span class="title function_">init</span>(dom);			<span class="comment">// 初始化 ECharts对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 定义选项</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 颜色组件——全局调色盘</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">color</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">position</span>: <span class="string">&quot;bottom&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">max</span>: <span class="number">50</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 系列组件</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;销量1&quot;</span>, <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>] &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;销量2&quot;</span>, <span class="attr">data</span>: [<span class="number">4</span>, <span class="number">30</span>, <span class="number">26</span>, <span class="number">14</span>, <span class="number">8</span>, <span class="number">15</span>] &#125;</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                myCharts.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>系列调色盘</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>ECharts 系列调色盘<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        	<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>);	<span class="comment">// 获取到 DOM</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myCharts = echarts.<span class="title function_">init</span>(dom);			<span class="comment">// 初始化 ECharts对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 定义选项</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 颜色组件——全局调色盘</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">color</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">position</span>: <span class="string">&quot;bottom&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">max</span>: <span class="number">50</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 系列组件</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">type</span>: <span class="string">&quot;bar&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;销量1&quot;</span>, <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>], <span class="attr">color</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>] &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;销量2&quot;</span>, <span class="attr">data</span>: [<span class="number">4</span>, <span class="number">30</span>, <span class="number">26</span>, <span class="number">14</span>, <span class="number">8</span>, <span class="number">15</span>] &#125;</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                myCharts.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>系列调色盘与全局调色盘同时出现：<ul>
<li>当系列调色盘与全局调色盘同时出现时，图表使用系列调色盘中配置的颜色。</li>
</ul>
</li>
</ul>
<h5 id="3-5-3-ECharts-直接样式设置"><a href="#3-5-3-ECharts-直接样式设置" class="headerlink" title="3.5.3 ECharts 直接样式设置"></a>3.5.3 ECharts 直接样式设置</h5><p>直接样式设置（<code>itemStyle</code>、<code>lineStyle</code>、<code>areaStyle</code>、<code>label</code>、…）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>ECharts 全局调色盘<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:900px; height: 400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        	<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">position</span>: <span class="string">&#x27;bottom&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">max</span>: <span class="number">50</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">name</span>: <span class="string">&#x27;销量1&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>], </span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">symbol</span>: <span class="string">&#x27;triangle&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">symbolSize</span>:<span class="number">20</span>, </span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">itemStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">borderWidth</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">borderColor</span>: <span class="string">&#x27;blue&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">emphasis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">itemStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                                &#125;,</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">label</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">formmatter</span>: <span class="string">&quot;&#123;a&#125;\n&#123;b&#125;&#123;c&#125;&quot;</span>, <span class="comment">// 这是一个 label</span></span></span><br><span class="line"><span class="language-javascript">                                    <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;,&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">name</span>: <span class="string">&#x27;销量2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">data</span>: [<span class="number">4</span>, <span class="number">30</span>, <span class="number">26</span>, <span class="number">14</span>, <span class="number">8</span>, <span class="number">15</span>]</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    ],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">text</span>: <span class="string">&#x27;主标题-点击访问百度&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">link</span>: <span class="string">&#x27;https//www.baidu.com/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">target</span>: <span class="string">&#x27;blank&#x27;</span>,	<span class="comment">// 或者 self 也可以</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">subtext</span>: <span class="string">&#x27;副标题-点击访问个人网站&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">sublink</span>: <span class="string">&#x27;http://hello-nilera.com/&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        subtarget</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">textStyle</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">fontSize</span>: <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">fontStyle</span>: <span class="string">&#x27;italic&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">fontWeight</span>: <span class="string">&#x27;normal&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                myChart.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-5-4-ECharts-视觉映射-Visual-Map"><a href="#3-5-4-ECharts-视觉映射-Visual-Map" class="headerlink" title="3.5.4 ECharts 视觉映射(Visual Map)"></a>3.5.4 ECharts 视觉映射(Visual Map)</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>样式设置——视觉映射组件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        	<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 连续型视觉映射组件</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    visualMap: [</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                        &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                            type: &#x27;continuous&#x27;,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                            min: 0,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                            max: 40,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                            range: [4, 15],</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                            calculable: true</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                        &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    ],</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    */</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 分段型视觉映射组件</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">visualMap</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;piecewise&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">min</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">max</span>: <span class="number">40</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">text</span>: <span class="string">&#x27;ECharts 视觉映射组件&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">tooltip</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">legend</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123; &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">name</span>: <span class="string">&#x27;销量 1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]</span></span><br><span class="line"><span class="language-javascript">                        &#125;,&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">name</span>: <span class="string">&#x27;销量 2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">data</span>: [<span class="number">8</span>, <span class="number">12</span>, <span class="number">30</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">26</span>]</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    ]</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                myChart.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;        </span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-6-ECharts-中的事件和行为"><a href="#3-6-ECharts-中的事件和行为" class="headerlink" title="3.6 ECharts 中的事件和行为"></a>3.6 ECharts 中的事件和行为</h4><p><strong>概念：</strong>在 <code>Apache ECharts</code> 的图表中用户的操作将会触发相应的事件。开发者可以监听这些事件，然后通过回调函数做相应的处理。</p>
<p><strong>事件分类：</strong> 在 <code>ECharts</code> 中事件分为两种类型，一种是用户鼠标操作点击，或者 <code>hover</code> 图表的图形时触发的事件，还有一种是用户在使用可以交互的组件后触发的行为事件，例如在切换图例开关时触发的 <a target="_blank" rel="noopener" href="https://echarts.apache.org/api.html#events.legendselectchanged"><code>legendselectchanged</code></a> 事件（这里需要注意切换图例开关是不会触发事件的），数据区域缩放时触发的 <a target="_blank" rel="noopener" href="https://echarts.apache.org/api.html#events.legendselectchanged"><code>datazoom</code></a> 事件等等。</p>
<h4 id="3-7-ECharts-实例"><a href="#3-7-ECharts-实例" class="headerlink" title="3.7 ECharts 实例"></a>3.7 ECharts 实例</h4><h5 id="3-7-1-柱状图"><a href="#3-7-1-柱状图" class="headerlink" title="3.7.1 柱状图"></a>3.7.1 柱状图</h5><p>绘制简单的柱状图，一些配置项：</p>
<ul>
<li><code>xAxis/yAxis</code><ul>
<li><code>type</code>：<code>category</code> 类目轴；<code>value</code> 数值轴；<code>time</code> 时间；<code>log</code> 对数轴</li>
<li><code>data</code>：设置类目的数据（数组）</li>
</ul>
</li>
<li><code>series</code><ul>
<li><code>type</code>：设置系列的类型（设置绘制什么图表）</li>
<li><code>name</code>：设置系列名称，会用在 <code>tooltip</code> 和 <code>legend</code> 中</li>
<li><code>data</code>：系列中的数据内容数组，定义当前这个系列中每个柱子的高度</li>
<li><code>label</code>：设置图形上的文本标签（把数值显示在每个柱子上)</li>
<li><code>itemStyle</code>：设置图形样式</li>
<li><code>showBackground</code>：设置是否显示背景色（默认不显示）</li>
<li><code>backgroundStyle</code>：设置背景色</li>
</ul>
</li>
</ul>
<h5 id="3-7-2-折线图、堆叠折线图"><a href="#3-7-2-折线图、堆叠折线图" class="headerlink" title="3.7.2 折线图、堆叠折线图"></a>3.7.2 折线图、堆叠折线图</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        	<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> myCharts = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">xAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [<span class="string">&#x27;周一&#x27;</span>, <span class="string">&#x27;周二&#x27;</span>, <span class="string">&#x27;周三&#x27;</span>, <span class="string">&#x27;周四&#x27;</span>, <span class="string">&#x27;周五&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">yAxis</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>, <span class="attr">data</span>: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">20</span>, <span class="number">10</span>]&#125;</span></span><br><span class="line"><span class="language-javascript">                    ],</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">toolbox</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">feature</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">show</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">dataZoom</span>: &#123; <span class="comment">// 数据区域缩放</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="comment">// 框选型数据区域缩放组件(dataZoomSelect): 提供一个选框进行区域缩放。</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="comment">// 即 toolbox.feature.dataZoom</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">yAxisIndex</span>: <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">dataView</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">readOnly</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">magicType</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">type</span>: [<span class="string">&#x27;line&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">restore</span>: &#123; <span class="comment">// 配置项还原</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">saveAsImage</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="attr">type</span>: <span class="string">&#x27;jpg&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                myCharts.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-7-3-面积图和堆叠面积图"><a href="#3-7-3-面积图和堆叠面积图" class="headerlink" title="3.7.3 面积图和堆叠面积图"></a>3.7.3 面积图和堆叠面积图</h5><h5 id="3-7-4-雷达图"><a href="#3-7-4-雷达图" class="headerlink" title="3.7.4 雷达图"></a>3.7.4 雷达图</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script type=&quot;text/javascript&quot; src=&quot;js/echarts.min.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.staticfile.org/jquery/2.2.4/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:900px; height: 400px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> myCharts = echarts.<span class="title function_">init</span>(dom);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">radar</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">indicator</span>: [</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">name</span>: <span class="string">&#x27;身高&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">name</span>: <span class="string">&#x27;体重&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">name</span>: <span class="string">&#x27;年龄&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123; <span class="attr">name</span>: <span class="string">&#x27;跑步速度&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                    ],</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">series</span>: [</span></span><br><span class="line"><span class="language-javascript">                    &#123; </span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">type</span>: <span class="string">&#x27;radar&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">data</span>: [</span></span><br><span class="line"><span class="language-javascript">                            &#123; <span class="attr">name</span>: <span class="string">&#x27;训练前&#x27;</span>, <span class="attr">value</span>: [<span class="number">178</span>, <span class="number">60</span>, <span class="number">20</span>, <span class="number">50</span>] &#125;, </span></span><br><span class="line"><span class="language-javascript">                            &#123; <span class="attr">name</span>: <span class="string">&#x27;训练后&#x27;</span>, <span class="attr">value</span>: [<span class="number">178</span>, <span class="number">58</span>, <span class="number">20</span>, <span class="number">52</span>] &#125;, </span></span><br><span class="line"><span class="language-javascript">                            &#123; <span class="attr">name</span>: <span class="string">&#x27;训练一年后&#x27;</span>, <span class="attr">value</span>: [<span class="number">180</span>, <span class="number">55</span>, <span class="number">21</span>, <span class="number">55</span>]&#125;</span></span><br><span class="line"><span class="language-javascript">                        ] </span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                ],</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tooltip</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    </span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">toolbox</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">show</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">feature</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">saveAsImage</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">show</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                	&#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            myCharts.<span class="title function_">setOption</span>(options);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>





</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-22T07:55:58.000Z" title="2024/6/22 15:55:58">2024-06-22</time>发表</span><span class="level-item"><time dateTime="2024-07-08T01:54:01.794Z" title="2024/7/8 09:54:01">2024-07-08</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/HBase/">HBase</a></span><span class="level-item">44 分钟读完 (大约6534个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/22/HBaseExamReview/">HBaseExamReview</a></p><div class="content"><h2 id="HBase-考察知识点复习"><a href="#HBase-考察知识点复习" class="headerlink" title="HBase 考察知识点复习"></a>HBase 考察知识点复习</h2><h3 id="知识点（选择）"><a href="#知识点（选择）" class="headerlink" title="知识点（选择）"></a>知识点（选择）</h3><ol>
<li><p>Region的分裂</p>
<p>在<strong>HBase</strong>中，<code>Region</code> 是数据管理的基本单位，类似于关系型数据库中的分区。它是 <strong>HBase</strong> 数据存储和组织的核心概念之一。<br><code>Region</code> 的概念和特点：<br><code>Region</code> 是 <code>HBase</code> 数据管理的基本单位，它负责存储一定范围内的数据。每个 <code>Region</code> 由一个起始 <code>RowKey</code> 和 终止 <code>RowKey</code> 定义，负责存储该范围内的数据。与关系型数据库中的分区类似，<code>HBase</code> 中的 <code>Region</code> 可以根据数据量的大小进行动态调整。当一个<code>Region</code> 的数据量过大时，它会被 <strong>分裂</strong> 成两个新的 <code>Region</code>。相反，当数据量较小时，两个或多个 <code>Region</code> 可能会合并成一个新的<code>Region</code>。</p>
<p>当 <code>MemStore</code> 的数据超过阈值时，将数据溢写磁盘，生成一个 <code>StoreFile</code> 文件。当 <code>Region</code> 中最大<code>Store</code> 的大小超过阈值时，<code>Region</code> 分裂，等分成两个 <code>Region</code>，实现数据访问的负载均衡。新的 <code>Region</code> 的位置由 <code>HMaster</code> 来确定在哪个<code>RegionServer</code> 中。</p>
</li>
<li><p>查看表结构的命令</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[subowen@bigdata ~]$ hbase shell</span><br><span class="line">2024-07-05 23:04:35,655 WARN  [main] util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">HBase Shell</span><br><span class="line">Use <span class="string">&quot;help&quot;</span> to get list of supported commands.</span><br><span class="line">Use <span class="string">&quot;exit&quot;</span> to quit this interactive shell.</span><br><span class="line">For Reference, please visit: http://hbase.apache.org/2.0/book.html<span class="comment">#shell</span></span><br><span class="line">Version 2.1.8, rd8333e556c8ed739cf39dab58ddc6b43a50c0965, Tue Nov 19 15:29:04 UTC 2019</span><br><span class="line">Took 0.0028 seconds</span><br><span class="line">hbase(main):001:0&gt; list</span><br><span class="line">TABLE</span><br><span class="line">logs</span><br><span class="line">logs_20240606</span><br><span class="line">logs_20240607</span><br><span class="line">user</span><br><span class="line">sdutcm:bigdata</span><br><span class="line">5 row(s)</span><br><span class="line">Took 1.2756 seconds</span><br><span class="line">=&gt; [<span class="string">&quot;logs&quot;</span>, <span class="string">&quot;logs_20240606&quot;</span>, <span class="string">&quot;logs_20240607&quot;</span>, <span class="string">&quot;user&quot;</span>, <span class="string">&quot;sdutcm:bigdata&quot;</span>]</span><br><span class="line"></span><br><span class="line">hbase(main):002:0&gt; describe <span class="string">&#x27;sdutcm:bigdata&#x27;</span></span><br><span class="line">Table sdutcm:bigdata is ENABLED</span><br><span class="line">sdutcm:bigdata</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; <span class="string">&#x27;info&#x27;</span>, VERSIONS =&gt; <span class="string">&#x27;5&#x27;</span>, EVICT_BLOCKS_ON_CLOSE =&gt; <span class="string">&#x27;false&#x27;</span>, NEW_VERSION_BEHAVIOR =&gt; <span class="string">&#x27;false&#x27;</span>, KEEP_DELETED_CELLS =&gt; <span class="string">&#x27;FALSE&#x27;</span>, CACHE_DATA_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, DATA_BLOCK_ENCODING =&gt; <span class="string">&#x27;NONE&#x27;</span>, TTL =&gt; <span class="string">&#x27;FOREVER&#x27;</span>, MIN_VERSIONS =&gt; <span class="string">&#x27;0&#x27;</span>, REPLICATION_SCOPE =&gt; <span class="string">&#x27;0&#x27;</span>, BLOOMFILTER =&gt; <span class="string">&#x27;ROW&#x27;</span>, CACHE_INDEX_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, IN_MEMORY =&gt; <span class="string">&#x27;false&#x27;</span>, CACHE_BLOOMS_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, PREFETCH_BLOCKS_ON_OPEN =&gt; <span class="string">&#x27;false&#x27;</span>, COMPRESSION =&gt; <span class="string">&#x27;NONE&#x27;</span>, BLOCKCACHE =&gt; <span class="string">&#x27;true&#x27;</span>, BLOCKSIZE =&gt; <span class="string">&#x27;65536&#x27;</span>&#125;</span><br><span class="line">&#123;NAME =&gt; <span class="string">&#x27;msg&#x27;</span>, VERSIONS =&gt; <span class="string">&#x27;5&#x27;</span>, EVICT_BLOCKS_ON_CLOSE =&gt; <span class="string">&#x27;false&#x27;</span>, NEW_VERSION_BEHAVIOR =&gt; <span class="string">&#x27;false&#x27;</span>, KEEP_DELETED_CELLS =&gt; <span class="string">&#x27;FALSE&#x27;</span>, CACHE_DATA_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, DATA_BLOCK_ENCODING =&gt; <span class="string">&#x27;NONE&#x27;</span>, TTL =&gt; <span class="string">&#x27;FOREVER&#x27;</span>, MIN_VERSIONS =&gt; <span class="string">&#x27;0&#x27;</span>, REPLICATION_SCOPE =&gt; <span class="string">&#x27;0&#x27;</span>, BLOOMFILTER =&gt; <span class="string">&#x27;ROW&#x27;</span>, CACHE_INDEX_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, IN_MEMORY =&gt; <span class="string">&#x27;false&#x27;</span>, CACHE_BLOOMS_ON_WRITE =&gt; <span class="string">&#x27;false&#x27;</span>, PREFETCH_BLOCKS_ON_OPEN =&gt; <span class="string">&#x27;false&#x27;</span>, COMPRESSION =&gt; <span class="string">&#x27;NONE&#x27;</span>, BLOCKCACHE =&gt; <span class="string">&#x27;true&#x27;</span>, BLOCKSIZE =&gt; <span class="string">&#x27;65536&#x27;</span>&#125;</span><br><span class="line">2 row(s)</span><br><span class="line">Took 0.3826 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):003:0&gt; scan <span class="string">&#x27;sdutcm:bigdata&#x27;</span></span><br><span class="line">ROW                                      COLUMN+CELL</span><br><span class="line"> 2001                                    column=info:name, timestamp=1719026353219, value=wang</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.2295 seconds</span><br><span class="line">hbase(main):004:0&gt; </span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>启动和关闭 <code>HBase Shell</code> 的命令</p>
<p>启动 <code>HBase Shell</code> 之前需要保证 <code>ZooKeeper</code>、<code>Hadoop HDFS</code> 和 <code>HBase</code> 已经启动。可以使用 <code>hbase shell</code> 进入 <code>HBase Shell</code>，在 <code>HBase Shell</code> 中可以使用 <code>exit</code> 或 <code>quit</code> 退出。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[subowen@bigdata ~]$ zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /home/subowen/apps/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /home/subowen/apps/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Mode: standalone</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ start-dfs.sh</span><br><span class="line">Starting namenodes on [bigdata]</span><br><span class="line">bigdata: starting namenode, logging to /home/subowen/apps/hadoop-2.7.6/logs/hadoop-subowen-namenode-bigdata.out</span><br><span class="line">bigdata: starting datanode, logging to /home/subowen/apps/hadoop-2.7.6/logs/hadoop-subowen-datanode-bigdata.out</span><br><span class="line">Starting secondary namenodes [0.0.0.0]</span><br><span class="line">0.0.0.0: starting secondarynamenode, logging to /home/subowen/apps/hadoop-2.7.6/logs/hadoop-subowen-secondarynamenode-bigdata.out</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ start-hbase.sh</span><br><span class="line">running master, logging to /home/subowen/apps/hbase-2.1.8/logs/hbase-subowen-master-bigdata.out</span><br><span class="line">bigdata: running regionserver, logging to /home/subowen/apps/hbase-2.1.8/logs/hbase-subowen-regionserver-bigdata.out</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ jps</span><br><span class="line">1746 NameNode</span><br><span class="line">1572 QuorumPeerMain</span><br><span class="line">2071 SecondaryNameNode</span><br><span class="line">2874 Jps</span><br><span class="line">2379 HRegionServer</span><br><span class="line">1852 DataNode</span><br><span class="line">2285 HMaster</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ hbase shell</span><br><span class="line">2024-07-05 22:47:57,331 WARN  [main] util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">HBase Shell</span><br><span class="line">Use <span class="string">&quot;help&quot;</span> to get list of supported commands.</span><br><span class="line">Use <span class="string">&quot;exit&quot;</span> to quit this interactive shell.</span><br><span class="line">For Reference, please visit: http://hbase.apache.org/2.0/book.html<span class="comment">#shell</span></span><br><span class="line">Version 2.1.8, rd8333e556c8ed739cf39dab58ddc6b43a50c0965, Tue Nov 19 15:29:04 UTC 2019</span><br><span class="line">Took 0.0051 seconds</span><br><span class="line">hbase(main):001:0&gt; <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ hbase shell</span><br><span class="line">2024-07-05 22:52:46,337 WARN  [main] util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">HBase Shell</span><br><span class="line">Use <span class="string">&quot;help&quot;</span> to get list of supported commands.</span><br><span class="line">Use <span class="string">&quot;exit&quot;</span> to quit this interactive shell.</span><br><span class="line">For Reference, please visit: http://hbase.apache.org/2.0/book.html<span class="comment">#shell</span></span><br><span class="line">Version 2.1.8, rd8333e556c8ed739cf39dab58ddc6b43a50c0965, Tue Nov 19 15:29:04 UTC 2019</span><br><span class="line">Took 0.0025 seconds</span><br><span class="line">hbase(main):001:0&gt; quit</span><br><span class="line">[subowen@bigdata ~]$</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>启动<code>ZooKeeper</code>和查看 <code>ZooKeeper</code> 的运行状态的命令</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[subowen@bigdata ~]$ zkServer.sh start</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /home/subowen/apps/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line"></span><br><span class="line">[subowen@bigdata ~]$ zkServer.sh status</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /home/subowen/apps/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Mode: standalone</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>修改表结构的命令</p>
<p>使用 <code>alter</code> 命令可以对表的结构进行修改：</p>
<p>表名创建时写的所有和列族相关的信息，都可以后续通过<code>alter</code>修改，包括<strong>增加</strong>、<strong>删除</strong>列族。</p>
<p>① 增加列族和修改信息都使用覆盖的方法</p>
<p>​	修改列族的版本，<code>VERSIONS =&gt; 6</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; 6</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 4.0145 seconds</span><br></pre></td></tr></table></figure>

<p>​	添加列族 <code>tel</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):002:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;tel&#x27;, VERSIONS =&gt; 6</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.4498 seconds</span><br></pre></td></tr></table></figure>

<p>​	查看修改后的数据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):003:0&gt; describe &#x27;bigdata:person&#x27;</span><br><span class="line">Table bigdata:person is ENABLED</span><br><span class="line">bigdata:person</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;msg&#x27;, VERSIONS =&gt; &#x27;6&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fal</span><br><span class="line">se&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, IN</span><br><span class="line">_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line"></span><br><span class="line">&#123;NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; &#x27;5&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fa</span><br><span class="line">lse&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, I</span><br><span class="line">N_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line"></span><br><span class="line">&#123;NAME =&gt; &#x27;tel&#x27;, VERSIONS =&gt; &#x27;6&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fal</span><br><span class="line">se&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, IN</span><br><span class="line">_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0795 seconds</span><br></pre></td></tr></table></figure>

<p>② 删除列族</p>
<p>​	删除列族可以用以下两种方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;tel&#x27;, METHOD =&gt; &#x27;delete&#x27;</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.1046 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):002:0&gt; alter &#x27;bigdata:person&#x27;, &#x27;delete&#x27; =&gt; &#x27;msg&#x27;</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.9721 seconds</span><br></pre></td></tr></table></figure>

</li>
<li><p><code>HBase</code> 的 <code>Java API</code>中，数据表描述的对象是什么？<code>TableDescriptor</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TableDescriptor</span><br></pre></td></tr></table></figure>

</li>
<li><p><code>ZooKeeper</code> 的访问端口号，<code>HBase</code> 的Web访问端口号</p>
<p><code>ZooKeeper</code> 的访问端口号为 <code>2181</code></p>
<p><code>HBase</code> 的 Web 访问端口号为 <code>16010</code></p>
</li>
<li><p>修改表中列族的<code>Version</code>版本的命令</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter <span class="string">&#x27;table_name&#x27;</span>, &#123;NAME =&gt; <span class="string">&#x27;column_family&#x27;</span>, VERSIONS =&gt; number_of_versions&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li><p>删除表中数据的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete <span class="string">&#x27;ns:tb&#x27;</span>, <span class="string">&#x27;rk&#x27;</span>, <span class="string">&#x27;cf:col&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动和关闭ZooKeeper的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动 ZooKeeper</span></span><br><span class="line">zkServer.sh start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭 ZooKeeper</span></span><br><span class="line">zkServer.sh stop</span><br></pre></td></tr></table></figure>

</li>
<li><p>更新表数据的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter <span class="string">&#x27;ns:tb&#x27;</span>, &#123;NAME =&gt; <span class="string">&#x27;cf:col&#x27;</span>, VERSIONS =&gt; 5&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HBase安装时，配置文件有那几个？</p>
<ul>
<li><code>hbase-env.sh</code></li>
<li><code>hbase-site.xml</code></li>
<li><code>regionservers</code></li>
<li><code>.bashrc</code></li>
</ul>
</li>
<li><p>关于NoSQL数据库有哪些？</p>
<ul>
<li><code>HBase</code></li>
<li><code>Cassandra</code></li>
<li><code>BigTable</code></li>
</ul>
</li>
<li><p>删除表操作</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disable</span> <span class="string">&#x27;ns:tb&#x27;</span></span><br><span class="line">drop <span class="string">&#x27;ns:tb&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="15">
<li><p>HBase进程名，ZooKeeper 的进程名等相关进程</p>
<ul>
<li><code>HMaster</code></li>
<li><code>HRegionServer</code></li>
<li><code>QuorumPeerMain</code></li>
</ul>
</li>
<li><p><code>HBase</code> 依托于哪个文件存储系统？</p>
<p><code>HBase</code> 主要依托于 <code>Hadoop HDFS</code>。</p>
</li>
<li><p>创建表的语法结构</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create <span class="string">&#x27;ns:tb&#x27;</span>, &#123;NAME =&gt; <span class="string">&#x27;cf&#x27;</span>, VERSIONS=5&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询表数据的Shell语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; <span class="string">&#x27;cf:col&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">scan <span class="string">&#x27;ns:tb&#x27;</span></span><br></pre></td></tr></table></figure>

</li>
<li><p>什么是列族<code>COLUMN FAMILY</code></p>
</li>
<li><p>HBase的数据类型</p>
<ul>
<li>数据类型<ul>
<li>基本数据类型<ul>
<li>字符串(String)：用于存储文本数据，如名称、描述等。</li>
<li>整数(Int)：用于存储整数数据，如计数、编号等。</li>
<li>浮点数(Float)：用于存储小数数据，如金额、比率等。</li>
<li>布尔值(Boolean)：用于存储逻辑值，如是否、有效等。</li>
</ul>
</li>
<li>复合数据类型<ul>
<li>列族(Column Family)：列族是HBase表中数据的组织方式，用于存储一组相关的列。列族是HBase表中数据的基本组织单位，每个列族对应一个数据节点。</li>
<li>列(Column)：列是HBase表中数据的基本单位，用于存储一组相关的单元格。列可以包含多个单元格，每个单元格对应一个数据值。</li>
<li>单元格(Cell)：单元格是HBase表中数据的基本单位，用于存储一组相关的数据值。单元格包含一个键(Row Key)、一个列(Column)和一个值(Value)。</li>
</ul>
</li>
</ul>
</li>
<li>数据模型<ul>
<li>NameSpace：命名空间，类似于关系型数据库的 <code>Database</code> 概念，每个命名空间下有多个表。HBase 两个自带的命名空间，分别是 <code>hbase</code> 和 <code>default</code>，<code>hbase</code> 中存放的是 <code>HBase</code> 内置的表，<code>default</code>表是用户默认使用的命名空间。</li>
<li>Table：类似于关系型数据库的表概念。不同的是，HBase 定义表时只需要声明列族即可，不需要声明具体的列。因为数据存储是稀疏的，所以往 HBase 写入数据时，字段可以动态、按需指定。因此，和关系型数据库相比，HBase 能够轻松应对字段变更的场景。</li>
<li>Row：<code>HBase</code> 表中的每行数据都由一个 <strong>RowKey</strong> 和多个 <strong>Column</strong>（列）组成，数据是按照 <code>RowKey</code> 的字典顺序存储的，并且查询数据时只能根据 <code>RowKey</code> 进行检索，所以 <code>RowKey</code> 的设计十分重要。</li>
<li>Column：<code>HBase</code> 中的每个列都由 <code>Column Family</code>(列族)和 <code>Column Qualifier</code>（列限定符）进行限定，例如 <code>info：name</code>，<code>info：age</code>。建表时，只需指明列族，而列限定符无需预先定义。</li>
<li>Time Stamp：用于标识数据的不同版本<code>Version</code>，每条数据写入时，系统会自动为其加上该字段，其值为写入 <code>HBase</code> 的时间。</li>
<li>Cell：由 <code>&#123;rowkey, column Family:Column Qualifier, timestamp&#125;</code> 唯一确定的单元。<code>Cell</code> 中的数据全部是字节码形式存贮。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="判断题"><a href="#判断题" class="headerlink" title="判断题"></a>判断题</h3><ol>
<li><p><code>HBase</code> 本身是用 <code>C++</code> 语言编写的，因此具有很高的执行效率。（ × ）</p>
<p><code>HBase</code> 本身是由 <code>Java</code> 语言编写的，尽管使用 <code>Java</code>，其执行效率还是较高的。</p>
</li>
<li><p><code>HBase</code> 优化目前主要工作集中于 <code>Rowkey</code> 优化。（ × ）</p>
<p><code>HBase</code> 的优化目前主要工作集中在 <code>RowKey</code> 的设计、参数优化、<code>JVM</code>调优等方面。</p>
</li>
<li><p>可以想象 <code>HBase</code> 是通过**”三维”**的表来存储数据的，通过时间戳保存数据的历史版本。（ √ ）</p>
</li>
<li><p>安装 <code>HBase</code> 完全分布式时，需要确保 <code>SSH</code> 和 <code>JDK</code> 是可以正常使用的。（ √ ）</p>
<p>在安装 HBase 的完全分布式部署时，确保 <code>SSH</code> 和 <code>JDK</code> 可以正常使用是非常重要的。具体来说：</p>
<ul>
<li><p><strong>SSH</strong>：在分布式部署中，<code>HBase</code> 的各个节点之间需要进行通信和协作，而 <code>SSH</code> 是用于在不同节点之间建立安全连接的工具。确保节点之间可以互相访问、通信和传输文件是部署 <code>HBase</code> 所必需的。通常需要设置免密登录，以便在节点之间进行信息交换而无需手动输入密码。</p>
</li>
<li><p><strong>JDK</strong>：HBase 是基于 <code>Java</code> 编程语言开发的，因此必须确保在每个节点上安装并配置了适当的 <code>JDK</code>。<code>HBase</code> 运行需要 <code>Java</code> 环境，且为了确保 <code>HBase</code> 能够正常工作，必须保证每个节点都能够使用正确的 <code>JDK</code> 版本。</p>
</li>
</ul>
</li>
<li><p><code>Hadoop</code> 中引入 <code>HBase</code> 的其中一个原因是：<code>HDFS</code> 在处理连续数据时比较吃力。（ × ）·</p>
<p><code>HDFS</code> 的设计目标之一就是为了有效地处理大规模数据，包括连续数据（如大文件、数据流等）和离散数据（如小文件、批量数据等）。<code>Hadoop</code> 中之所以引入 <code>HBase</code>，是需要 <code>HBase</code> 提供实时访问数据的能力，使得 <code>Hadoop</code> 生态系统更全面（此外还有高可伸缩性、高容错、多版本策略等）。</p>
</li>
<li><p>利用 <code>HBase</code> 技术可在廉价 <code>PC Server</code> 上搭建起大规模结构化存储集群。（ √ ）</p>
</li>
<li><p><code>HBase</code> 是 <code>Hadoop</code> 生态系统的一个组成部分。（ √ ）</p>
<p><code>HBase</code> 是继 <code>Google Bigtable</code> 之后创建的分布式、开源、版本化、非关系型数据库。它是 <code>Hadoop</code> 生态系统的重要组件，利用 <code>HDFS</code> 的容错功能，提供对数据的实时读写访问。 <code>HBase</code> 尽管是数据库，但也可以称为数据存储系统，因为它不提供触发器、查询语言和二级索引等 <code>RDBMS</code> 功能。</p>
</li>
<li><p>使用 <code>HBase</code> 时，无需启动服务就可以直接在开发环境中调用 <code>HBase</code> 的相关功能。（ × ）</p>
<p><code>HBase</code> 是基于 <code>Hadoop</code> 的，在使用 <code>HBase</code> 之前需要启动 <code>ZooKeeper</code> 和 <code>Hadoop</code> 才能使用 <code>HBase</code>。</p>
</li>
<li><p>配置 <code>HBase</code> 分布式部署的过程中，可以通过 <code>cp</code> 命令把文件复制到运行在不同机器上的节点中。（ × ）</p>
<p>可以使用 <code>scp</code> 命令、<code>rsync</code>命令，或者基于 <code>rsync</code> 编写工具 <code>xsync</code> 进行传输。</p>
</li>
</ol>
<h3 id="填空题"><a href="#填空题" class="headerlink" title="填空题"></a>填空题</h3><ol>
<li><p>判断表是否存在，禁用表，删除表，创建表，查看命名空间等 <code>Shell</code> 命令。</p>
<ul>
<li>判断表是否存在 ：<code>exists &#39;namespace_name:table_name&#39;</code></li>
<li>禁用&#x2F;启用表：<code>disable &#39;namespace_name:table_name&#39;</code> &#x2F; <code>enable namespace_name:table_name</code></li>
<li>删除表：删除表之前需要禁用表，<code>disable &#39;namespace_name:table_name&#39;</code>，然后再删除表，<code>drop &#39;namespace_name:tablename&#39;</code></li>
<li>创建表：<code>create &#39;namespace_name:table_name&#39;, &#123;NAME =&gt; &#39;cf1&#39;, VERSION=5&#125;, &#123;NAME =&gt; &#39;cf2&#39;, VERSION=5&#125;</code></li>
<li>查看命名空间：<code>list_namespace</code></li>
</ul>
</li>
<li><p><code>HBase</code> 的进程有哪些：关于这些进程的详细说明见 <a href="https://hello-nilera.com/2024/06/02/QuickPassHBase/"><code>QuickPassHBase</code></a> 或 <strong>简答题 T4</strong>。</p>
<ul>
<li><code>HBase</code> 的主要进程：<code>HMaster</code>、<code>HRegionServer</code></li>
<li><code>HBase</code> 所依赖的两个外部的服务：<code>ZooKeeper</code>、<code>HDFS</code></li>
</ul>
</li>
<li><p>行键是什么：<code>rowkey</code></p>
<p>在 <code>HBase</code> 中，行键唯一标识了 <code>HBase</code> 表的一行，可以通过单个行键或行键区间的方式访问表。行键保存为 <em>字节数组</em> ，以<em>字典序</em> 排序存储。</p>
</li>
<li><p><code>HBase</code> 是一个什么样的分布式存储系统。（非关系型）</p>
<p><code>Apache HBase™</code> 是以 <code>HDFS</code> 为数据存储的，一种<strong>分布式</strong>、<strong>可扩展</strong>的 <code>NoSQL</code> 数据库。<strong>HBase</strong> 是一款面向列存储，用于存储处理海量数据的 <strong>NoSQL</strong> 数据库。</p>
<p><em><strong>HBase</strong></em> 的理论原型是 <strong>Google</strong> 的 <strong>BigTable</strong> 论文。他是一个<strong>高可靠性</strong>、<strong>高性能</strong>、<strong>面向列</strong>、<strong>可伸缩</strong>的<strong>分布式</strong>存储系统。</p>
</li>
</ol>
<h3 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h3><ol>
<li><p><code>HBase</code> 的基础核心组件有哪些？分别什么作用？</p>
<ul>
<li><p>HBase-Client<br>客户端，用来访问 <code>HBase</code> 集群。可以和 <code>Hbase</code> 交互，也可以和 <code>HRegionServer</code> 交互。通过 <code>HBase RPC</code> 来访问对应的接口。</p>
<p>这里的客户端模式有多种，可以是 <code>Thrift</code>、<code>Avro</code>、<code>Rest</code> 等。</p>
<p>另外，<code>hbase-client</code> 自身会缓存 <code>region</code> 的一些信息。</p>
</li>
<li><p>ZooKeeper<br>作用：</p>
<ul>
<li><code>HMaster</code> 的高可用</li>
<li>存储 <code>ROOT</code> 表的地址、<code>HMaster</code> 的地址</li>
<li>存储所有 <code>HRegionServer</code> 的状态，监控 <code>HRegionServer</code> 的上下限</li>
<li>存储 <code>HBase</code> 的一些 <code>Schema</code> 和 <code>Table</code> 的元数据</li>
</ul>
</li>
<li><p>HMaster</p>
<p>HMaster可以启动多个，通过选举机制来保证只有一个 <code>HMaster</code> 正常运行并提供服务，其他的 <code>HMaster</code> 作为 <code>standby</code> 来保证高可用。<code>HMaster</code> 主要负责 <strong>表</strong> 和 <strong>Region</strong> 的管理工作。如：</p>
<ul>
<li>用户对表的增删改查</li>
<li>管理 <code>RegionServer</code> 的负载均衡，调整 <code>Region</code> 的分布</li>
<li>在 <code>RegionServer</code> 宕机或下线后，负责迁移 <code>RegionServer</code> 上的 <code>Region</code> 到其他的 <code>RegionServer</code> 上</li>
<li><code>Region</code> 在分裂后，负责分配新的 <code>Region</code></li>
</ul>
</li>
<li><p>HRegionServer<br><code>HRegionServer</code> 是 <code>HBase</code> 中真正的工作节点，主要负责响应用户的 I&#x2F;O 请求，向 HDFS 文件系统读写数据，以及 Region 的数据文件的合并和拆分等，是 HBase 中最核心的模块。</p>
<p>在 <code>HBase</code> 中，一张表由多个的 <code>HRegion</code> 组成，一个 <code>HRegionServer</code> 中管理着多个 <code>HRegion</code> 对象。而一个 <code>HRegion</code> 由多个<code>HStore</code> 组成，每个<code>HStore</code>对象都对应着表的一个列族 （Column Family）。之后，一个<code>HStore</code>又由一个<code>MemStore</code>和多个<code>StoreFile</code>组成。这些 <code>StoreFile</code> 就是<code>hbase</code> 存储在 <code>HDFS</code>上的数据文件，<code>MemStore</code> 表示还在内存中未刷新到文件上的那些数据。</p>
</li>
</ul>
</li>
<li><p><code>HBase</code> 的写流程， 读流程？</p>
<ul>
<li><p>写流程</p>
<p>写流程顺序正如 <code>API</code> 编写顺序，首先创建 <code>HBase</code> 的重量级连接。</p>
<p>① 首先访问 <code>ZooKeeper</code>，获取 <code>hbase:meta</code> 表位于哪个 <code>Region Server</code> </p>
<p>② 访问对应的 <code>Region Server</code>，获取 <code>hbase:meta</code> 表，将其缓存到连接中，作为连接属性 <code>MetaCache</code>，由于 <code>meta</code> 表具有一定的数据量，导致了创建连接比较慢；</p>
<p>之后使用创建的连接获取 <code>Table</code>，这是一个轻量级的连接，只有在第一次创建的时候会检查表格是否存在访问<code>RegionServer</code>，之后在获取 <code>Table</code> 时不会访问 <code>RegionServer</code></p>
<p>③ 调用 <code>Table</code> 的 <code>put</code> 方法写入数据，此时还需要解析 <code>RowKey</code>，对照缓存的 <code>MetaCache</code>，查看具体写入的位置有哪个 <code>RegionServer</code></p>
<p>④ 将数据顺序写入（追加）到 <code>WAL</code>，此处写入是直接落盘的，并设置专门的线程控制 <code>WAL</code> 预写日志的滚动（类似 Flume）；</p>
<p>⑤ 根据写入命令的 <code>RowKey</code> 和 <code>ColumnFamily</code> 查看具体写入到哪个 <code>MemStore</code>，并且在 <code>MemStore</code> 中排序</p>
<p>⑥ 向客户端发送 <code>ACK</code></p>
<p>⑦ 等达到 <code>MemStore</code> 的刷写时机后，将数据刷写到对应的 <code>Store</code> 中。</p>
</li>
<li><p>读流程</p>
<p>读流程创建连接的方式同写流程。创建完连接后：</p>
<p>① 创建 <code>Table</code> 对象发送 <code>get</code> 请求。</p>
<p>② 优先访问 <code>Block Cache</code>（读缓存），查找是否之前读取过，并且可以读取 <code>HFile</code> 的索引信息和布隆过滤器。</p>
<p>③ 不管读缓存中是否已经有数据了（可能已经过期了），都需要再次读取写缓存和 <code>store</code> 中的文件。</p>
<p>④ 最终将所有读取到的数据合并版本，按照 <code>get</code> 的要求返回即可。</p>
</li>
</ul>
</li>
<li><p><code>HBase</code> 的特点有哪些？优点或缺点？</p>
<p><em><strong>HBase的特点：</strong></em>(强 &#x2F; 自动 &#x2F; 高 &#x2F; 海集 &#x2F; 并 &#x2F; 列 &#x2F; 多 &#x2F; 块 &#x2F; 运行 &#x2F; 稀)</p>
<ul>
<li><p><strong>强一致性的读&#x2F;写</strong>：<code>HBase</code>不是”最终一致性”数据库，它非常适合于诸如高速计数器聚合等任务。</p>
</li>
<li><p><strong>自动分片</strong>：<code>HBase</code> 中的表通过 <code>Region</code> 分布在集群上，而且 <code>Region</code> 会随着数据的增长自动拆分和重新分布。</p>
</li>
<li><p><strong>高可靠性</strong>：自动 <code>RegionServer</code> 故障转移，<code>WAL</code> 机制保证了数据写入时不会因集群异常而导致写入数据丢失，<code>Replication</code> 机制保证了在集群出现严重的问题时，数据不会发生丢失或损坏。而且 <code>HBase</code> 底层使用 <code>HDFS</code>，<code>HDFS</code> 本身也有备份。</p>
</li>
<li><p><strong><code>Hadoop/HDFS</code> 集成&amp;海量存储</strong>：，<code>HBase</code>支持 <code>HDFS</code>开箱即用作为其分布式文件系统。HBase 作为一个开源的分布式 <code>Key-Value</code> 数据库，其主要作用是面向 <strong>PB</strong> 级别数据的实时入库和快速随机访问。这主要源于上述易扩展的特点，使得 <code>HBase</code> 通过扩展来存储海量的数据。</p>
</li>
<li><p><strong>并行处理</strong>：<code>HBase</code> 通过 <code>MapReduce</code> 支持大规模并行处理，将 <code>HBase</code> 用作源和接收器。</p>
</li>
<li><p><strong>列式存储</strong>：<code>HBase</code> 是根据列族来存储数据的。列族下面可以有非常多的列。列式存储的最大好处就是，其数据在表中是按照某列存储的，这样在查询只需要少数几个字段时，能大大减少读取的数据量。（面向列）</p>
</li>
<li><p><strong>多种语言的 API</strong>：<code>HBase</code> 支持使用 <code>Java</code> 的 <code>API</code> 来编程进行数据的存取，还支持使用 <code>Thrift</code> 语言和 <code>REST</code> 语言的 <code>API</code> 来编程进行数据的存取。</p>
</li>
<li><p><strong>块缓存和布隆过滤器</strong>：<code>HBase</code>支持 <code>Block Cache</code> 和 <code>Bloom</code>过滤器进行大容量查询优化。</p>
</li>
<li><p><strong>运行管理</strong>：<code>HBase</code> 为业务洞察和 <code>JMX</code> 度量提供内置网页。</p>
</li>
<li><p><strong>稀疏性</strong>：为空的列可以不占存储空间，表可以设计的非常稀疏。</p>
</li>
</ul>
<p><em><strong>HBase 的优点和缺点</strong></em></p>
<ul>
<li><p>HBase的优点：(动节&#x2F;海存&#x2F;负载&#x2F;并拓)</p>
<ul>
<li><strong>动态增加&amp;节省空间</strong>：在传统的关系数据库中，如果数据结构发生了变化，就需要停机维护，而且需要修改表结构，而在 HBase 中数据表内的列可以做到动态增加，并且列为空的时候不存储数据，从而节省存储空间。</li>
<li><strong>海量数据存储</strong>：<code>HBase</code> 适合存储 <strong>PB</strong> 数量级的海量数据，<strong>PB</strong> 级的数据在只采用廉价 PC 来存储的情况下，也可以在几十到一百毫秒内返回数据。这与 <code>HBase</code> 的极易扩展息息相关，正因如此，HBase 为海量数据的存储提供了便利。</li>
<li><strong>负载均衡</strong>：传统的通用关系数据库无法应对在数据规模剧增时导致的系统扩展性问题和性能问题。<code>HBase</code> 可以做到自动切分数据，并且会随着数据的增长自动地拆分和重新分布。</li>
<li><strong>高并发</strong>：<code>HBase</code> 可以提供高并发的读写操作，而且可以利用廉价的计算机来处理超过 10 亿行的表数据</li>
<li><strong>高拓展性</strong>：<code>HBase</code> 具有可伸缩性，如果当前集群的处理能力明显下降，可以增加集群的服务器数量来维持甚至提高处理能力。</li>
</ul>
</li>
<li><p><code>HBase</code> 的缺点：（条查&#x2F;复杂&#x2F;JOIN&#x2F;ACID&#x2F;SQL）</p>
<ul>
<li><strong>不支持条件查询</strong>：不能支持条件查询，只支持按照 <code>RowKey</code>（行键）来查询，也就是只能按照主键来查询。这样在设计 <code>RowKey</code> 时，就需要完美的方案以设计出符合业务的查询。</li>
<li><strong>架构设计复杂</strong>：架构设计复杂，且使用 <code>HDFS</code> 作为分布式存储，因此只是存储少量数据，它也不会很快。在大数据量时，它慢的不会很明显。</li>
<li><strong>不支持 <code>Join</code> 操作</strong>：<code>HBase</code> 不支持表的关联操作，因此数据分析是 <code>HBase</code> 的弱项。常见的 <code>group by</code> 或 <code>order by</code> 只能通过编写 <code>MapReduce</code> 来实现。</li>
<li><strong>不支持ACID</strong>：<code>HBase</code>部分支持了 <code>ACID</code></li>
<li><strong>不支持SQL语句查询</strong>：查询 <code>HBase</code> 时不支持通过 <code>SQL</code> 语句进行查询。</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Master</code> 和 <code>RegionServer</code> 的作用是什么？</p>
<p><code>HBase</code> 包含一个 <code>Master</code> 和许多个 <code>RegionServer</code> 。</p>
<ul>
<li><p><code>Master</code>：实现类为 <code>HMaster</code>，负责监控集群中所有的 <code>RegionServer</code> 实例。主要作用如下：</p>
<ul>
<li><p>管理元数据表格 <code>hbase:meta</code>，接收用户对表格创建修改删除的命令并执行</p>
</li>
<li><p>监控 <code>Region</code> 是否需要进行负载均衡，故障转移和 <code>Region</code> 的拆分。</p>
</li>
</ul>
</li>
<li><p><code>RegionServer</code>：实现类为 <code>HRegionServer</code>，主要作用如下: </p>
<ul>
<li><p>负责数据 <code>Cell</code> 的处理，例如写入数据 <code>put</code>，查询数据 <code>get</code> 等。</p>
</li>
<li><p>拆分合并 <code>Region</code> 的实际执行者，有 <code>master</code> 监控，有 <code>RegionServer</code> 执行。</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="编程题"><a href="#编程题" class="headerlink" title="编程题"></a>编程题</h3><h4 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h4><ol>
<li><p>创建命名空间的 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_namespace <span class="string">&#x27;namespace_name&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表的 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create <span class="string">&#x27;namespace_name:table_name&#x27;</span>, &#123;NAME =&gt; <span class="string">&#x27;cf1&#x27;</span>, VERSION =&gt; 5&#125; </span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表的 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter <span class="string">&#x27;namespace_name:table_name&#x27;</span>, NAME =&gt; <span class="string">&#x27;cf1&#x27;</span>, METHOD =&gt; <span class="string">&#x27;delete&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>插入数据的 Shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put <span class="string">&#x27;ns:tb&#x27;</span>, <span class="string">&#x27;rk&#x27;</span>, <span class="string">&#x27;cf:col&#x27;</span>, <span class="string">&#x27;value&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查询数据的 Shell</p>
<ul>
<li><code>get</code> 最大范围是一行数据，也可以进行列的过滤，读取的结果为多行 <code>Cell</code>。 <code>Cell</code> 的格式如下：<code>&#123;rowkey, column Familycolumn Qualifier, time Stamp&#125;</code>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get <span class="string">&#x27;ns:tb&#x27;</span>, <span class="string">&#x27;rk&#x27;</span> , &#123;COLUMN =&gt; <span class="string">&#x27;cf:col&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>scan</code> 用于扫描数据，能够读取多行数据，不建议扫描过多的数据，推荐使用 <code>startRow</code> 和 <code>stopRow</code> 来控制读取的数据，默认范围<strong>左闭右开</strong>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scan <span class="string">&#x27;namespace_name:table_name&#x27;</span>, &#123;STARTROW =&gt; <span class="string">&#x27;1001&#x27;</span>,STOPROW =&gt; <span class="string">&#x27;1002&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><p>读写操作时</p>
<ol>
<li>加载配置信息</li>
<li>获取 <code>HBase</code> 的链接对象</li>
<li>获取 <code>Admin</code> 对象</li>
<li>构造 <code>TableName</code> 对象</li>
<li>判断表是否存在</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();			<span class="comment">// 加载配置信息</span></span><br><span class="line">        conf.set(<span class="string">&quot;hbase.zookeeper.quorum&quot;</span>, <span class="string">&quot;bigdata&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = ConnectionFactory.createConnection(conf);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeConntction</span><span class="params">()</span> <span class="keyword">throw</span> IOException &#123;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@brief</span> 判断表格是否存在</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> namespace 命名空间名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName 表名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 存在; false 不存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isTableExists</span><span class="params">(String namespace, String tableName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 获得 admin</span></span><br><span class="line">        <span class="type">Admin</span> <span class="variable">admin</span> <span class="operator">=</span> HBaseConnection.connection.getAdmin();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 使用对应的方法, 判断表格是否存在</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            result = admin.tableExists(TableName.valueOf(namespace, tableName));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 关闭 admin</span></span><br><span class="line">        admin.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回结果</span></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@brief</span> 向表格中插入数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> namespace 命名空间名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName 表名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rowKey 行键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnFamily 列族名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnName 列名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value 插入值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">putCell</span><span class="params">(String namespace,</span></span><br><span class="line"><span class="params">                               String tableName,</span></span><br><span class="line"><span class="params">                               String rowKey,</span></span><br><span class="line"><span class="params">                               String columnFamily,</span></span><br><span class="line"><span class="params">                               String columnName,</span></span><br><span class="line"><span class="params">                               String value)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 获取 Table</span></span><br><span class="line">        <span class="type">Table</span> <span class="variable">table</span> <span class="operator">=</span> connection.getTable(TableName.valueOf(namespace, tableName));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 调用相关方法插入数据</span></span><br><span class="line">        <span class="comment">// 2.1 创建 Put 对象</span></span><br><span class="line">        <span class="type">Put</span> <span class="variable">put</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Put</span>(Bytes.toBytes(rowKey));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.2. 给 Put 对象添加数据</span></span><br><span class="line">        put.addColumn(Bytes.toBytes(columnFamily), Bytes.toBytes(columnName), Bytes.toBytes(value));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.3 将对象写入对应的方法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            table.put(put);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 关闭 Table</span></span><br><span class="line">        table.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@brief</span> 读取数据 读取对应一行的某一列</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> namespace 命名空间名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableName 表名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rowKey 行键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnFamily 列族名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnName 列名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getCells</span><span class="params">(String namespace,</span></span><br><span class="line"><span class="params">                                String tableName,</span></span><br><span class="line"><span class="params">                                String rowKey,</span></span><br><span class="line"><span class="params">                                String columnFamily,</span></span><br><span class="line"><span class="params">                                String columnName)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 获取 Table</span></span><br><span class="line">        <span class="type">Table</span> <span class="variable">table</span> <span class="operator">=</span> connection.getTable(TableName.valueOf(namespace, tableName));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 调用相关方法插入数据</span></span><br><span class="line">        <span class="comment">// 2.1 创建 Get 对象</span></span><br><span class="line">        <span class="type">Get</span> <span class="variable">get</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Get</span>(Bytes.toBytes(rowKey));   <span class="comment">// 如果此时不使用 addColumn 进行参数的添加, 此时则读取一整行的数据</span></span><br><span class="line">        <span class="comment">// 2.2 如果想读取某一列的数据, 需要添加对应的参数</span></span><br><span class="line">        get.addColumn(Bytes.toBytes(columnFamily), Bytes.toBytes(columnName));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.3 也可以设置读取数据的版本</span></span><br><span class="line">        get.readAllVersions();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 3. 读取数据, 写入 Result 对象</span></span><br><span class="line">            <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> table.get(get);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. 处理数据</span></span><br><span class="line">            Cell[] cells = result.rawCells();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. 测试方法: 直接把读取到的数据打印到控制台</span></span><br><span class="line">            <span class="comment">// 如果是实际开发, 需要再额外写方法, 对应处理数据</span></span><br><span class="line">            <span class="keyword">for</span> (Cell cell : cells) &#123;</span><br><span class="line">                <span class="comment">// Cell 存储数据比较底层, 需要进一步处理</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(CellUtil.cloneValue(cell));</span><br><span class="line">                System.out.println(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 关闭 Table</span></span><br><span class="line">        table.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throw</span> IOException &#123;</span><br><span class="line">        putCell(<span class="string">&quot;sdutcm&quot;</span>, <span class="string">&quot;bigdata&quot;</span>, <span class="string">&quot;2001&quot;</span>, <span class="string">&quot;info&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/leslies2/p/9530378.html">Hadoop 综合揭秘——HBase的原理与应用 - 风尘浪子 - 博客园 (cnblogs.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013332124/article/details/100125269">HBase的组件</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-12T07:13:57.000Z" title="2024/6/12 15:13:57">2024-06-12</time>发表</span><span class="level-item"><time dateTime="2024-06-29T14:04:55.100Z" title="2024/6/29 22:04:55">2024-06-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Spark/">Spark</a></span><span class="level-item">32 分钟读完 (大约4742个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/12/SparkQuickIN/">SparkQuickIN</a></p><div class="content"><h2 id="快速入门-Spark"><a href="#快速入门-Spark" class="headerlink" title="快速入门 Spark"></a>快速入门 Spark</h2><p>[TOC]</p>
<h3 id="⛳︎-1-开始-Spark"><a href="#⛳︎-1-开始-Spark" class="headerlink" title="⛳︎ 1. 开始 Spark"></a>⛳︎ 1. 开始 Spark</h3><p><strong>Spark官网</strong>：<a target="_blank" rel="noopener" href="https://spark.apache.org/">Apache Spark™ - Unified Engine for large-scale data analytics</a></p>
<h4 id="1-1-什么是Spark"><a href="#1-1-什么是Spark" class="headerlink" title="1.1 什么是Spark"></a>1.1 什么是Spark</h4><p>Spark官网的解释：Apache Spark™ is a unified analytics engine for large-scale data processing.</p>
<p><strong>Apache Spark</strong> 是专为大规模数据处理而设计的快速通用的计算引擎。<code>Spark</code>是加州大学伯克利分校的 <em><strong>AMP实验室</strong></em> 所开源的类 <code>Hadoop MapReduce</code> 的通用并行计算框架，<code>Spark</code> 拥有 <code>Hadoop MapReduce</code> 所具有的优点，但不同于 <code>MapReduce</code> 的是：<code>Job</code> 中间输出结果可以缓存在内存中，从而不再需要读写 <code>HDFS</code>，减少磁盘数据交互，因此 <code>spark</code> 能更好地适用于数据挖掘与机器学习等需要迭代的算法。</p>
<p><code>Spark</code>是 <code>Scala</code> 编写，方便快速编程。</p>
<p><strong>其特点是</strong>：高速、使用简单、通用、可以在多处运行。</p>
<h4 id="1-2-总体技术栈讲解"><a href="#1-2-总体技术栈讲解" class="headerlink" title="1.2 总体技术栈讲解"></a>1.2 总体技术栈讲解</h4><img src="./SparkQuickIN/TechStack.png" style="zoom: 33%;" />

<p><code>Spark</code> 提供了 <code>Sparkcore RDD</code>、<code>Spark SQL</code>、<code>Spark Streaming</code>、<code>Spark MLlib</code>、<code>Spark GraphX</code>等技术组件，可以一站式的完成大数据领域的离线批处理、交互式查询、流式计算、机器学习、图计算等常见的任务。这就是<code>Spark</code>一站式开发的特点。</p>
<h4 id="1-3-Spark-和-MapReduce-的区别"><a href="#1-3-Spark-和-MapReduce-的区别" class="headerlink" title="1.3 Spark 和 MapReduce 的区别"></a>1.3 <code>Spark</code> 和 <code>MapReduce</code> 的区别</h4><h5 id="1-3-1-MapReduce-的原理"><a href="#1-3-1-MapReduce-的原理" class="headerlink" title="1.3.1 MapReduce 的原理"></a>1.3.1 MapReduce 的原理</h5><p><code>MapReduce</code> 在运算时需要多次进行磁盘 I&#x2F;O。下面是一个简单的 <code>MapReduce</code> 过程：</p>
<p>视频链接：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1TB4y1i7kk/">https://www.bilibili.com/video/BV1TB4y1i7kk/</a></p>
<p>在这个视频中，可以看出<code>MapReduce</code> 过程中需要多次磁盘 I&#x2F;O，落地到<code>HDFS</code>上。</p>
<h5 id="1-3-2-Spark-是如何做的"><a href="#1-3-2-Spark-是如何做的" class="headerlink" title="1.3.2 Spark 是如何做的"></a>1.3.2 Spark 是如何做的</h5><img src="./SparkQuickIN/MapReduce_VS_Spark.png" style="zoom: 40%;" >

<p>可以看到，<code>MapReduce</code> 的多个 <code>Job</code> 之间相互独立，每个 <code>Job</code> 完成后的数据都需要存储到文件系统中。每个 <code>Job</code> 中也可能会存在大量的磁盘 I&#x2F;O ，这样会使得 <code>MapReduce</code> 的速度很慢。相比于 <code>MapReduce</code>，<code>Spark</code>使用了 <code>DAG</code> 有向无环图。使多个任务串联起来，将结果存储在内存中（当然内存不够还是要将数据缓存在磁盘中）直接进行运算，避免了大量的磁盘I&#x2F;O。</p>
<h5 id="1-3-3-Spark-和-MapReduce-的一些联系"><a href="#1-3-3-Spark-和-MapReduce-的一些联系" class="headerlink" title="1.3.3 Spark 和 MapReduce 的一些联系"></a>1.3.3 <code>Spark</code> 和 <code>MapReduce</code> 的一些联系</h5><p><code>Spark</code> 和 <code>MapReduce</code> 都是分布式计算框架，<code>Spark</code> 计算中间结果基于内存缓存，<code>MapReduce</code> 基于<code>HDFS</code>存储。也正因此，<code>Spark</code>处理数据的能力一般是 <code>MapReduce</code>的三到五倍以上，<code>Spark</code> 中除了基于内存计算这一个计算快的原因，还有<code>DAG(DAG Schedule)</code>有向无环图来切分任务的执行先后顺序。</p>
<h4 id="1-4-Spark-API"><a href="#1-4-Spark-API" class="headerlink" title="1.4 Spark API"></a>1.4 Spark API</h4><p>Spark API 有多种语言支持，分别包括：<code>Scala</code>、<code>Java</code>、<code>Python</code>、<code>R</code>、<code>SQL</code> 等。</p>
<h4 id="1-5-Spark-的运行模式"><a href="#1-5-Spark-的运行模式" class="headerlink" title="1.5 Spark 的运行模式"></a>1.5 Spark 的运行模式</h4><ul>
<li><code>Local</code>：多用于本地测试，如在：<code>Eclipse</code>、<code>IDEA</code> 中编写测试程序等。</li>
<li><code>Standalone</code>：<code>Spark</code> 自带的资源调度框架，它支持完全分布式。<code>Standalone</code>模式也叫作<strong>独立模式</strong>，<strong>其自带完整的服务，可单独部署到一个集群中，无序依赖任何其他资源管理系统。</strong> 从一定程度上来说，该模式是 <code>Local</code> 模式和 <code>Yarn</code> 模式的基础。</li>
<li><code>Yarn</code>： Hadoop 生态圈里的一种资源调度框架，<code>Spark</code>也是可以基于 <code>Yarn</code> 来计算的。 若要使用 <code>Yarn</code> 来进行资源调度，必须实现<code>ApplicationMaster</code> 接口，<code>Spark</code> 实现了这个接口，所以可以基于 <code>Yarn</code> 来进行资源调度。</li>
<li><code>Mesos</code>：也是一种资源调度框架（了解即可）。</li>
</ul>
<h3 id="🥑-2-SparkCore"><a href="#🥑-2-SparkCore" class="headerlink" title="🥑 2. SparkCore"></a>🥑 2. SparkCore</h3><h4 id="2-1-RDD"><a href="#2-1-RDD" class="headerlink" title="2.1 RDD"></a>2.1 RDD</h4><h5 id="2-1-1-RDD-的概念"><a href="#2-1-1-RDD-的概念" class="headerlink" title="2.1.1 RDD 的概念"></a>2.1.1 RDD 的概念</h5><p><code>RDD(Resilient Distribute Dataset)</code>：弹性分布式数据集。</p>
<p><code>RDD</code> → <code>算子</code> → <code>Other RDD</code>，<code>RDD</code> 经过算子的运算会变成其他的 <code>RDD</code>。</p>
<p>（重点）<code>RDD</code>的特点：① 分区的；② 并行操作的；③ 不可变的。</p>
<h5 id="2-1-2-RDD-的五大特性"><a href="#2-1-2-RDD-的五大特性" class="headerlink" title="2.1.2 RDD 的五大特性"></a>2.1.2 RDD 的五大特性</h5><ol>
<li>每个<code>RDD</code> 由一系列的 <code>Partition</code> 组成。</li>
<li>函数是作用在每一个 <code>Partition (Split)</code> 上的。</li>
<li><code>RDD</code> 中有一系列的依赖关系，或者说每个<code>RDD</code>都会依赖其他一系列的<code>RDD</code>。</li>
<li>分区器是作用在 <code>&lt;K, V&gt;</code> 格式的 <code>RDD</code> 上，即：<code>&lt;K, V&gt;</code> 的 <code>RDD</code> 可以通过 <code>Partitioner</code> 进行自定义分区。</li>
<li><code>RDD</code>提供一系列的最佳计算位置。数据在哪里，计算就在哪里，移动数据不如移动计算。</li>
</ol>
<h5 id="2-1-3-RDD-理解图"><a href="#2-1-3-RDD-理解图" class="headerlink" title="2.1.3 RDD 理解图"></a>2.1.3 RDD 理解图</h5><img src="./SparkQuickIN/SparkRDD.png" style="zoom:40%;" >



<p><code>Spark</code> 中读取文件是使用 <code>SparkContext</code> 对象调用 <code>textFile</code> 方法，实际上底层和 <code>MapReduce</code> 读取 <code>HDFS</code> 文件的方式是相同的，读取之前先要进行 <code>split</code> 切片。默认情况下 <code>Split</code> 的大小和 <code>Block</code> 块的大小相同。</p>
<p>一些问题：</p>
<ol>
<li><p><code>RDD</code>的分布式体现在那些方面？</p>
<p><code>RDD</code> 由一系列的 <code>Partition</code> 构成，并且 <code>Partition</code> 是分布在不同的节点上的。这就体现了 <code>RDD</code> 的分布式。</p>
</li>
<li><p>哪里体现了 <code>RDD</code> 的弹性？</p>
<p><code>RDD</code> 由一系列的 <code>Partition</code> 组成，其大小和数量都是可以改变的。默认情况下，<code>Partition</code> 的个数和 <code>Block</code> 块的个数相同。</p>
</li>
<li><p>哪里体现了 <code>RDD</code> 的容错？</p>
<p><code>RDD</code> 之间存在一系列的依赖关系，<code>子RDD</code> 可以找到对应的<code>父RDD</code> ，然后通过一系列计算得到得出响应的结果，这就是容错的体现。</p>
<p><code>RDD</code> 提供计算最佳位置，体现了数据本地化，体现了大数据中<strong>”移动数据不如移动计算“</strong>的理念。</p>
</li>
</ol>
<p>一些注意事项：</p>
<ol>
<li><code>textFile</code> 方法底层封装的是 <code>MapReduce</code> 读取文件的方式，读取文件之前先进行 <code>Split</code> 切片，默认 <code>Split</code>  大小是一个 <code>Block</code> 的大小。</li>
<li><code>RDD</code> 实际上不存储数据，但是为了方便理解，可以理解为存储数据。</li>
<li>什么是 <code>&lt;K, V&gt;</code> 格式的 <code>RDD</code>，如果 <code>RDD</code> 里面存储的数据都是二元组对象，那么这个 <code>RDD</code> 我们就叫做 <code>&lt;K, V&gt;</code> 格式的 <code>RDD</code>。</li>
</ol>
<h5 id="2-1-4-SparkRDD-编程模型"><a href="#2-1-4-SparkRDD-编程模型" class="headerlink" title="2.1.4 SparkRDD 编程模型"></a>2.1.4 SparkRDD 编程模型</h5><ol>
<li><p>创建 <code>SparkContext</code> 对象</p>
</li>
<li><p>创建 <code>RDD</code></p>
</li>
<li><p>计算 <code>RDD</code></p>
</li>
<li><p>输出结果（如控制台打印测试，存储等）</p>
</li>
<li><p>关闭 <code>SparkContext</code></p>
</li>
</ol>
<h5 id="2-1-5-WordCount-案例"><a href="#2-1-5-WordCount-案例" class="headerlink" title="2.1.5 WordCount 案例"></a>2.1.5 <code>WordCount</code> 案例</h5><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 第一步: 创建 SparkContext 对象</span></span><br><span class="line">        <span class="comment">// 对于每个 Spark 程序来说, 最重要的就是两个对象: SparkConf 和 SparkContext</span></span><br><span class="line">        <span class="keyword">val</span> conf = <span class="type">SparkConf</span>()</span><br><span class="line">        conf.setAppName(<span class="string">&quot;WordCount&quot;</span>).setMaster(<span class="string">&quot;Local&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> sparkContext = <span class="type">SparkContext</span>(conf)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建 RDD</span></span><br><span class="line">        <span class="keyword">val</span> line: <span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">&quot;files/order.csv&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 计算 RDD</span></span><br><span class="line">        <span class="keyword">val</span> word: <span class="type">RDD</span>[<span class="type">String</span>] = sc.flatMap(x =&gt; x.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line">        <span class="keyword">val</span> pair: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = word.map(x =&gt; (x, <span class="number">1</span>))</span><br><span class="line">        <span class="comment">// val result: RDD[(String, Int)] = pair.reduceByKey((x, y) =&gt; &#123;x + y&#125;)</span></span><br><span class="line">        <span class="keyword">val</span> result: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = pair.reduceByKey((x, y) =&gt; &#123;</span><br><span class="line">            println(x + <span class="string">&quot;:&quot;</span> + y)</span><br><span class="line">            x + y</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 输出 RDD</span></span><br><span class="line">        result.foreach(println)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 关闭 SparkContext</span></span><br><span class="line">        sparkContext.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-Spark-任务执行原理"><a href="#2-2-Spark-任务执行原理" class="headerlink" title="2.2 Spark 任务执行原理"></a>2.2 Spark 任务执行原理</h4><p>从下图中，我们可以看到 <strong>Spark</strong> 的主要角色：</p>
<img src="./SparkQuickIN/SparkExecutor.png" alt="SparkExecutor" style="zoom:33%;" />

<p>一些名词的解释：</p>
<ul>
<li><code>Master Node</code> 主节点</li>
<li><code>Worker Node</code> 从节点</li>
<li><code>Driver</code> 驱动程序</li>
<li><code>Executor</code> 执行节点</li>
<li><code>Cluster Manager</code> 集群管理者</li>
</ul>
<h5 id="2-2-1-Spark-架构的类比"><a href="#2-2-1-Spark-架构的类比" class="headerlink" title="2.2.1 Spark 架构的类比"></a>2.2.1 Spark 架构的类比</h5><p>我们可以简单的将这个架构和 <strong>YARN</strong> 对比一下：<code>Master</code> 就相当于 <code>YARN</code> 中的 <code>ResourceManager</code>，<code>Worker</code> 就相当于 <code>YARN</code> 中的 <code>NodeManager</code>，<code>Driver</code> 相当于 <code>YARN</code> 中的 <code>Application</code>。</p>
<h5 id="2-2-2-Spark-执行原理详细说明"><a href="#2-2-2-Spark-执行原理详细说明" class="headerlink" title="2.2.2 Spark 执行原理详细说明"></a>2.2.2 Spark 执行原理详细说明</h5><ol>
<li><p><code>Master</code> 和 <code>Worker</code> 节点</p>
<p>搭建 <strong>Spark</strong> 集群的时候我们就已经设置好了 <code>Master</code> 节点和 <code>Worker</code> 节点，一个集群有多个<code>Master</code>节点和多个<code>Worker</code>节点。</p>
<ul>
<li><p><code>Master</code> 节点常驻 <code>Master</code> 守护进程，负责管理 <code>Worker</code> 节点，我们从 <code>Master</code> 节点提交应用。</p>
</li>
<li><p><code>Worker</code> 节点常驻 <code>Worker</code> 守护进程，与 <code>Master</code> 节点通信，并且管理 <code>Executor</code> 进程。</p>
</li>
</ul>
<p>一台机器可以同时作为 <code>Master</code> 和 <code>Worker</code> 节点（e.g. 有四台机器，可以选择一台设置为 <code>Master</code>节点，然后剩下三台设为 <code>Worker</code>节点，也可以把四台都设为 <code>Worker</code> 节点，这种情况下，有一个机器既是 <code>Master</code> 节点又是 <code>Worker</code> 节点）。</p>
<p>一个 <code>Spark</code> 应用程序分为一个驱动程序 <code>Driver</code> 和多个执行程序 <code>Executors</code> 两种。</p>
</li>
<li><p><code>Driver</code> 和 <code>Executor</code> 进程<br><code>Driver</code> 进程就是应用的 <code>main()</code> 函数并且构建 <code>SparkContext</code> 对象，当我们提交了应用之后，便会启动一个对应的 <code>Driver</code> 进程，<code>Driver</code> 本身会根据我们设置的参数占有一定的资源（主要指 <em><strong>CPU Core</strong></em> 和 <em><strong>Memory</strong></em>）。</p>
<p>根据部署模式的不同，<code>Driver</code> 可以运行在 <code>Master</code> 上，也可以运行 <code>Worker</code>上，<code>Driver</code> 与集群节点之间有频繁的通信。上图展示了 <code>Driver</code> 在 <code>Master</code> 上的部署的情况。</p>
<ul>
<li><p>如上图所示，<code>Driver</code>首先会向**集群管理者<code>Cluster Manager</code>**，如<code>Standalone</code>、<code>Yarn</code>、<code>Mesos</code> 申请 <strong>Spark</strong> 应用所需的资源，也就是<code>Executor</code>，然后集群管理者会根据 <strong>Spark</strong> 应用所设置的参数在各个 <code>Worker</code> 上分配一定数量的 <code>Executor</code>，每个 <code>Executor</code> 都占用一定数量的 <code>CPU</code>和 <code>Memory</code>。</p>
</li>
<li><p>在申请到应用所需的资源以后，<code>Driver</code> 就开始调度和执行我们编写的应用代码了。<code>Driver</code> 进程会将我们编写的 <code>Spark</code> 应用代码拆分成多个 <code>Stage</code>，每个<code>Stage</code> 执行一部分代码片段，并为每个 <code>Stage</code> 创建一批 <code>Tasks</code>，然后将这些 <code>Tasks</code>分配到各个 <code>Executor</code>中执行。这一步即 <code>Driver ---Task--&gt; Worker</code>。</p>
</li>
<li><p><code>Executor</code> 进程宿主在 <code>Worker</code> 节点上，一个 <code>Worker</code>可以有多个 <code>Executor</code>。每个 <code>Executor</code> 持有一个线程池，每个线程可以执行一个 <code>Task</code>，<code>Executor</code> 执行完 <code>Task</code> 以后将结果返回给 <code>Driver</code>，每个 <code>Executor</code> 执行的 <code>Task</code> 都属于同一个应用。此外 <code>Executor</code> 还有一个功能就是为应用程序中要求缓存的 <code>RDD</code> 提供内存式存储，<code>RDD</code> 是直接缓存在 <code>Executor</code>进程内的，因此任务可以在运行时充分利用缓存数据加速运算。这一步即 <code>Worker ---Result--&gt; Driver</code>。</p>
</li>
<li><p><code>Driver</code> 负责<strong>任务 <code>Tasks</code> 的分发</strong>和<strong>结果<code>Results</code>的回收</strong>，即任务的调度。如果 <code>Task</code> 的计算结果非常大就不要回收了，会造成<code>OOM</code>（我们在执行程序时可以通过参数指定 <code>Driver</code> 的内存大小，如 <code>1G</code>，如果一个 <code>Worker</code> 的结果是 <code>510M</code>，那么两个接节点上的结果就会超过 <code>1G</code>，导致 <code>OOM</code>）。</p>
</li>
</ul>
</li>
</ol>
<h4 id="2-2-RDD-算子"><a href="#2-2-RDD-算子" class="headerlink" title="2.2 RDD 算子"></a>2.2 RDD 算子</h4><p><strong>RDD有两种操作算子：</strong>分别为<strong>转换算子(Transformation)</strong> 和 **行动算子(Action)**。算子其实就是函数，只不过在 <strong>Scala</strong> 中称为算子。</p>
<p>下面表格列出了部分 <strong>RDD 算子</strong>，完整内容可以查看 <em><strong>[SparkRDD](<a target="_blank" rel="noopener" href="https://spark.apache.org/docs/3.0.1/rdd-programming-guide.html">RDD Programming Guide - Spark 3.0.1 Documentation (apache.org)</a>)</strong></em> 文档。</p>
<img src="D:\Blog\source\_posts\SparkQuickIN\DocLocation.jpg"  />

<table>
    <tr>
        <th>算子类型</th>
        <th>算子方法</th>
        <th>算子转换</th>
    </tr>
    <tr>
        <td rowspan="14">Transformations</td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">map(f: T=>U)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => RDD[U]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">filter(f: T=>Bool)</code>
        </td>
         <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => RDD[T]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">flatMap(f: T=>Seq[U])</code> 
        </td>
         <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => RDD[U]</code> 
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">sample(fraction: Float)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => RDD[T](Deterministic sampling)</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">groupByKey()</code>
        </td>
          <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => RDD[(K, Seq[V])]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">reduceByKey(f: (V, V)=>V)</code>
        </td>
         <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => RDD[(K, V)]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">union()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">(RDD[T], RDD[T]) => RDD[T]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">join()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">(RDD[(K, V)], RDD[(K, W)]) => RDD[(K, (V, W))]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">cogroup()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">(RDD[(K, V)], RDD[(K, W)]) => RDD([K, (Seq[V], Seq[W])])</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">crossProduct()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">(RDD[T], RDD[U]) => (RDD[(T, U)])</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">mapValues(f: V=>W)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => RDD[(K, W)](Preserves Partitioning)</code>
        </td>        
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">sort(c: Comparator[K])</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => RDD[(K, V)]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">partitionBy(p: Partitioner[K])</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => RDD[(K, V)]</code>
        </td>
    </tr>
    <tr>
        <td>...</td>
        <td>...</td>
    </tr>
    <tr>
        <td rowspan="7">Actions</td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">count()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => Long</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">collect()</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => Seq[T]</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">reduce(f: (T, T)=>T)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[T] => T</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">lookup(k: K)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">RDD[(K, V)] => Seq[V](On hash/range partitioned RDDs)</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">save(path: String)</code>
        </td>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">Outputs RDD to a Storage System, e.g. HDFS</code>
        </td>
    </tr>
    <tr>
        <td>
            <code style="font-family: Consolas; font-size: 14px;">foreach(func)</code>
        </td>
        <td>-</td>
    </tr>
    <tr>
        <td>...</td>
        <td>...</td>
    </tr>
</table>

<h5 id="2-2-1-Transformation-转换算子"><a href="#2-2-1-Transformation-转换算子" class="headerlink" title="2.2.1 Transformation 转换算子"></a>2.2.1 Transformation 转换算子</h5><p>点击快速跳转到转换算子列表：<a target="_blank" rel="noopener" href="https://spark.apache.org/docs/latest/rdd-programming-guide.html#transformations">Transformations</a></p>
<p><strong>Transformation 转换算子</strong>有延迟执行的特点，具有**懒加载(Lazy)**的特性。</p>
<p>下面列出常用的行动算子及用法：</p>
<ul>
<li><code>map(func)</code> 返回一个新的分布式数据集，由每个原元素经过<code>func</code>函数转换后组成。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MapDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;MapDemo&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">45</span>, <span class="number">50</span>)</span><br><span class="line">        <span class="keyword">val</span> listRDD = sc.parallelize(list, <span class="number">5</span>)</span><br><span class="line">        listRDD.foreach(println)</span><br><span class="line">        println()</span><br><span class="line">        <span class="keyword">val</span> retRDD = listRDD.map(num =&gt; num * <span class="number">7</span>)</span><br><span class="line">        retRDD.foreach(num =&gt; println(num))</span><br><span class="line"></span><br><span class="line">        sc.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>mapPartition(func)</code> 将函数用在每个<code>RDD</code>的分区上</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MapPartitionDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;MapPartitionDemo&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">45</span>, <span class="number">50</span>)</span><br><span class="line">        <span class="keyword">val</span> listRDD = sc.parallelize(list, <span class="number">3</span>)	<span class="comment">// 设置三个分区</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 对比 map 和 mapPartition 的区别</span></span><br><span class="line">        listRDD.map( x =&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;Map 执行一次&quot;</span>)</span><br><span class="line">            x + <span class="number">1</span></span><br><span class="line">        &#125;).foreach(println)</span><br><span class="line"></span><br><span class="line">        println()</span><br><span class="line"></span><br><span class="line">        listRDD.mapPartitions( x =&gt; &#123;</span><br><span class="line">            println(<span class="string">&quot;MapPartition 执行一次&quot;</span>)</span><br><span class="line">            x.map(x =&gt; &#123;println(<span class="string">&quot;mapPartition 里的map&quot;</span>); x + <span class="number">1</span>&#125;)  <span class="comment">// 这个 map 不是 RDD 里的 map, 而是 Iterator 中的 map</span></span><br><span class="line">        &#125;).foreach(println)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>filter(func)</code>返回一个新的数据集，由经过<code>func</code>函数后返回值为<code>true</code>的元素组成。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">FilterDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;FilterDemo&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">45</span>, <span class="number">50</span>)</span><br><span class="line">        <span class="keyword">val</span> listRDD = sc.parallelize(list)</span><br><span class="line">        <span class="keyword">val</span> retRDD = listRDD.filter(num =&gt; num % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        retRDD.foreach(println)</span><br><span class="line">        sc.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>flatMap(func)</code>类似于<code>map</code>，但是每一个输入元素，会被映射为 <code>0</code> 到多个输出元素（因此，<code>func</code> 函数的返回值是一个 <code>Seq</code>，而不是单一元素）。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">FlatMapDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;FlatMapDemo&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="string">&quot;hello you&quot;</span>, <span class="string">&quot;hello he&quot;</span>, <span class="string">&quot;hello me&quot;</span>)</span><br><span class="line">        <span class="keyword">val</span> listRDD = sc.parallelize(list)</span><br><span class="line">        <span class="keyword">val</span> wordsRDD = listRDD.flatMap(line =&gt; line.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line">        wordsRDD.foreach(println)</span><br><span class="line">        sc.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>sample(withReplacement, frac, seed)</code>根据给定的随机种子 <code>seed</code>，随机抽样出数量为 <code>frac</code> 的数据。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>union(otherDataset)</code>返回一个新的数据集，由原数据集和参数联合而成。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>groupByKey([numTasks])</code>在一个由 <code>&lt;K, V&gt;</code> 对组成的数据集上调用，返回一个 <code>&lt;K, Seq[V]&gt;</code> 对的数据集。注意：默认情况下，使用 <code>8</code> 个并行任务进行分组，你可以传入 <code>numTask</code> 可选参数，根据数据量设置不同数目的 <code>Task</code>。使用该算子可以将相同<code>Key</code>的元素聚集到一起，最终把所有相同<code>Key</code>的元素合并成一个元素，该元素的<code>Key</code>不变，<code>Value</code>则聚集到一个集合中。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>reduceByKey(func, [numTasks])</code>在一个<code>&lt;K, V&gt;</code>对的数据集上使用，返回一个<code>&lt;K, V&gt;</code>对的数据集，<code>key</code>相同的值，都被使用指定的<code>reduce</code>函数聚合到一起。和 <code>groupByKey</code>类似，任务的个数是可以通过第二个可选参数来配置的。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>join(otherDataset, [numTasks])</code>在类型为<code>&lt;K, V&gt;</code>和<code>&lt;K, W&gt;</code>类型的数据集上调用，返回一个<code>&lt;K, &lt;V, W&gt;&gt;</code>对，每个<code>key</code>中的所有元素都在一起的数据集。</li>
<li><code>sortByKey()</code> 和 <code>sortBy()</code>，<code>sortByKey()</code> 函数需要在类型为 <code>&lt;K, V&gt;</code> 类型的数据集上调用。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SortByKeyDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;SortByKeyDemo&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(</span><br><span class="line">            <span class="string">&quot;1,李  磊,22,175&quot;</span>,</span><br><span class="line">            <span class="string">&quot;2,刘银鹏,23,175&quot;</span>,</span><br><span class="line">            <span class="string">&quot;3,齐彦鹏,22,180&quot;</span>,</span><br><span class="line">            <span class="string">&quot;4,杨  柳,22,168&quot;</span>,</span><br><span class="line">            <span class="string">&quot;5,敦  鹏,20,175&quot;</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">val</span> listRDD: <span class="type">RDD</span>[<span class="type">String</span>] = sc.parallelize(list)</span><br><span class="line">        listRDD.foreach(println)</span><br><span class="line">        println()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3,齐彦鹏,22,180</span></span><br><span class="line">        <span class="comment">// 1,李磊,22,175</span></span><br><span class="line">        <span class="comment">// 2,刘银鹏,23,175</span></span><br><span class="line">        <span class="keyword">val</span> resultRDD = listRDD.map(x =&gt; &#123;</span><br><span class="line">            <span class="keyword">val</span> fields = x.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">            println(fields(<span class="number">0</span>) + <span class="string">&quot; &quot;</span> + fields(<span class="number">1</span>) + <span class="string">&quot; &quot;</span> + fields(<span class="number">2</span>) + <span class="string">&quot; &quot;</span> + fields(<span class="number">3</span>) + <span class="string">&quot; &quot;</span>)</span><br><span class="line">            (fields(<span class="number">0</span>), fields(<span class="number">1</span>), fields(<span class="number">2</span>), fields(<span class="number">3</span>))</span><br><span class="line">        &#125;).map(x =&gt; &#123;(x._3, x._1)&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 分区数会影响最终打印结果, 设置分区为 2, 所有分区最终会聚合为两个分区, 打印时显示每个分区的排序</span></span><br><span class="line">        <span class="comment">// 这就可能导致打印输出时出现不同分区排序数据交叉的情况。</span></span><br><span class="line">        <span class="comment">// 所以我们一般设置分区为 1, 表示排序结果聚合到一个分区</span></span><br><span class="line">        resultRDD.sortByKey(<span class="literal">true</span>, <span class="number">2</span>).foreach(println)</span><br><span class="line"></span><br><span class="line">        println()</span><br><span class="line">        <span class="keyword">val</span> sortBy_RDD = listRDD.map(x =&gt; &#123;</span><br><span class="line">            <span class="keyword">val</span> fields = x.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">            <span class="comment">// println(fields(0) + &quot; &quot; + fields(1) + &quot; &quot; + fields(2) + &quot; &quot; + fields(3) + &quot; &quot;)</span></span><br><span class="line">            (fields(<span class="number">0</span>), fields(<span class="number">1</span>), fields(<span class="number">2</span>), fields(<span class="number">3</span>))</span><br><span class="line">        &#125;)</span><br><span class="line">        println(<span class="string">&quot;SortBy_001&quot;</span>)</span><br><span class="line">        sortBy_RDD.sortBy(_._1, <span class="literal">true</span>, <span class="number">1</span>).foreach(println)</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;SortBy_002&quot;</span>)</span><br><span class="line">        sortBy_RDD.sortBy(_._2, <span class="literal">true</span>, <span class="number">1</span>).foreach(println)</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;SortBy_003&quot;</span>)</span><br><span class="line">        sortBy_RDD.sortBy(_._3, <span class="literal">true</span>, <span class="number">1</span>).foreach(println)</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;SortBy_004&quot;</span>)</span><br><span class="line">        sortBy_RDD.sortBy(_._4, <span class="literal">true</span>, <span class="number">1</span>).foreach(println)</span><br><span class="line"></span><br><span class="line">        sc.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-2-2-Action-行动算子"><a href="#2-2-2-Action-行动算子" class="headerlink" title="2.2.2 Action 行动算子"></a>2.2.2 Action 行动算子</h5><p><strong>Action 行动算子</strong>具有触发执行的特点，一个 <code>Application</code> 应用程序有几个 <code>Action</code> 类算子执行，就有几个 <code>Job</code> 运行。</p>
<p>点击快速跳转到 SparkRDD Action 列表： <a target="_blank" rel="noopener" href="https://spark.apache.org/docs/latest/rdd-programming-guide.html#actions">Actions</a></p>
<p>下面列出常用的行动算子及用法：</p>
<ul>
<li><p><code>reduce(func)</code> 通过函数 <code>func</code> 聚集数据集中的所有元素。<code>func</code> 函数接受 <code>2</code> 个参数，返回 <code>1</code> 个值。这个函数必须是关联性的，确保可以被正确的并发执行。关于 <code>reduce</code> 的执行过程，可以对比 <strong>Scala</strong> 中类似的 <code>reduce</code>函数。</p>
<p>不同于 <code>Transformation</code> 算子，执行后结果是<code>RDD</code>，执行 <code>Action</code> 算子之后，其结果不再是 <code>RDD</code>，而是一个<strong>标量</strong>。</p>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Action_Reduce</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[2]&quot;</span>).setAppName(<span class="string">&quot;Action_Reduce&quot;</span>)</span><br><span class="line">        <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">OFF</span>)</span><br><span class="line">        <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line">        <span class="comment">// val list = List(0, 5, 15, 20, 25, 30) // 如果用这个 list 输出为: 95</span></span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(</span><br><span class="line">            <span class="string">&quot;1,李  磊,22,175&quot;</span>,</span><br><span class="line">            <span class="string">&quot;2,刘银鹏,23,175&quot;</span>,</span><br><span class="line">            <span class="string">&quot;3,齐彦鹏,22,180&quot;</span>,</span><br><span class="line">            <span class="string">&quot;4,杨  柳,22,168&quot;</span>,</span><br><span class="line">            <span class="string">&quot;5,敦  鹏,20,175&quot;</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">val</span> listRDD = sc.parallelize(list)</span><br><span class="line">        listRDD.foreach(println)</span><br><span class="line">        println()</span><br><span class="line">        <span class="keyword">val</span> ret = listRDD.reduce(</span><br><span class="line">            (v1, v2) =&gt; &#123;</span><br><span class="line">                println(<span class="string">&quot;[LOGS] v1      &gt; &quot;</span> + v1 + <span class="string">&quot; &quot;</span>)</span><br><span class="line">                println(<span class="string">&quot;[LOGS] v2      &gt; &quot;</span> + v2 + <span class="string">&quot; &quot;</span>)</span><br><span class="line">                println(<span class="string">&quot;[LOGS] v1 + v2 &gt; &quot;</span> + (v1 + v2))</span><br><span class="line">                v1 + v2</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;ret: &quot;</span> + ret)</span><br><span class="line">        sc.stop()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">输出如下：</span><br><span class="line">3,齐彦鹏,22,180</span><br><span class="line">1,李  磊,22,175</span><br><span class="line">4,杨  柳,22,168</span><br><span class="line">2,刘银鹏,23,175</span><br><span class="line">5,敦  鹏,20,175</span><br><span class="line"></span><br><span class="line">[LOGS] v1      &gt; 3,齐彦鹏,22,180 </span><br><span class="line">[LOGS] v2      &gt; 4,杨  柳,22,168 </span><br><span class="line">[LOGS] v1 + v2 &gt; 3,齐彦鹏,22,1804,杨  柳,22,168</span><br><span class="line">[LOGS] v1      &gt; 3,齐彦鹏,22,1804,杨  柳,22,168 </span><br><span class="line">[LOGS] v2      &gt; 5,敦  鹏,20,175 </span><br><span class="line">[LOGS] v1 + v2 &gt; 3,齐彦鹏,22,1804,杨  柳,22,1685,敦  鹏,20,175</span><br><span class="line">[LOGS] v1      &gt; 1,李  磊,22,175 </span><br><span class="line">[LOGS] v2      &gt; 2,刘银鹏,23,175 </span><br><span class="line">[LOGS] v1 + v2 &gt; 1,李  磊,22,1752,刘银鹏,23,175</span><br><span class="line">[LOGS] v1      &gt; 1,李  磊,22,1752,刘银鹏,23,175 </span><br><span class="line">[LOGS] v2      &gt; 3,齐彦鹏,22,1804,杨  柳,22,1685,敦  鹏,20,175 </span><br><span class="line">[LOGS] v1 + v2 &gt; 1,李  磊,22,1752,刘银鹏,23,1753,齐彦鹏,22,1804,杨  柳,22,1685,敦  鹏,20,175</span><br><span class="line">ret: 1,李  磊,22,1752,刘银鹏,23,1753,齐彦鹏,22,1804,杨  柳,22,1685,敦  鹏,20,175</span><br></pre></td></tr></table></figure>



<ul>
<li><code>collect</code> 在 <code>Driver</code> 的程序中，以数组的形式，返回数据集的所有元素。这通常会在使用 <code>filter</code> 或者其它操作后，返回一个足够小的数据子集再使用，直接将整个 <code>RDD</code> 集 <code>Collect</code>返回，很可能会让 <code>Driver</code> 程序 <code>OOM</code>，这点尤其需要注意。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>count</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>take</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>first</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>saveAsTextFile</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>foreach</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>saveAsNewAPIHadoopFile</code></li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-2-3-其他算子"><a href="#2-2-3-其他算子" class="headerlink" title="2.2.3 其他算子"></a>2.2.3 其他算子</h5><p>Spark中还有许多其他种类的算子，体现了 <code>Spark</code> 算子的灵活性，其中包括将数据进行持久化的算子。</p>
<ul>
<li><code>cache</code>：懒加载执行的，必须有一个 <code>Action</code> 触发算子触发执行。 </li>
<li><code>persist</code>：懒加载执行的，必须有一个 <code>Action</code> 触发算子触发执行。 </li>
<li><code>checkpoint</code>：算子不仅能将 <code>RDD</code> 持久化到磁盘，还能切断 <code>RDD</code> 之间的依赖关系。</li>
</ul>
<h5 id="2-2-3-宽依赖和窄依赖"><a href="#2-2-3-宽依赖和窄依赖" class="headerlink" title="2.2.3 宽依赖和窄依赖"></a>2.2.3 宽依赖和窄依赖</h5><ol>
<li><p>宽依赖</p>
<p>① 子 <code>RDD</code> 的每个分区依赖于所有的父 <code>RDD</code> 分区 </p>
<p>② 对单个 <code>RDD</code> 基于 <code>Key</code>进行重组和 <code>Reduce</code>，如 <code>groupByKey</code>、<code>reduceByKey</code></p>
<p>③ 对两个 <code>RDD</code> 基于 <code>Key</code> 进行 <code>join</code> 和重组，如 <code>join</code></p>
<p>④ 经过大量 <code>shuffle</code> 生成的 <code>RDD</code>，建议进行缓存。这样避免失败后重新计算带来的开销。</p>
</li>
<li><p>窄依赖</p>
<p>① 子<code>RDD</code>的每个分区依赖于常数个父分区（与数据规模无关）</p>
<p>② 输入输出一对一的算子，且结果<code>RDD</code>的分区结构不变。主要是<code>map/flatmap</code></p>
<p>③ 输入输出一对一的算子，但结果<code>RDD</code>的分区结构发生了变化，如<code>union/coalesce</code></p>
<p>④ 从输入中选择部分元素的算子，如 <code>filter</code>、<code>distinct</code>、<code>substract</code>、<code>sample</code></p>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-11T08:03:22.000Z" title="2024/6/11 16:03:22">2024-06-11</time>发表</span><span class="level-item"><time dateTime="2024-06-21T07:31:50.570Z" title="2024/6/21 15:31:50">2024-06-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E9%A1%B9%E7%9B%AE/">项目</a></span><span class="level-item">1 小时读完 (大约10206个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/11/OnlineTravelBigdataPlatform/">OnlineTravelBigdataPlatform</a></p><div class="content"><h2 id="🌳-在线旅游大数据平台项目"><a href="#🌳-在线旅游大数据平台项目" class="headerlink" title="🌳 在线旅游大数据平台项目"></a>🌳 在线旅游大数据平台项目</h2><p>
    <label for="file">完成度：</label>
    <progress max="100" value="100"> 100% </progress>
</p>


<p><strong>日期任务清单</strong></p>
<ul>
<li><p><input checked="" disabled="" type="checkbox"> 
项目开始日期: 2024-06-11</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 了解项目的背景以及整个系统的架构</li>
<li><input checked="" disabled="" type="checkbox"> 了解系统需要完成的主要功能</li>
<li><input checked="" disabled="" type="checkbox"> 了解系统整个架构</li>
<li><input checked="" disabled="" type="checkbox"> 完成数据服务端的部署</li>
<li><input checked="" disabled="" type="checkbox"> 完成数据客户端的部署</li>
<li><input checked="" disabled="" type="checkbox"> 了解数据集</li>
<li><input checked="" disabled="" type="checkbox"> 认识消息队列 Kafka</li>
<li><input checked="" disabled="" type="checkbox"> 完成消息队列 Kafka 的部署</li>
<li><input checked="" disabled="" type="checkbox"> 了解消息队列 Kafka 的基本应用</li>
<li><input checked="" disabled="" type="checkbox"> 使用 Flume 收集数据到 Kafka</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-12</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 了解实时数据分析所用到的技术</li>
<li><input checked="" disabled="" type="checkbox"> 了解 <code>SparkStreaming</code> 和 <code>Flink</code></li>
<li><input checked="" disabled="" type="checkbox"> 了解 <code>SparkStreaming</code> 的核心概念</li>
<li><input checked="" disabled="" type="checkbox"> 了解数据源</li>
<li><input checked="" disabled="" type="checkbox"> 借助<code>netcat</code>实践<code>Kafka</code></li>
<li><input checked="" disabled="" type="checkbox"> 了解转换操作</li>
<li><input checked="" disabled="" type="checkbox"> 具体实施任务：处理数据</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-13 </p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 了解数据库连接池</li>
<li><input checked="" disabled="" type="checkbox"> 了解如何向 MySQL 数据库中写入数据</li>
<li><input checked="" disabled="" type="checkbox"> 借助 <code>alibaba Druid</code> 库实现一个数据库连接工具类 </li>
<li><input checked="" disabled="" type="checkbox"> 编写案例：<code>WordCount</code></li>
<li><input checked="" disabled="" type="checkbox"> 具体实施任务，将代码中生成的数据写入<code>MySQL</code>。</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-14</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 了解什么是 Kafka Offset</li>
<li><input checked="" disabled="" type="checkbox"> 维护 Kafka Offset</li>
<li><input checked="" disabled="" type="checkbox"> 具体实施任务，将 Kafka 的 Offset 配合 <code>MySQL</code> 用代码进行维护。</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-17</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 进行后端开发</li>
<li><input checked="" disabled="" type="checkbox"> 进行前端开发</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-18</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 进行热力图的绘制</li>
<li><input checked="" disabled="" type="checkbox"> 进行人流量柱状图的绘制</li>
<li><input checked="" disabled="" type="checkbox"> 进行人流量趋势图的绘制</li>
</ul>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
2024-06-19 项目结束日期</p>
</li>
</ul>
<p><strong>文件目录</strong></p>
<p>[TOC]</p></div><a class="article-more button is-small is-size-7" href="/2024/06/11/OnlineTravelBigdataPlatform/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-10T09:32:28.000Z" title="2024/6/10 17:32:28">2024-06-10</time>发表</span><span class="level-item"><time dateTime="2024-06-30T10:49:31.731Z" title="2024/6/30 18:49:31">2024-06-30</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Scala/">Scala</a></span><span class="level-item">31 分钟读完 (大约4656个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/10/ScalaQuickIN/">ScalaQuickIN</a></p><div class="content"><h2 id="快速入门-Scala"><a href="#快速入门-Scala" class="headerlink" title="快速入门 Scala"></a>快速入门 Scala</h2><p>[TOC]</p>
<!-- toc --></div><a class="article-more button is-small is-size-7" href="/2024/06/10/ScalaQuickIN/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-06-02T14:43:53.000Z" title="2024/6/2 22:43:53">2024-06-02</time>发表</span><span class="level-item"><time dateTime="2024-07-07T13:04:01.539Z" title="2024/7/7 21:04:01">2024-07-07</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/HBase/">HBase</a></span><span class="level-item">1 小时读完 (大约6723个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/06/02/QuickPassHBase/">QuickPassHBase</a></p><div class="content"><h2 id="快速上手HBase"><a href="#快速上手HBase" class="headerlink" title="快速上手HBase"></a>快速上手HBase</h2><p>[TOC]</p>
<h3 id="⚙-1-HBase简介"><a href="#⚙-1-HBase简介" class="headerlink" title="⚙ 1. HBase简介"></a>⚙ 1. HBase简介</h3><h4 id="1-1-HBase的定义"><a href="#1-1-HBase的定义" class="headerlink" title="1.1 HBase的定义"></a>1.1 HBase的定义</h4><p><strong>Apache HBase</strong> 是以 HDFS 为数据存储的，一种分布式、可扩展的 NoSQL 数据库。</p>
<p>HBase 的设计理念依据 Google 的 BigTable 论文，论文中对于数据模型的首句介绍。</p>
<p><strong>BigTable是一个稀疏的、分布式的、持久的多维排序映射(Map)。该映射由行键、列键和时间戳索引作为键(Key)，映射中的每个值(Value)都是一个未解释的字节数组。</strong></p>
<p>HBase 使用与 BigTable 非常相似的数据模型。用户将数据行存储在带标签的表中。数据行具有可排序的键和任意数量的列。该表存储稀疏，因此如果用户喜欢，同一表中的行可以具有疯狂变化的列。</p>
<h4 id="1-2-HBase的数据模型"><a href="#1-2-HBase的数据模型" class="headerlink" title="1.2 HBase的数据模型"></a>1.2 HBase的数据模型</h4><h5 id="1-2-1-HBase-的逻辑结构"><a href="#1-2-1-HBase-的逻辑结构" class="headerlink" title="1.2.1 HBase 的逻辑结构"></a>1.2.1 HBase 的逻辑结构</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;row_key1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;personal_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ZhangSan&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Beijing&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;156****0000&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;office_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;tel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;010-1234567&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shandong&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;row_key11&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;personal_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Shanghai&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;133****0000&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;office_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;tel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;010-1234567&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;row_key2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td>列族→</td>
        <td colspan="3">personal_info</td> 
        <td colspan="3">office_info</td> 
    </tr>
    <tr>
        <td>RowKey↓</td>
        <td>name</td> 
        <td>city</td>
        <td>phone</td>
        <td>tel</td>
        <td>address</td>
    </tr>
    <tr>
        <td>row_key1</td>
        <td>ZhangSan</td> 
        <td>Beijing</td>
        <td>156****0000</td>
        <td>010-1234567</td>
        <td>Shandong</td>
    </tr>
    <tr>
        <td>row_key11</td>
        <td></td> 
        <td>Shanghai</td>
        <td>131****0000</td>
        <td>010-1234567</td>
        <td></td>
    </tr>
    <tr>
        <td>row_key2</td>
        <td>...</td> 
        <td>...</td>
        <td>...</td>
        <td>...</td>
        <td>...</td>
    </tr>
</table>

<p>在上面的表格中：</p>
<ul>
<li><code>personal_info</code>、<code>office_info</code>称为<strong>列族</strong></li>
<li><code>name</code>、<code>city</code>、<code>phone</code>、<code>tel</code>、<code>address</code>称为<strong>列</strong></li>
<li><code>row_key1</code>、<code>row_key11</code>称为<strong>行键</strong>。</li>
<li>将一整张大表按照<strong>行</strong>进行拆分，拆分为多个表，拆分后的每个表称为**块(Region)**，用于实现分布式结构。</li>
<li>将一整张大表按照<strong>列族</strong>进行拆分，拆分为多个**存储(Store)**，用于在底层存储到不同的文件夹中，便于文件对应。</li>
</ul>
<p>存储数据<strong>稀疏</strong>，数据存储<strong>多维</strong>，不同的行具有不同的列。数据存储整体有序，按照RowKey的字典序排列，RowKey为一个Byte数组。</p>
<h5 id="1-2-2-HBase-的物理结构"><a href="#1-2-2-HBase-的物理结构" class="headerlink" title="1.2.2 HBase 的物理结构"></a>1.2.2 HBase 的物理结构</h5><p>物理存储结构即为数据映射关系，而在概念视图的空单元格，底层实际根本不存储。</p>
<p>在HDFS中划分好的存储Store如下：</p>
<table>
    <tr>
        <td></td>
        <td colspan="3">personal_info</td> 
    </tr>
    <tr>
        <td>RowKey</td>
        <td>name</td> 
        <td>city</td>
        <td>phone</td>
    </tr>
    <tr>
        <td>row_key1</td>
        <td>ZhangSan</td> 
        <td>Beijing</td>
        <td>156****0000</td>
    </tr>
    <tr>
        <td>row_key11</td>
        <td></td> 
        <td>Shanghai</td>
        <td>131****0000</td>
    </tr>
    <tr>
        <td>row_key2</td>
        <td>...</td> 
        <td>...</td>
        <td>...</td>
    </tr>
</table>

<p>其底层一定是以映射(Map)的方式进行存储的，格式为**<code>(Key, Value)</code><strong>，<code>Value</code>一定是</strong>“ZhangSan”**这种字段。那么<code>Key</code>是什么呢？</p>
<p>为了确定<code>Value</code>值**”ZhangSan”<strong>，我们需要用</strong>Key<strong>对应到</strong>Value**，于是得到存储如下：</p>
<table>
<thead>
<tr>
<th>Row Key</th>
<th>Column Family</th>
<th>Column Qualifier</th>
<th>Timestamp</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>row_key1</td>
<td>personal_info</td>
<td>name</td>
<td>t1</td>
<td>Put</td>
<td>ZhangSan</td>
</tr>
<tr>
<td>row_key1</td>
<td>personal_info</td>
<td>city</td>
<td>t2</td>
<td>Put</td>
<td>Beijing</td>
</tr>
<tr>
<td>row_key1</td>
<td>personal_info</td>
<td>phone</td>
<td>t3</td>
<td>Put</td>
<td>156****0000</td>
</tr>
<tr>
<td>row_key1</td>
<td>personal_info</td>
<td>phone</td>
<td>t4</td>
<td>Put</td>
<td>156****0001</td>
</tr>
<tr>
<td>row_key1</td>
<td>personal_info</td>
<td>phone</td>
<td>t5</td>
<td>Delete</td>
<td>156****0001</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<p>因为 HDFS 是无法修改数据的，而 HBase 需要修改数据，那么就需要解决这一问题，于是就有了**时间戳(Timestamp)**。不同版本（version）的数据根据 <strong>Timestamp</strong> 进行区分，读取数据默认读取最新的版本。</p>
<p>在上面的表格中，<code>t4</code>相对于<code>t3</code>来说就是进行了修改，将<code>t3</code>时的**<code>phone</code><strong>从<code>156****0000</code>修改为<code>t4</code>时的<code>156****0001</code>，读取时默认读取<code>t4</code>时的</strong><code>phone</code>**值，通过这种方式完成了修改。</p>
<p>同样的，我们也不好删除数据，因此我们只需要插入一条**<code>Type</code>**为<code>Delete</code>的数据即可。</p>
<h5 id="1-2-3-数据模型"><a href="#1-2-3-数据模型" class="headerlink" title="1.2.3 数据模型"></a>1.2.3 数据模型</h5><ul>
<li><p><strong>Name Space</strong> 命名空间</p>
<p>类似于关系型数据库的 <strong>Database</strong> 概念，每个命名空间下有多个表。HBase 两个自带的命名空间，分别是 <code>hbase</code> 和<code>default</code>，<code>hbase</code> 中存放的是 HBase 内置的表，<code>default</code>表是用户默认使用的命名空间。</p>
</li>
<li><p><strong>Table</strong></p>
<p>类似于关系型数据库的<strong>表</strong>概念。不同的是，HBase 定义表时<strong>只需要声明列族</strong>即可，<strong>不需要声明具体的列</strong>。因为数据存储时稀疏的，所有往HBase写入数据时，字段<strong>可以动态、按需指定</strong>。因此，和关系型数据库相比，HBase能够轻松应对字段变更的场景。</p>
<p>需要注意的是，<strong>列族</strong>的存在是<strong>动态</strong>添加列（或称字段）的基础。</p>
</li>
<li><p><strong>Row</strong></p>
<p>HBase 表中的每行数据都由<em>*一个行键(RowKey)<strong>和</strong>多个列(Column)<strong>组成，数据是按照 RowKey的字典顺序存储的，</strong>*并且查询数据时只能根据 RowKey进行检索</em>**，所以RowKey的设计十分重要。</p>
</li>
<li><p><strong>Column</strong></p>
<p>HBase 中的每个列都由<strong>列族(Column Family)<strong>和</strong>列限定符(Column Qualifier)<strong>进行限定，例如<code>info:name, info:age</code>。建表时，只需指明列族，而</strong>列限定符无需预先定义</strong>。列限定符听起来很高端，其实就是列名的意思。</p>
</li>
<li><p><strong>Time Stamp</strong></p>
<p>用于标识数据的**不同版本(Version)**，每条数据写入时，系统会自动为其加上该字段，其值为写入 HBase 的时间。</p>
</li>
<li><p><strong>Cell</strong></p>
<p>由 <code>&#123;rowkey, Column Family: Column Qualifier, Timestamp&#125;</code> 唯一确定的单元，<code>Cell</code> 中的数据全部是字节码形式存储。</p>
</li>
</ul>
<h4 id="1-3-HBase-基本架构"><a href="#1-3-HBase-基本架构" class="headerlink" title="1.3 HBase 基本架构"></a>1.3 HBase 基本架构</h4><img src="./QuickPassHBase/HBaseStructure.png" alt="HBase基本架构" style="zoom:33%;" />

<ul>
<li><p><strong>Master</strong></p>
<p><strong>主要进程</strong>，具体实现类为<code>HMaster</code>，通常部署在<code>NameNode</code>上。</p>
<p><strong>主要功能</strong>：负责通过 <code>ZK</code> 监控 <code>RegionServer</code> 进程状态，同时是所有元数据变化的接口，内部启动监控执行 <code>region</code> 的故障转移和拆分的线程。</p>
<p><strong>功能的详细描述</strong>：</p>
<ul>
<li><p>管理元数据表格 <code>hbase:meta</code>：接收用户对表格创建、修改、删除的命令并执行。</p>
</li>
<li><p>监控 <code>RegionServer</code> 是否需要进行<strong>负载均衡</strong>、<strong>故障转移</strong>和<strong>Region拆分</strong>。通过启动多个后台线程监控实现上述功能：</p>
<ul>
<li><p><code>LoadBalancer</code> 负载均衡器</p>
<p>周期性监控 <code>region</code>分布在 <code>RegionServer</code> 上面是否均衡，由参数 <code>hbase.balancer.period</code>控制周期时间，默认5分钟。</p>
</li>
<li><p><code>CatalogJanitor</code>元数据管理器</p>
<p>定期检查和清理<code>hbase:meta</code>中的数据。</p>
</li>
<li><p><code>MasterProcWAL</code> Master 预写日志处理器</p>
<p>把Master需要执行的任务记录到预写日志WAL中，如果Master宕机，则让BackupMaster继续操作。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>RegionServer</strong></p>
<p><strong>主要进程</strong>，具体实现类为<code>HRegionServer</code>，通常部署在<code>DataNode</code>上。</p>
<p><strong>功能</strong>：主要负责数据 <code>Cell</code> 的处理，同时在执行区域的拆分和合并的时候，由 <code>RegionServer</code> 来实际执行。</p>
<p><strong>功能的详细描述</strong>：</p>
<ul>
<li>负责数据 <code>Cell</code> 的处理，例如写入数据<code>put</code>，查询数据<code>get</code>等。</li>
<li>拆分合并 <code>region</code> 的实际执行者，有 <strong>Master</strong> 监控，有<code>RegionServer</code> 执行。</li>
</ul>
</li>
<li><p><strong>ZooKeeper</strong></p>
<p>HBase 通过 <code>ZooKeeper</code> 来做 <code>Master</code>的高可用、记录 <code>RegionServer</code> 的部署信息、并且存储有 <code>meta</code> 表的位置信息。<br>HBase 对于数据的读写操作时是直接访问 <code>ZooKeeper</code> 的，在 2.3 版本推出 <code>Master Registry</code> 模式，客户端可以直接访问 <code>Master</code>。使用此功能，会加大对 <code>Master</code>的压力，减轻对 <code>ZooKeeper</code> 的压力。</p>
</li>
<li><p><strong>HDFS</strong></p>
<p><code>HDFS</code> 为 HBase 提供最终的底层数据存储服务，同时为 HBase 提供高容错的支持。</p>
</li>
</ul>
<p>上图中的<code>Region</code>由三个<code>RegionServer</code>随机管理，尽量均衡。表名<code>hbase:meta</code>是一个特例，他存储在<strong>HDFS</strong>，但是由<strong>Master</strong>管理。</p>
<h3 id="🔧-2-快速上手"><a href="#🔧-2-快速上手" class="headerlink" title="🔧 2. 快速上手"></a>🔧 2. 快速上手</h3><h4 id="2-1-安装部署"><a href="#2-1-安装部署" class="headerlink" title="2.1 安装部署"></a>2.1 安装部署</h4><h5 id="2-1-1-分布式部署"><a href="#2-1-1-分布式部署" class="headerlink" title="2.1.1 分布式部署"></a>2.1.1 分布式部署</h5><ol>
<li><p>至少 3 台虚拟机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop101</span><br><span class="line">hadoop102</span><br><span class="line">hadoop103</span><br></pre></td></tr></table></figure>
</li>
<li><p>保证 <strong>ZooKeeper</strong> 正常部署，并且启动 <strong>ZooKeeper</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure>
</li>
<li><p>保证 <strong>Hadoop</strong> 正常部署，并且启动 <strong>Hadoop</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置 <strong>HBase</strong> 环境</p>
<p>① 下载 HBase 安装包（压缩包），这里假设为<code>hbase-2.4.11-bin.tar.gz</code></p>
<p>② 解压 HBase 安装包到一个文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /path/to/hbase-2.4.11-bin.tar.gz -C /path/to/module</span><br></pre></td></tr></table></figure>

<p>③ 在用户目录下，添加用户环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim .bashrc</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#HBase_HOME</span></span><br><span class="line"><span class="built_in">export</span> HBASE_HOME = /path/to/module/hbase-2.4.11</span><br><span class="line"><span class="built_in">export</span> PATH = <span class="variable">$PATH</span>:<span class="variable">$HBASE_HOME</span>/bin</span><br></pre></td></tr></table></figure>

<p>④ 使环境变量生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .bashrc</span><br></pre></td></tr></table></figure>

<p>⑤ 修改配置文件</p>
<ul>
<li><p><code>hbase-env.sh</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表示是否需要 HBase 管理维护一个自带的 ZooKeeper, 默认为 true</span></span><br><span class="line"><span class="comment"># 我们需要使用本机已经配置好的 ZooKeeper, 所以修改为 False</span></span><br><span class="line"><span class="built_in">export</span> HBASE_MANAGES_ZK = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>hbase-site.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ZooKeeper的地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop101,hadoop102,hadoop103<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- HBase数据在HDFS中的存放路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop101:8020/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- HBase的运行模式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- false为单机模式, HBase和ZooKeeper会运行在同一个JVM虚拟机中 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- true 为分布式模式 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ZooKeeper快照的存储位置 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里替换为自己的 /path/to/ZooKeeperDir --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/module/zookeeper-3.4.6/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- HBase 安全模式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在分布式模式下, 设置为 false --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.unsafe.stream.capability.enforce<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>regionservers</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop101</span><br><span class="line">hadoop102</span><br><span class="line">hadoop103</span><br></pre></td></tr></table></figure></li>
</ul>
<p>⑥ 解决 <code>log4j</code> 不兼容的问题，移除 <code>HBase</code>或者 <code>Hadoop</code>的 <code>.jar</code>包</p>
<p>⑦ 使用 <code>scp</code> 命令同步 HBase 配置，需要提前设置好免密登录。或者使用 <code>xsync</code></p>
</li>
<li><p>启动 HBase 服务</p>
<ul>
<li><p>单点启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#单点启动HMaster</span></span><br><span class="line">hbase-daemon.sh start master</span><br><span class="line"><span class="comment">#单点启动HRegionServer</span></span><br><span class="line">hbase-daemon.sh start regionserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>集群启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-hbase.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>停止服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop-hbase.sh</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h5 id="2-1-2-高可用服务"><a href="#2-1-2-高可用服务" class="headerlink" title="2.1.2 高可用服务"></a>2.1.2 高可用服务</h5><ol>
<li><p>如果 HBase 已经启动，先关闭HBase</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop-hbase.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加配置文件 <code>backup-masters</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用touch命令或者echo命令均可</span></span><br><span class="line"><span class="built_in">touch</span> /path/to/hbase-2.1.4/conf/backup-masters</span><br><span class="line">vim /path/to/hbase-2.1.4/conf/backup-masters</span><br></pre></td></tr></table></figure>

<p>添加内容：<code>hadoop102</code></p>
</li>
<li><p>使用 <code>scp</code> 命令分发配置文件</p>
</li>
<li><p>启动HBase，正常启动进程如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop101 -&gt; HMaster HRegionServer</span><br><span class="line">hadoop102 -&gt; HMaster HRegionServer</span><br><span class="line">hadoop103 -&gt; HRegionServer</span><br></pre></td></tr></table></figure>

<p>其中，<code>hadoop101</code> 的 <code>HMaster</code> 先启动作为主节点，<code>hadoop102</code> 的 <code>HMaster</code>后启动，作为**备用节点(Backup-Master)**。</p>
</li>
</ol>
<h4 id="2-2-使用操作"><a href="#2-2-使用操作" class="headerlink" title="2.2 使用操作"></a>2.2 使用操作</h4><h5 id="2-2-1-Shell操作"><a href="#2-2-1-Shell操作" class="headerlink" title="2.2.1 Shell操作"></a>2.2.1 Shell操作</h5><p>使用命令 <code>hbase shell</code> 启动 HBase 的 <code>Shell</code> 命令界面，所有命令均可以使用 <code>help</code> 查到。</p>
<p>当我们在 <code>hbase shell</code>中输入<code>help</code>命令时，将会弹出HBase的使用提示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hbase shell</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; help</span><br><span class="line">HBase Shell, version 2.1.8, rd8333e556c8ed739cf39dab58ddc6b43a50c0965, Tue Nov 19 15:29:04 UTC 2019</span><br><span class="line">Type &#x27;help &quot;COMMAND&quot;&#x27;, (e.g. &#x27;help &quot;get&quot;&#x27; -- the quotes are necessary) for help on a specific command.</span><br><span class="line">Commands are grouped. Type &#x27;help &quot;COMMAND_GROUP&quot;&#x27;, (e.g. &#x27;help &quot;general&quot;&#x27;) for help on a command group.</span><br><span class="line"></span><br><span class="line">COMMAND GROUPS:</span><br><span class="line">  Group name: general</span><br><span class="line">  Commands: processlist, status, table_help, version, whoami</span><br><span class="line"></span><br><span class="line">  Group name: ddl</span><br><span class="line">  Commands: alter, alter_async, alter_status, clone_table_schema, create, describe, disable, disable_all, drop, drop_all, enable, enable_all, exists, get_table, is_disabled, is_enabled, list, list_regions, locate_region, show_filters</span><br><span class="line"></span><br><span class="line">  Group name: namespace</span><br><span class="line">  Commands: alter_namespace, create_namespace, describe_namespace, drop_namespace, list_namespace, list_namespace_tables</span><br><span class="line"></span><br><span class="line">  Group name: dml</span><br><span class="line">  Commands: append, count, delete, deleteall, get, get_counter, get_splits, incr, put, scan, truncate, truncate_preserve</span><br><span class="line"></span><br><span class="line">  Group name: tools</span><br><span class="line">  Commands: assign, balance_switch, balancer, balancer_enabled, catalogjanitor_enabled, catalogjanitor_run, catalogjanitor_switch, cleaner_chore_enabled, cleaner_chore_run, cleaner_chore_switch, clear_block_cache, clear_compaction_queues, clear_deadservers, close_region, compact, compact_rs, compaction_state, flush, hbck_chore_run, is_in_maintenance_mode, list_deadservers, major_compact, merge_region, move, normalize, normalizer_enabled, normalizer_switch, split, splitormerge_enabled, splitormerge_switch, stop_master, stop_regionserver, trace, unassign, wal_roll, zk_dump</span><br><span class="line"></span><br><span class="line">  Group name: replication</span><br><span class="line">  Commands: add_peer, append_peer_exclude_namespaces, append_peer_exclude_tableCFs, append_peer_namespaces, append_peer_tableCFs, disable_peer, disable_table_replication, enable_peer, enable_table_replication, get_peer_config, list_peer_configs, list_peers, list_replicated_tables, remove_peer, remove_peer_exclude_namespaces, remove_peer_exclude_tableCFs, remove_peer_namespaces, remove_peer_tableCFs, set_peer_bandwidth, set_peer_exclude_namespaces, set_peer_exclude_tableCFs, set_peer_namespaces, set_peer_replicate_all, set_peer_serial, set_peer_tableCFs, show_peer_tableCFs, update_peer_config</span><br><span class="line"></span><br><span class="line">  Group name: snapshots</span><br><span class="line">  Commands: clone_snapshot, delete_all_snapshot, delete_snapshot, delete_table_snapshots, list_snapshots, list_table_snapshots, restore_snapshot, snapshot</span><br><span class="line"></span><br><span class="line">  Group name: configuration</span><br><span class="line">  Commands: update_all_config, update_config</span><br><span class="line"></span><br><span class="line">  Group name: quotas</span><br><span class="line">  Commands: list_quota_snapshots, list_quota_table_sizes, list_quotas, list_snapshot_sizes, set_quota</span><br><span class="line"></span><br><span class="line">  Group name: security</span><br><span class="line">  Commands: grant, list_security_capabilities, revoke, user_permission</span><br><span class="line"></span><br><span class="line">  Group name: procedures</span><br><span class="line">  Commands: list_locks, list_procedures</span><br><span class="line"></span><br><span class="line">  Group name: visibility labels</span><br><span class="line">  Commands: add_labels, clear_auths, get_auths, list_labels, set_auths, set_visibility</span><br><span class="line"></span><br><span class="line">  Group name: rsgroup</span><br><span class="line">  Commands: add_rsgroup, balance_rsgroup, get_rsgroup, get_server_rsgroup, get_table_rsgroup, list_rsgroups, move_namespaces_rsgroup, move_servers_namespaces_rsgroup, move_servers_rsgroup, move_servers_tables_rsgroup, move_tables_rsgroup, remove_rsgroup, remove_servers_rsgroup</span><br><span class="line"></span><br><span class="line">SHELL USAGE:</span><br><span class="line">Quote all names in HBase Shell such as table and column names.  Commas delimit</span><br><span class="line">command parameters.  Type &lt;RETURN&gt; after entering a command to run it.</span><br><span class="line">Dictionaries of configuration used in the creation and alteration of tables are</span><br><span class="line">Ruby Hashes. They look like this:</span><br><span class="line"></span><br><span class="line">  &#123;&#x27;key1&#x27; =&gt; &#x27;value1&#x27;, &#x27;key2&#x27; =&gt; &#x27;value2&#x27;, ...&#125;</span><br><span class="line"></span><br><span class="line">and are opened and closed with curley-braces.  Key/values are delimited by the</span><br><span class="line">&#x27;=&gt;&#x27; character combination.  Usually keys are predefined constants such as</span><br><span class="line">NAME, VERSIONS, COMPRESSION, etc.  Constants do not need to be quoted.  Type</span><br><span class="line">&#x27;Object.constants&#x27; to see a (messy) list of all constants in the environment.</span><br><span class="line"></span><br><span class="line">If you are using binary keys or values and need to enter them in the shell, use</span><br><span class="line">double-quote&#x27;d hexadecimal representation. For example:</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">get <span class="string">&#x27;t1&#x27;</span>, <span class="string">&quot;key\x03\x3f\xcd&quot;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">get <span class="string">&#x27;t1&#x27;</span>, <span class="string">&quot;key\003\023\011&quot;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">put <span class="string">&#x27;t1&#x27;</span>, <span class="string">&quot;test\xef\xff&quot;</span>, <span class="string">&#x27;f1:&#x27;</span>, <span class="string">&quot;\x01\x33\x40&quot;</span></span></span><br><span class="line"></span><br><span class="line">The HBase shell is the (J)Ruby IRB with the above HBase-specific commands added.</span><br><span class="line">For more on the HBase Shell, see http://hbase.apache.org/book.html</span><br></pre></td></tr></table></figure>

<p>根据上述信息，我们可以进一步的操作 HBase 数据库。我们实际开发中常用的**命令组(COMMAND GROUPS)**有：<code>general</code>、<code>namespace</code>、<code>ddl</code>、<code>dml</code>等，下面依次介绍这些内容：</p>
<ul>
<li><p><strong>通用命令 <code>general</code></strong></p>
<ul>
<li><p>查看 HBase 状态 <code>status</code>，提供 HBase 的状态，如服务器的数量等</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; status</span><br><span class="line">1 active master, 0 backup masters, 1 servers, 0 dead, 4.0000 average load</span><br><span class="line">Took 0.5268 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看 HBase 版本 <code>version</code>，提供正在使用 HBase 版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):002:0&gt; version</span><br><span class="line">2.1.8, rd8333e556c8ed739cf39dab58ddc6b43a50c0965, Tue Nov 19 15:29:04 UTC 2019</span><br><span class="line">Took 0.0002 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>表引用命令提供帮助 <code>table_help</code></p>
</li>
<li><p>提供有关用户的信息 <code>whoami</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):003:0&gt; whoami</span><br><span class="line">nilera (auth:SIMPLE)</span><br><span class="line">    groups: nilera</span><br><span class="line">Took 0.0283 seconds</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>操作命名空间 <code>Namespace</code></strong></p>
<p>**命名空间(Namespace)**，相当于MySQL数据库中的DataBase。<code>Namespace</code> 命令包括：<code>alter namespace</code>、<code>create_namespace</code>、<code>describe_namespace</code>、<code>drop_namespace</code>、<code>list_namespace</code>、<code>list_namespace_tables</code>。下面将对一些常用命令进行介绍：</p>
<ul>
<li><p>查看全部命名空间 <code>list_namespace</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; list_namespace</span><br><span class="line">NAMESPACE</span><br><span class="line">default</span><br><span class="line">hbase</span><br><span class="line">2 row(s)</span><br><span class="line">Took 0.5484 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建命名空间 <code>create_namespace</code></p>
<p>用法：<code>create_namespace &#39;ns&#39;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; create_namespace &#x27;bigdata&#x27;</span><br><span class="line">Took 0.0432 seconds</span><br><span class="line">hbase(main):002:0&gt; list_namespace</span><br><span class="line">NAMESPACE</span><br><span class="line">bigdata</span><br><span class="line">default</span><br><span class="line">hbase</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0224 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除命名空间 <code>drop_namespace</code></p>
<p>用法：<code>drop_namespace &#39;ns&#39;</code>，删除命名空间时，命名空间必须为空。</p>
</li>
<li><p>查看命名空间 <code>describe_namespace</code></p>
<p>用法：<code>describe_namespace &#39;ns&#39;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; describe_namespace &#x27;bigdata&#x27;</span><br><span class="line">DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;bigdata&#x27;&#125;</span><br><span class="line">Took 0.0068 seconds</span><br><span class="line">=&gt; 1</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看命名空间下的表 <code>list_namespace_tables</code></p>
<p>用法：<code>list_namespace_tables &#39;ns&#39;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; list_namespace_tables &#x27;default&#x27;</span><br><span class="line">TABLE</span><br><span class="line">logs</span><br><span class="line">user</span><br><span class="line">2 row(s)</span><br><span class="line">Took 0.3790 seconds</span><br><span class="line">=&gt; [&quot;logs&quot;, &quot;user&quot;]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>数据定义语言 <code>ddl</code></strong></p>
<p><strong>DDL(Data Definition Language)数据定义语言</strong>，主要是进行定义&#x2F;改变表的结构、数据类型、表之间的链接等操作。<code>ddl</code> 相关命令如下：<code>alter</code>、<code>alter_async</code>、<code>alter_status</code>、<code>clone_table_schema</code>、<code>create</code>、<code>describe</code>、<code>disable</code>、<code>disable_all</code>、<code>drop</code>、<code>drop_all</code>、<code>enable</code>、<code>enable_all</code>、<code>exists</code>、<code>get_table</code>、<code>is_disabled</code>、<code>is_enabled</code>、<code>list</code>、<code>list_regions</code>、<code>locate_region</code>、<code>show_filters</code>。下面将对一些常用命令进行介绍：</p>
<ul>
<li><p>创建表 <code>create</code></p>
<p><strong>常见用法：</strong></p>
<p>① <code>create &#39;ns:tb&#39;, &#123;NAME =&gt; &#39;cf&#39;, VERSIONS =&gt; 5&#125;</code></p>
<p>​	在命名空间 <code>ns</code> 下，创建一张表 <code>tb</code>，定义一个列族 <code>cf</code>。</p>
<p>② 当在默认命名空间<code>default</code>下创建表时，可以省略 <code>ns</code></p>
<p>③ <code>create &#39;tb&#39;, &#39;cf1&#39;, &#39;cf2&#39;</code></p>
<p>​	在默认命名空间<code>default</code>下，创建一张表<code>tb</code>，并定义两个列族 <code>cf1</code>、<code>cf2</code></p>
<p>④ <code>create &#39;tb&#39;, &#123;NAME =&gt; &#39;cf1&#39;, VERSIONS =&gt; 5&#125;, &#123;NAME =&gt; &#39;cf2&#39;, VERSIONS =&gt; 5&#125;</code></p>
<p>​	在默认命名空间<code>default</code>下，创建一张表<code>tb</code>，并定义两个列族 <code>cf1</code>、<code>cf2</code>，并同时指定两个列族的版本为 <code>5</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; create &#x27;bigdata:person&#x27;, &#123;NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; 5&#125;, &#123;NAME =&gt; &#x27;msg&#x27;, VERSIONS =&gt; 5&#125;</span><br><span class="line">Created table bigdata:person</span><br><span class="line">Took 1.5638 seconds</span><br><span class="line">=&gt; Hbase::Table - bigdata:person</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表的详细信息 <code>describe</code></p>
<p><strong>用法</strong>：<code>describe &#39;tb&#39;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):010:0&gt; describe &#x27;bigdata:person&#x27;</span><br><span class="line">Table bigdata:person is ENABLED</span><br><span class="line">bigdata:person</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;msg&#x27;, VERSIONS =&gt; &#x27;5&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fal</span><br><span class="line">se&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, IN</span><br><span class="line">_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line">&#123;NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; &#x27;5&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fa</span><br><span class="line">lse&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, I</span><br><span class="line">N_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line">2 row(s)</span><br><span class="line">Took 0.1536 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改表 <code>alter</code></p>
<p>表名创建时写的所有和列族相关的信息，都可以后续通过<code>alter</code>修改，包括<strong>增加</strong>、<strong>删除</strong>列族。</p>
<p>① 增加列族和修改信息都使用覆盖的方法</p>
<p>​	修改列族的版本，<code>VERSIONS =&gt; 6</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; 6</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 4.0145 seconds</span><br></pre></td></tr></table></figure>

<p>​	添加列族 <code>tel</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):002:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;tel&#x27;, VERSIONS =&gt; 6</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.4498 seconds</span><br></pre></td></tr></table></figure>

<p>​	查看修改后的数据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):003:0&gt; describe &#x27;bigdata:person&#x27;</span><br><span class="line">Table bigdata:person is ENABLED</span><br><span class="line">bigdata:person</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;msg&#x27;, VERSIONS =&gt; &#x27;6&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fal</span><br><span class="line">se&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, IN</span><br><span class="line">_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line"></span><br><span class="line">&#123;NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; &#x27;5&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fa</span><br><span class="line">lse&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, I</span><br><span class="line">N_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line"></span><br><span class="line">&#123;NAME =&gt; &#x27;tel&#x27;, VERSIONS =&gt; &#x27;6&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fal</span><br><span class="line">se&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, IN</span><br><span class="line">_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0795 seconds</span><br></pre></td></tr></table></figure>

<p>② 删除列族</p>
<p>​	删除列族可以用以下两种方式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; alter &#x27;bigdata:person&#x27;, NAME =&gt; &#x27;tel&#x27;, METHOD =&gt; &#x27;delete&#x27;</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.1046 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):002:0&gt; alter &#x27;bigdata:person&#x27;, &#x27;delete&#x27; =&gt; &#x27;msg&#x27;</span><br><span class="line">Updating all regions with the new schema...</span><br><span class="line">1/1 regions updated.</span><br><span class="line">Done.</span><br><span class="line">Took 2.9721 seconds</span><br></pre></td></tr></table></figure>

<p>​	然后查询修改后的数据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):003:0&gt; describe &#x27;bigdata:person&#x27;</span><br><span class="line">Table bigdata:person is ENABLED</span><br><span class="line">bigdata:person</span><br><span class="line">COLUMN FAMILIES DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;name&#x27;, VERSIONS =&gt; &#x27;5&#x27;, EVICT_BLOCKS_ON_CLOSE =&gt; &#x27;false&#x27;, NEW_VERSION_BEHAVIOR =&gt; &#x27;false&#x27;, KEEP_DELETED_CELLS =&gt; &#x27;FALSE&#x27;, CACHE_DATA_ON_WRITE =&gt; &#x27;fa</span><br><span class="line">lse&#x27;, DATA_BLOCK_ENCODING =&gt; &#x27;NONE&#x27;, TTL =&gt; &#x27;FOREVER&#x27;, MIN_VERSIONS =&gt; &#x27;0&#x27;, REPLICATION_SCOPE =&gt; &#x27;0&#x27;, BLOOMFILTER =&gt; &#x27;ROW&#x27;, CACHE_INDEX_ON_WRITE =&gt; &#x27;false&#x27;, I</span><br><span class="line">N_MEMORY =&gt; &#x27;false&#x27;, CACHE_BLOOMS_ON_WRITE =&gt; &#x27;false&#x27;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#x27;false&#x27;, COMPRESSION =&gt; &#x27;NONE&#x27;, BLOCKCACHE =&gt; &#x27;true&#x27;, BLOCKSIZE =&gt; &#x27;65536&#x27;&#125;</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0391 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>禁用表 <code>disable</code></p>
<p><strong>用法</strong>： <code>disable &#39;ns:tb&#39;</code>或<code>disable &#39;tb&#39;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; disable &#x27;bigdata:person&#x27;</span><br><span class="line">Took 0.9384 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除表 <code>drop</code></p>
<p><strong>用法</strong>： <code>drop &#39;ns:tb&#39;</code>或<code>drop &#39;tb&#39;</code>，删除表时需要保证表是禁用的，否则会出现以下错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; drop &#x27;bigdata:person&#x27;</span><br><span class="line"></span><br><span class="line">ERROR: Table bigdata:person is enabled. Disable it first.</span><br><span class="line"></span><br><span class="line">For usage try &#x27;help &quot;drop&quot;&#x27;</span><br><span class="line"></span><br><span class="line">Took 0.0248 seconds</span><br></pre></td></tr></table></figure>

<p>​	禁用表后再删除表：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; drop &#x27;bigdata:person&#x27;</span><br><span class="line">Took 1.7106 seconds</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>数据操纵语言 <code>dml</code></strong></p>
<p><strong>DML(Data Manipulation Language)数据操纵语言</strong>，主要是对数据进行增加、删除、修改操作。</p>
<ul>
<li><p>写入数据 <code>put</code></p>
<p>在 <code>HBase</code> 中如果想要写入数据，只能添加结构中最底层的 <code>Cell</code>。可以手动写入时间戳指定 <code>Cell</code> 的版本，推荐不写，默认使用当前的系统时间。如果重复写入相同 <code>rowKey</code>，相同列的数据，会写入多个版本进行覆盖。所以他同时兼具<strong>写入</strong>和<strong>修改</strong>的功能。</p>
<p><strong>用法</strong>：</p>
<p>① <code>put &#39;ns:tb&#39;, &#39;rk&#39;, &#39;col&#39;, &#39;value&#39;</code></p>
<p>​	向命名空间<code>ns</code>中的<code>tb</code>表中的行键为<code>rk</code>，列为<code>col</code>的位置写入值<code>value</code>。其中<code>col</code>为<code>cf:col</code>（即<code>列族:列名</code>）的格式。</p>
<p>​	如果重复向相同行号<code>rk</code>，相同<code>col</code>写数据，则会进行覆盖。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;zhangsan&#x27;</span><br><span class="line">Took 0.2415 seconds</span><br><span class="line">hbase(main):002:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;lisi&#x27;</span><br><span class="line">Took 0.0121 seconds</span><br><span class="line">hbase(main):003:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;wangwu&#x27;</span><br><span class="line">Took 0.0342 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):004:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1002&#x27;, &#x27;info:name&#x27;, &#x27;zhaoliu&#x27;</span><br><span class="line">Took 0.0082 seconds</span><br><span class="line">hbase(main):005:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1003&#x27;, &#x27;info:age&#x27;, &#x27;10&#x27;</span><br><span class="line">Took 0.0050 seconds</span><br><span class="line">hbase(main):006:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1003&#x27;, &#x27;info:sex&#x27;, &#x27;male&#x27;</span><br><span class="line">Took 0.0054 seconds</span><br></pre></td></tr></table></figure>

<p>② <code>put &#39;t1&#39;, &#39;r1&#39;, &#39;c1&#39;, &#39;value&#39;</code>用法同上。</p>
</li>
<li><p>读取数据 <code>get/scan</code></p>
<p>读取数据的方法有两个：<code>get</code> 和 <code>scan</code></p>
<ul>
<li><p><code>get</code>最大范围是一行数据，也可以进行列的过滤，读取数据的结果为多行 <code>Cell</code>。</p>
</li>
<li><p><code>scan</code>是扫描数据，能够读取多行数据，不建议扫描过多数据，推荐使用 <code>startRow</code> 和 <code>stopRow</code> 来控制读取的数据，默认范围左闭右开。</p>
</li>
</ul>
<p>① <code>get</code>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Some examples:</span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>											<span class="comment">#查看&#x27;r1&#x27;的数据</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;TIMERANGE =&gt; [ts1, ts2]&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; <span class="string">&#x27;c1&#x27;</span>&#125;						<span class="comment">#过滤单列, 只显示 &#x27;c1&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; [<span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;c2&#x27;</span>, <span class="string">&#x27;c3&#x27;</span>]&#125;			<span class="comment">#过滤多列, 只显示 &#x27;c1&#x27;, &#x27;c2&#x27;, &#x27;c3&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; <span class="string">&#x27;c1&#x27;</span>, TIMESTAMP =&gt; ts1&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; <span class="string">&#x27;c1&#x27;</span>, TIMERANGE =&gt; [ts1, ts2], VERSIONS =&gt; 4&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;COLUMN =&gt; <span class="string">&#x27;c1&#x27;</span>, TIMESTAMP =&gt; ts1, VERSIONS =&gt; 4&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;FILTER =&gt; <span class="string">&quot;ValueFilter(=, &#x27;binary:abc&#x27;)&quot;</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, <span class="string">&#x27;c1&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, <span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;c2&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, [<span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;c2&#x27;</span>]</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;CONSISTENCY =&gt; <span class="string">&#x27;TIMELINE&#x27;</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">t.get <span class="string">&#x27;r1&#x27;</span>, &#123;CONSISTENCY =&gt; <span class="string">&#x27;TIMELINE&#x27;</span>, REGION_REPLICA_ID =&gt; 1&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; get &#x27;bigdata:student&#x27;, &#x27;1001&#x27;</span><br><span class="line">COLUMN                                   CELL</span><br><span class="line"> info:name                               timestamp=1717580289267, value=wangwu</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0645 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):002:0&gt; get &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#123;COLUMN =&gt; &#x27;info:name&#x27;&#125;</span><br><span class="line">COLUMN                                   CELL</span><br><span class="line"> info:name                               timestamp=1717580289267, value=wangwu</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0107 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):003:0&gt; get &#x27;bigdata:student&#x27;, &#x27;1003&#x27;, &#123;COLUMN =&gt; &#x27;info:age&#x27;&#125;</span><br><span class="line">COLUMN                                   CELL</span><br><span class="line"> info:age                                timestamp=1717580366636, value=10</span><br><span class="line">1 row(s)</span><br><span class="line">Took 0.0185 seconds</span><br></pre></td></tr></table></figure>

<p>② <code>scan</code> 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Some examples:</span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;hbase:meta&#x27;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;hbase:meta&#x27;</span>, &#123;COLUMNS =&gt; <span class="string">&#x27;info:regioninfo&#x27;</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;ns1:t1&#x27;</span>, &#123;COLUMNS =&gt; [<span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;c2&#x27;</span>], LIMIT =&gt; 10, STARTROW =&gt; <span class="string">&#x27;xyz&#x27;</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;COLUMNS =&gt; [<span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;c2&#x27;</span>], LIMIT =&gt; 10, STARTROW =&gt; <span class="string">&#x27;xyz&#x27;</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;COLUMNS =&gt; <span class="string">&#x27;c1&#x27;</span>, TIMERANGE =&gt; [1303668804000, 1303668904000]&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;REVERSED =&gt; <span class="literal">true</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;ALL_METRICS =&gt; <span class="literal">true</span>&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;METRICS =&gt; [<span class="string">&#x27;RPC_RETRIES&#x27;</span>, <span class="string">&#x27;ROWS_FILTERED&#x27;</span>]&#125;</span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash">scan <span class="string">&#x27;t1&#x27;</span>, &#123;ROWPREFIXFILTER =&gt; <span class="string">&#x27;row2&#x27;</span>, FILTER =&gt; <span class="string">&quot;</span></span></span><br><span class="line">    (QualifierFilter (&gt;=, &#x27;binary:xyz&#x27;)) AND (TimestampsFilter ( 123, 456))&quot;&#125;</span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash"><span class="string">scan &#x27;t1&#x27;, &#123;FILTER =&gt;</span></span></span><br><span class="line">    org.apache.hadoop.hbase.filter.ColumnPaginationFilter.new(1, 0)&#125;</span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash"><span class="string">scan &#x27;t1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;&#125;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash"><span class="string">scan &#x27;t1&#x27;, &#123;ISOLATION_LEVEL =&gt; &#x27;READ_UNCOMMITTED&#x27;&#125;</span></span></span><br><span class="line"><span class="meta prompt_">  hbase&gt; </span><span class="language-bash"><span class="string">scan &#x27;t1&#x27;, &#123;MAX_RESULT_SIZE =&gt; 123456&#125;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; scan &#x27;bigdata:student&#x27;</span><br><span class="line">ROW                                      COLUMN+CELL</span><br><span class="line"> 1001                                    column=info:name, timestamp=1717580289267, value=wangwu</span><br><span class="line"> 1002                                    column=info:name, timestamp=1717580320927, value=zhaoliu</span><br><span class="line"> 1003                                    column=info:age, timestamp=1717580366636, value=10</span><br><span class="line"> 1003                                    column=info:sex, timestamp=1717581149533, value=male</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0338 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):025:0&gt; scan &#x27;bigdata:student&#x27;, &#123;STARTROW =&gt; &#x27;1001&#x27;, STOPROW =&gt; &#x27;1003&#x27;&#125;</span><br><span class="line">ROW                                      COLUMN+CELL</span><br><span class="line"> 1001                                    column=info:name, timestamp=1717580289267, value=wangwu</span><br><span class="line"> 1002                                    column=info:name, timestamp=1717580320927, value=zhaoliu</span><br><span class="line">2 row(s)</span><br><span class="line">Took 0.0118 seconds</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除数据 <code>delete/deleteall</code></p>
<p>删除数据的方式有两个：<code>delete</code>和<code>deleteall</code></p>
<ul>
<li><code>delete</code> 表示删除一个版本的数据，即为 <code>1</code> 个 <code>Cell</code>，不填写版本默认删除最新的一个版本。</li>
<li><code>deleteall</code> 表示删除所有版本的数据，即为当前行当前列的多个 <code>Cell</code>。执行命令会标记数据为要删除，不会直接彻底删除，删除只在特定时期清理磁盘时进行。</li>
</ul>
<p>① <code>delete</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;zhangsan&#x27;</span><br><span class="line">Took 0.3910 seconds</span><br><span class="line">hbase(main):002:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;lisi&#x27;</span><br><span class="line">Took 0.2024 seconds</span><br><span class="line">hbase(main):003:0&gt; put &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;, &#x27;wangwu&#x27;</span><br><span class="line">Took 0.1559 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):004:0&gt; scan &#x27;bigdata:student&#x27;</span><br><span class="line">ROW                                      COLUMN+CELL</span><br><span class="line"> 1001                                    column=info:name, timestamp=1717584831277, value=wangwu</span><br><span class="line"> 1002                                    column=info:name, timestamp=1717580320927, value=zhaoliu</span><br><span class="line"> 1003                                    column=info:age, timestamp=1717580366636, value=10</span><br><span class="line"> 1003                                    column=info:sex, timestamp=1717581149533, value=male</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0083 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):005:0&gt; delete &#x27;bigdata:student&#x27;, &#x27;1001&#x27;, &#x27;info:name&#x27;</span><br><span class="line">Took 0.0055 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):006:0&gt; scan &#x27;bigdata:student&#x27;</span><br><span class="line">ROW                                      COLUMN+CELL</span><br><span class="line"> 1001                                    column=info:name, timestamp=1717584831277, value=lisi</span><br><span class="line"> 1002                                    column=info:name, timestamp=1717580320927, value=zhaoliu</span><br><span class="line"> 1003                                    column=info:age, timestamp=1717580366636, value=10</span><br><span class="line"> 1003                                    column=info:sex, timestamp=1717581149533, value=male</span><br><span class="line">3 row(s)</span><br><span class="line">Took 0.0087 seconds</span><br></pre></td></tr></table></figure>

<p>② <code>deleteall</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">    </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="2-2-2-API操作"><a href="#2-2-2-API操作" class="headerlink" title="2.2.2 API操作"></a>2.2.2 API操作</h5><p>根据官方 API 介绍，<strong>HBase</strong> 的客户端连接由 <code>ConnectionFactory</code> 类来创建，用户使用完成之后需要手动关闭连接。同时连接是一个<strong>重量级</strong>的，推荐一个进程使用一个连接。对 <strong>HBase</strong> 的命令通过连接中的两个属性 <code>Admin</code> 和 <code>Table</code> 来实现。其中 <code>Admin</code> 主要管理 <strong>HBase</strong> 的元数据，如创建、修改表格信息，也就是 <code>DDL</code> 操作；<code>Table</code> 主要用于表格的增加、删除数据，也就是 <code>DML</code> 操作。</p>
<ul>
<li><p>环境搭建</p>
<p>使用 <code>IDEA</code> 创建 <code>Maven</code> 项目，并修改 <code>pom.xml</code> 文件，添加 <code>HBase</code> 所需要用到的依赖。</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hbase<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hbase-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 如果报错, 需要排除 javax.el 拓展 --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 因为 2.4.11 对应的是一个测试版本的 javax.el 包 --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 需要先排除这个包后再添加正式版的 javax.el 包 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.glassfish<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.el<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 添加正式版的 javax.el 包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.glassfish<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.el<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1-b06<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>单线程使用连接</p>
<p>下面展示了一种单线程使用连接的方式，实际开发中实际上很少这样做。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sdutcm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.AsyncConnection;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.Connection;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.ConnectionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HBaseConnection</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 创建连接配置对象</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 添加配置参数</span></span><br><span class="line">        conf.set(<span class="string">&quot;hbase.zookeeper.quorum&quot;</span>, <span class="string">&quot;bigdata&quot;</span>);      <span class="comment">// 这些配置都写在 hbase-site.xml 中</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 创建连接</span></span><br><span class="line">        <span class="comment">// 默认创建同步连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> ConnectionFactory.createConnection(conf);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以创建异步连接: 不推荐使用异步连接</span></span><br><span class="line">        CompletableFuture&lt;AsyncConnection&gt; asyncConnection = ConnectionFactory.createAsyncConnection(conf);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 使用连接</span></span><br><span class="line">        System.out.println(connection);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 关闭连接</span></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>多线程使用连接</p>
<p>实际开发中，因为 <strong>HBase</strong> 的连接是重量级的，所以我们在每个客户端中一般只创建一个（类似于单例模式）。所以我们对代码进行修改，如下：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sdutcm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.AsyncConnection;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.Connection;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.ConnectionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HBaseConnection</span> &#123;</span><br><span class="line">    <span class="comment">// 声明一个静态属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建连接配置对象: 当完成 resources 目录的配置后, 我们可以直接注释掉创建配置的部分</span></span><br><span class="line">        <span class="comment">// 直接进行创建连接操作</span></span><br><span class="line">        <span class="comment">// Configuration conf = new Configuration();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 添加配置参数</span></span><br><span class="line">        <span class="comment">// 实际开发中, 不应该在代码中显式的写参数, 而是将参数写在 resources 下的配置文件中</span></span><br><span class="line">        <span class="comment">// 将虚拟机的 hbase-site.xml 放到 resources 目录下</span></span><br><span class="line">        <span class="comment">// conf.set(&quot;hbase.zookeeper.quorum&quot;, &quot;bigdata&quot;);      // 这些配置都写在 hbase-site.xml 中</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 创建连接</span></span><br><span class="line">        <span class="comment">// 默认创建同步连接</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 这里修改为无参构造</span></span><br><span class="line">            <span class="comment">// connection = ConnectionFactory.createConnection(conf);</span></span><br><span class="line">            <span class="comment">// 这里通过查看 ConnectionFactory.createConnection() -&gt; 查看 create() -&gt; 可以发现 HBase 官方文档添加了两个配置文件</span></span><br><span class="line">            <span class="comment">// 分别为 hbase-default.xml 和 hbase-site.xml</span></span><br><span class="line">            <span class="comment">// 所以我们可以直接复制虚拟机的 hbase-site.xml 添加到 resources 目录下, 并且将这里改为无参构造</span></span><br><span class="line">            <span class="comment">// 无参则默认使用读取本地 hbase-site.xml 文件的方式添加参数</span></span><br><span class="line">            connection = ConnectionFactory.createConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭连接方式</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeConnection</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 判断连接是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 直接使用创建好的连接, 不要在 main 线程里面单独创建连接</span></span><br><span class="line">        System.out.println(HBaseConnection.connection);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用完连接后需要关闭连接</span></span><br><span class="line">        HBaseConnection.closeConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取 <code>Admin</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 Admin</span></span><br><span class="line"><span class="comment">// Admin 的连接式轻量级的, 不是线程安全的, 不推荐池化或者缓存这个连接</span></span><br><span class="line"><span class="type">Admin</span> <span class="variable">admin</span> <span class="operator">=</span> connection.getAdmin();</span><br></pre></td></tr></table></figure>

<ul>
<li>创建命名空间</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sdutcm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.NamespaceDescriptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.Admin;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hbase.client.Connection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HBaseDDL</span> &#123;</span><br><span class="line">    <span class="comment">// 声明一个静态属性, 这样我们可以在不同的类中, 调用到同一个对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> HBaseConnection.connection;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@brief</span> 创建命名空间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> namespace 命名空间名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">createNamespace</span><span class="params">(String namespace)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1. 获取 Admin</span></span><br><span class="line">        <span class="comment">// Admin 的连接式轻量级的, 不是线程安全的, 不推荐池化或者缓存这个连接</span></span><br><span class="line">        <span class="type">Admin</span> <span class="variable">admin</span> <span class="operator">=</span> connection.getAdmin();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 调用方法创建命名空间</span></span><br><span class="line">        <span class="comment">// 2.1 创建命名空间描述</span></span><br><span class="line">        NamespaceDescriptor.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> NamespaceDescriptor.create(namespace);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.2 给命名空间添加需求</span></span><br><span class="line">        builder.addConfiguration(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;sdutcm&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.3 使用 builder 构造出对应的添加完参数的对象, 完成创建</span></span><br><span class="line">        admin.createNamespace(builder.build());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭 admin</span></span><br><span class="line">        admin.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 测试创建命名空间</span></span><br><span class="line">        createNamespace(<span class="string">&quot;sdutcm&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 其他代码</span></span><br><span class="line">        System.out.println(<span class="string">&quot;其他代码&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭 HBase 连接</span></span><br><span class="line">        HBaseConnection.closeConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​	结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):001:0&gt; list_namespace</span><br><span class="line">NAMESPACE</span><br><span class="line">default</span><br><span class="line">hbase</span><br><span class="line">sdutcm		&lt;&lt;&lt; 可以看到 sdutcm 已经被创建出来了</span><br><span class="line">3 row(s)</span><br><span class="line">Took 8.0120 seconds</span><br><span class="line"></span><br><span class="line">hbase(main):002:0&gt; describe_namespace &quot;sdutcm&quot;</span><br><span class="line">DESCRIPTION</span><br><span class="line">&#123;NAME =&gt; &#x27;sdutcm&#x27;, user =&gt; &#x27;sdutcm&#x27;&#125;	&lt;&lt;&lt; 这里是我们添加的描述</span><br><span class="line">Took 0.7576 seconds</span><br><span class="line">=&gt; 1</span><br></pre></td></tr></table></figure>

<ul>
<li>多异常处理</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>判断表格是否存在</li>
<li>创建表格</li>
</ul>
<h3 id="📕-3-底层原理"><a href="#📕-3-底层原理" class="headerlink" title="📕 3. 底层原理"></a>📕 3. 底层原理</h3><h4 id="3-1-进程架构"><a href="#3-1-进程架构" class="headerlink" title="3.1 进程架构"></a>3.1 进程架构</h4><h5 id="3-1-1-Master架构"><a href="#3-1-1-Master架构" class="headerlink" title="3.1.1 Master架构"></a>3.1.1 Master架构</h5><h5 id="3-1-2-RegionServer架构"><a href="#3-1-2-RegionServer架构" class="headerlink" title="3.1.2 RegionServer架构"></a>3.1.2 RegionServer架构</h5><h4 id="3-2-写流程"><a href="#3-2-写流程" class="headerlink" title="3.2 写流程"></a>3.2 写流程</h4><h5 id="3-2-1-写入顺序"><a href="#3-2-1-写入顺序" class="headerlink" title="3.2.1 写入顺序"></a>3.2.1 写入顺序</h5><h5 id="3-2-2-刷新机制"><a href="#3-2-2-刷新机制" class="headerlink" title="3.2.2 刷新机制"></a>3.2.2 刷新机制</h5><h4 id="3-3-读流程"><a href="#3-3-读流程" class="headerlink" title="3.3 读流程"></a>3.3 读流程</h4><h5 id="3-3-1-读取顺序"><a href="#3-3-1-读取顺序" class="headerlink" title="3.3.1 读取顺序"></a>3.3.1 读取顺序</h5><h5 id="3-3-2-合并数据优化"><a href="#3-3-2-合并数据优化" class="headerlink" title="3.3.2 合并数据优化"></a>3.3.2 合并数据优化</h5><h4 id="3-4-文件合并"><a href="#3-4-文件合并" class="headerlink" title="3.4 文件合并"></a>3.4 文件合并</h4><h5 id="3-4-1-大合并"><a href="#3-4-1-大合并" class="headerlink" title="3.4.1 大合并"></a>3.4.1 大合并</h5><h5 id="3-4-2-小合并"><a href="#3-4-2-小合并" class="headerlink" title="3.4.2 小合并"></a>3.4.2 小合并</h5><h4 id="Region拆分"><a href="#Region拆分" class="headerlink" title="Region拆分"></a>Region拆分</h4><h5 id="自定义预分区"><a href="#自定义预分区" class="headerlink" title="自定义预分区"></a>自定义预分区</h5><h5 id="系统拆分"><a href="#系统拆分" class="headerlink" title="系统拆分"></a>系统拆分</h5><h3 id="🔧-企业开发"><a href="#🔧-企业开发" class="headerlink" title="🔧 企业开发"></a>🔧 企业开发</h3><h4 id="TSDB模式"><a href="#TSDB模式" class="headerlink" title="TSDB模式"></a>TSDB模式</h4><h4 id="基础表格模式"><a href="#基础表格模式" class="headerlink" title="基础表格模式"></a>基础表格模式</h4><h5 id="自定义API"><a href="#自定义API" class="headerlink" title="自定义API"></a>自定义API</h5><h5 id="整合框架"><a href="#整合框架" class="headerlink" title="整合框架"></a>整合框架</h5><h6 id="Phoenix-读写数据"><a href="#Phoenix-读写数据" class="headerlink" title="Phoenix 读写数据"></a>Phoenix 读写数据</h6><h6 id="Hive-分析数据"><a href="#Hive-分析数据" class="headerlink" title="Hive 分析数据"></a>Hive 分析数据</h6></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-05-22T02:13:00.000Z" title="2024/5/22 10:13:00">2024-05-22</time>发表</span><span class="level-item"><time dateTime="2024-05-22T04:33:42.112Z" title="2024/5/22 12:33:42">2024-05-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/ECharts/">ECharts</a></span><span class="level-item">5 分钟读完 (大约751个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/22/Build-Tomcat/">IDEA 2022 搭建 Tomcat 环境</a></p><div class="content"><p>[TOC]</p>
<h2 id="Tomcat-环境的搭建"><a href="#Tomcat-环境的搭建" class="headerlink" title="Tomcat 环境的搭建"></a>Tomcat 环境的搭建</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/what_how_why2020/article/details/114100385">参考教程</a></p>
<h3 id="下载-Tomcat"><a href="#下载-Tomcat" class="headerlink" title="下载 Tomcat"></a>下载 Tomcat</h3><p><a target="_blank" rel="noopener" href="https://tomcat.apache.org/index.html">Tomcat官网地址</a><br><img src="https://img-blog.csdnimg.cn/direct/d5e359b939c040b8978dc243e260f662.png#pic_center" alt="Tomcat官网"><br>在 Tomcat 官网中下载指定版本的 Tomcat，左侧 Download 处有相应版本，这里推荐 Tomcat 9 版本（因为Tomcat 10 在配置时会出现一定的问题）。<br><img src="https://img-blog.csdnimg.cn/direct/30b899f91e23440abc83c30ac92a1ccd.png#pic_center" alt="TomcatDownload"><br>下载后解压到指定位置即可。</p>
<h3 id="配置环境变量即可"><a href="#配置环境变量即可" class="headerlink" title="配置环境变量即可"></a>配置环境变量即可</h3><p>配置 Tomcat 环境变量前一定要配置好 Java 的环境变量，尤其是JAVA_HOME，这里我一开始并没有配置 <code>JAVA_HOME</code>，我的环境变量是<code>JAVA_HOME_180=xxx</code>，这种方式Tomcat是找不到<code>JAVA_HOME</code>的，因此我又重新配置了<code>JAVA_HOME</code>。<br>我的 <code>JAVA_HOME</code> 环境变量为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=D:\JDK\jdk1.8.0_231</span><br></pre></td></tr></table></figure>
<p>下面是 Tomcat 的环境变量配置：<br>新建 <code>CATALINA_HOME</code> 环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CATALINA_HOME=D:\tomcat\apache-tomcat-9.0.89</span><br></pre></td></tr></table></figure>
<p>修改<code>Path</code>，在 <code>Path</code> 后添加（新建）如下环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%CATALINA_HOME%\lib</span><br><span class="line">%CATALINA_HOME%\bin</span><br><span class="line">%CATALINA_HOME%\lib\servlet-api.jar</span><br></pre></td></tr></table></figure>

<h3 id="验证是否配置成功"><a href="#验证是否配置成功" class="headerlink" title="验证是否配置成功"></a>验证是否配置成功</h3><p>在命令行中，执行命令：<code>startup.bat</code>，若正常打印相关配置变量、且 Tomcat 进程被阻塞，即证明环境搭建成功。访问<code>localhost:8080</code>，出现以下界面即证明成功搭建。<br><img src="https://img-blog.csdnimg.cn/direct/28287d7ab3a145e396be286cc559d6e8.png#pic_center" alt="TomcatSuccess"><br>使用 <code>shutdown.bat</code> 命令即可使阻塞的 Tomcat 进程被关闭，推荐使用这种方式关闭 Tomcat。</p>
<h3 id="可能会出现的问题"><a href="#可能会出现的问题" class="headerlink" title="可能会出现的问题"></a>可能会出现的问题</h3><ol>
<li>协议处理程序初始化失败：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_59125846/article/details/122178889">参考教程</a><br>这个问题有可能是由于8080端口被占用了，在Windows中可以使用如下命令查看端口的占用情况： <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -aon|<span class="built_in">findstr</span> &quot;<span class="number">8080</span>&quot;</span><br></pre></td></tr></table></figure>
 如果确实被占用了，可以使用如下命令杀死端口号为 <code>&lt;PIDNUM&gt;</code> 的进程。 <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">taskkill</span> -PID &lt;PIDNUM&gt; -F</span><br></pre></td></tr></table></figure></li>
<li>闪退<br>可能原因是：环境变量配置不正确，仔细检查环境变量的配置。</li>
<li>乱码<br>问题描述：打开startup.bat后汉字乱码<br>解决方法：在.\apache-tomcat-9.0.43\conf下打开logging.properties文件<br>将<code>java.util.logging.ConsoleHandler.encoding = UTF-8</code>替换为<code>java.util.logging.ConsoleHandler.encoding = GBK</code></li>
</ol>
<h2 id="社区版-IDEA-如何配置-Tomcat"><a href="#社区版-IDEA-如何配置-Tomcat" class="headerlink" title="社区版 IDEA 如何配置 Tomcat"></a>社区版 IDEA 如何配置 Tomcat</h2><p>CSDN 上大多数教程使用 Maven 创建 Tomcat 项目，但是这种方法实在是过于麻烦，社区版和专业版又有些不同，找不到很多东西。</p>
<p>如何配置 IDEA 2022 社区版中的 Tomcat</p>
<ol>
<li>安装插件<br>在 File → Settings → Plugin 中安装插件，搜索 Tomcat，安装插件。<br><img src="https://img-blog.csdnimg.cn/direct/240fa059550945a28d84ff346ecfb0f7.png#pic_center" alt="SmartTomcat"></li>
<li>配置Tomcat路径<br>安装插件后，在 File → Settings → Plugin → Tomcat Server<br>添加配置如下：<br><img src="https://img-blog.csdnimg.cn/direct/0c4778a942504a91b01fcfbb42555f29.png#pic_center" alt="SmartTomcatConfig"></li>
<li>完成</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-05-04T01:43:02.000Z" title="2024/5/4 09:43:02">2024-05-04</time>发表</span><span class="level-item"><time dateTime="2024-05-04T01:48:58.610Z" title="2024/5/4 09:48:58">2024-05-04</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/">大数据技术</a><span> / </span><a class="link-muted" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/HBase/">HBase</a></span><span class="level-item">2 分钟读完 (大约348个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/04/Hadoop2HBase/">在 Hadoop 高可用的基础上搭建 HBase 高可用</a></p><div class="content"><h1 id="在-Hadoop-高可用的基础上搭建-HBase-高可用"><a href="#在-Hadoop-高可用的基础上搭建-HBase-高可用" class="headerlink" title="在 Hadoop 高可用的基础上搭建 HBase 高可用"></a>在 Hadoop 高可用的基础上搭建 HBase 高可用</h1><p>当Hadoop高可用搭建完成后，需要进一步再Hadoop高可用集群上搭建HBase高可用时，过程如下：</p>
<ol>
<li><p>前提说明：</p>
<p>我的集群为三台机器，每台机器上都有ZooKeeper，使用用户名和主机名（<code>Username@Hostname</code>）分别如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master@master</span><br><span class="line">master@slaver01</span><br><span class="line">master@slaver02</span><br></pre></td></tr></table></figure>
</li>
<li><p>首先保证 <strong>ZooKeeper</strong> 正常部署</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure>
</li>
<li><p>需要保证<strong>Hadoop</strong>正常部署</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[master@master ~]$ start-dfs.sh</span><br><span class="line">[master@slaver01 ~]$ start-yarn.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>解压HBase</p>
</li>
<li><p>配置环境变量</p>
</li>
<li><p>生效环境变量</p>
</li>
<li><p>修改配置文件</p>
<ul>
<li><p>修改 <code>hbase-site.xml</code> 文件</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- HBase数据在HDFS中的存放的路径 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里 ns 是 Hadoop 的 nameservice的值, 指向的是一个高可用的通道 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://ns/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- HBase 的运行模式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- false是单机模式, 若为 false, HBase 和 ZooKeeper 会运行在同一个 JVM 里面 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- true是分布式模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ZooKeeper的地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master,slaver01,slaver02<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ZooKeeper快照的存储位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/module/zookeeper-3.4.6/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- V2.1版本，在伪分布式情况下, 设置为 false --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当使用 hdfs 时, 设置为 true --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.unsafe.stream.capability.enforce<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  需要注意的是：</p>
<p>  这里使用了<code>ns</code>这个高可用通道，因此需要将Hadoop的 <code>core-site.xml</code> 与 <code>hdfs-site.xml</code>移动到<code>/opt/module/hbase-2.1.0/conf</code>下</p>
</li>
<li><p>修改 <code>regionserver</code> 文件</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">master</span><br><span class="line">slaver01</span><br><span class="line">slaver02</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li></li>
</ol>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatarMyself.jpg" alt="NilEra"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">NilEra</p><p class="is-size-6 is-block">C/C++ Developer!</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Jinan Shandong</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">34</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">31</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">37</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/NilEra-K" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/NilEra-K" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">GitHub</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://nano.chemtian.top/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thymol Blue</span></span><span class="level-right"><span class="level-item tag">nano.chemtian.top</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/CppDev/"><span class="level-start"><span class="level-item">CppDev</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/CppDev/Gaming/"><span class="level-start"><span class="level-item">Gaming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/QT6/"><span class="level-start"><span class="level-item">QT6</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="level-start"><span class="level-item">多线程编程</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/"><span class="level-start"><span class="level-item">语法点</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/bind/"><span class="level-start"><span class="level-item">bind</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/enum-class/"><span class="level-start"><span class="level-item">enum class</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/%E8%BD%AF%E4%BB%B6%E6%BA%90/"><span class="level-start"><span class="level-item">软件源</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">大数据技术</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/ECharts/"><span class="level-start"><span class="level-item">ECharts</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/HBase/"><span class="level-start"><span class="level-item">HBase</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Scala/"><span class="level-start"><span class="level-item">Scala</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/Spark/"><span class="level-start"><span class="level-item">Spark</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"><span class="level-start"><span class="level-item">数据可视化</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">项目</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">开发工具</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Axure-RP-9/"><span class="level-start"><span class="level-item">Axure RP 9</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/VSCode/"><span class="level-start"><span class="level-item">VSCode</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">数据结构/算法</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E5%93%88%E5%B8%8C-Hash/"><span class="level-start"><span class="level-item">哈希(Hash)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E6%A0%88-Stack/"><span class="level-start"><span class="level-item">栈(Stack)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/%E6%A0%91-Tree/"><span class="level-start"><span class="level-item">树(Tree)</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">深度学习</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Kaggle/"><span class="level-start"><span class="level-item">Kaggle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/"><span class="level-start"><span class="level-item">LLMs</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/PyTorch/"><span class="level-start"><span class="level-item">PyTorch</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%81%8A/"><span class="level-start"><span class="level-item">闲聊</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%81%8A/%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">计划</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-06T08:52:53.000Z">2024-08-06</time></p><p class="title"><a href="/2024/08/06/CPP-11-functional-bind/">CPP_11 functional bind</a></p><p class="categories"><a href="/categories/CppDev/">CppDev</a> / <a href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/">语法点</a> / <a href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/bind/">bind</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-06T02:54:59.000Z">2024-08-06</time></p><p class="title"><a href="/2024/08/06/CPP-11-Enum-Class/">CPP_11 Enum Class</a></p><p class="categories"><a href="/categories/CppDev/">CppDev</a> / <a href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/">语法点</a> / <a href="/categories/CppDev/%E8%AF%AD%E6%B3%95%E7%82%B9/enum-class/">enum class</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-05T02:37:16.000Z">2024-08-05</time></p><p class="title"><a href="/2024/08/05/Deploy-LLMs-ON-PC/">Deploy_LLMs_ON_PC</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/">LLMs</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-08-01T07:29:16.000Z">2024-08-01</time></p><p class="title"><a href="/2024/08/01/LLM-General-Education/">LLM_General_Education</a></p><p class="categories"><a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a> / <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLMs/">LLMs</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-30T14:55:47.000Z">2024-07-30</time></p><p class="title"><a href="/2024/07/30/MyBatisPlus/">MyBatisPlus</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">八月 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">七月 2024</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">六月 2024</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">五月 2024</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">四月 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">三月 2024</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Axure-RP-9/"><span class="tag">Axure RP 9</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C-11-%E6%96%B0%E6%A0%87%E5%87%86/"><span class="tag">C++ 11 新标准</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CppDev/"><span class="tag">CppDev</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECharts/"><span class="tag">ECharts</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EasyX/"><span class="tag">EasyX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GameDev/"><span class="tag">GameDev</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HBase/"><span class="tag">HBase</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaDev/"><span class="tag">JavaDev</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kaggle/"><span class="tag">Kaggle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLMs/"><span class="tag">LLMs</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LM-Studio/"><span class="tag">LM-Studio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MyBatis-Plus/"><span class="tag">MyBatis-Plus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PowerInfer/"><span class="tag">PowerInfer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PyTorch/"><span class="tag">PyTorch</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/QT6/"><span class="tag">QT6</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/R/"><span class="tag">R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scala/"><span class="tag">Scala</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spark/"><span class="tag">Spark</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tomcat/"><span class="tag">Tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VSCode/"><span class="tag">VSCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZooKeeper/"><span class="tag">ZooKeeper</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="tag">多线程编程</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF/"><span class="tag">大数据技术</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"><span class="tag">开发工具</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">数据结构</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="tag">机器学习</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">深度学习</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E5%88%92/"><span class="tag">计划</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%AD%E6%B3%95%E7%82%B9/"><span class="tag">语法点</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AF%E4%BB%B6%E6%BA%90/"><span class="tag">软件源</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%97%B2%E8%81%8A/"><span class="tag">闲聊</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE/"><span class="tag">项目</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/StarLogo.svg" alt="Hello, NilEra :-)" height="28"></a><p class="is-size-7"><span>&copy; 2024 NilEra</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2024 前方⚡高能</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/NilEra-K"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container" id="algolia-input"></div><div id="algolia-poweredby" style="display:flex;margin:0 .5em 0 1em;align-items:center;line-height:0"></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div><div class="searchbox-footer"></div></div></div><script src="https://cdnjs.loli.net/ajax/libs/algoliasearch/4.0.3/algoliasearch-lite.umd.js" crossorigin="anonymous" defer></script><script src="https://cdnjs.loli.net/ajax/libs/instantsearch.js/4.3.1/instantsearch.production.min.js" crossorigin="anonymous" defer></script><script src="/js/algolia.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadAlgolia({"applicationId":"2TB5ZZYPCO","apiKey":"00a43f1d62ca7b24c8b78d5f0223c065","indexName":"dev_nilera_blog"}, {"hint":"想要查找什么...","no_result":"未找到搜索结果","untitled":"(无标题)","empty_preview":"(无内容预览)"});
        });</script></body></html>